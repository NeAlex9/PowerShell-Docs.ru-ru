---
description: Описывает использование операторов для присвоения значений переменным.
keywords: powershell,командлет
ms.date: 04/26/2020
online version: https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_assignment_operators?view=powershell-7&WT.mc_id=ps-gethelp
schema: 2.0.0
title: about_Assignment_Operators
ms.openlocfilehash: fba0c5f5e5263af15eb3d56f1c42a881057afc46
ms.sourcegitcommit: f874dc1d4236e06a3df195d179f59e0a7d9f8436
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "93232154"
---
# <a name="about-assignment-operators"></a>Сведения об операторах присваивания

## <a name="short-description"></a>Краткое описание
Описывает использование операторов для присвоения значений переменным.

## <a name="long-description"></a>Подробное описание

Операторы присваивания присваивают одному или нескольким значениям переменной. Они могут выполнять числовые операции над значениями перед назначением.

PowerShell поддерживает следующие операторы присваивания.

|Оператор|Описание                                                  |
|--------|-------------------------------------------------------------|
|=       |Устанавливает значение переменной в указанное значение.         |
|+=      |Увеличивает значение переменной по указанному значению или |
|        |Добавляет указанное значение к существующему значению.           |
|-=      |Уменьшает значение переменной на указанное значение.    |
|*=      |Умножает значение переменной на указанное значение или|
|        |Добавляет указанное значение к существующему значению.           |
|/=      |Делит значение переменной на указанное значение.      |
|%=      |Делит значение переменной на указанное значение и   |
|        |затем присваивает переменной остаток (остаток от деления).        |
|++      |Увеличивает значение переменной, назначаемое свойство или   |
|        |элемент массива на 1.                                          |
|--      |Уменьшает значение переменной, присваиваемого свойства или   |
|        |элемент массива на 1.                                          |

## <a name="syntax"></a>Синтаксис

Синтаксис операторов присваивания выглядит следующим образом:

`<assignable-expression>` `<assignment-operator>` `<value>`

Назначаемые выражения включают переменные и свойства. Значением может быть одиночное значение, массив значений, команда, выражение или оператор.

Операторы инкремента и декремента являются унарными операторами. Каждый из них имеет префиксную и постфиксную версии.

`<assignable-expression><operator>`
`<operator><assignable-expression>`

Выражение, присваиваемое, должно быть числом или должно быть преобразовано в число.

## <a name="assigning-values"></a>Присвоение значений

Переменные — это именованные пространства памяти, в которых хранятся значения. Значения в переменных хранятся с помощью оператора присваивания `=` . Новое значение может заменить существующее значение переменной или добавить новое значение к существующему значению.

Базовым оператором присваивания является знак равенства `=` `(ASCII 61)` . Например, следующая инструкция присваивает переменной PowerShell значение `$MyShell` :

```powershell
$MyShell = "PowerShell"
```

При присвоении значения переменной в PowerShell переменная создается, если она еще не существовала. Например, первая из следующих двух инструкций присваивания создает `$a` переменную и присваивает ей значение 6 `$a` . Вторая инструкция присваивания присваивает значение 12 `$a` . Первая инструкция создает новую переменную. Вторая инструкция изменяет только свое значение:

```powershell
$a = 6
$a = 12
```

Переменные в PowerShell не имеют определенного типа данных, пока они не будут преобразованы.
Если переменная содержит только один объект, переменная принимает тип данных этого объекта. Если переменная содержит коллекцию объектов, переменная имеет тип данных System. Object. Таким образом, в коллекцию можно назначить любой тип объекта. В следующем примере показано, как добавить объекты Process, объекты служб, строки и целые числа в переменную без создания ошибки:

```powershell
$a = Get-Process
$a += Get-Service
$a += "string"
$a += 12
```

Поскольку оператор присваивания `=` имеет более низкий приоритет, чем оператор конвейера `|` , круглые скобки не являются обязательными для назначения результата конвейера команды переменной. Например, следующая команда сортирует службы на компьютере, а затем присваивает этой переменной отсортированные службы `$a` :

```powershell
$a = Get-Service | Sort-Object -Property name
```

Можно также присвоить значение, созданное инструкцией, переменной, как показано в следующем примере:

```powershell
$a = if ($b -lt 0) { 0 } else { $b }
```

В этом примере ноль присваивается `$a` переменной, если значение `$b` меньше нуля. Он присваивает значение значению, `$b` `$a` Если значение не `$b` меньше нуля.

### <a name="the-assignment-operator"></a>Оператор присваивания

Оператор присваивания `=` присваивает значения переменным. Если переменная уже имеет значение, оператор присваивания `=` заменяет значение без предупреждения.

Следующая инструкция присваивает переменной целочисленное значение 6 `$a` :

```powershell
$a = 6
```

Чтобы присвоить строковое значение переменной, заключите строковое значение в кавычки следующим образом:

```powershell
$a = "baseball"
```

Чтобы присвоить переменной массив (несколько значений), разделите значения запятыми следующим образом:

```powershell
$a = "apple", "orange", "lemon", "grape"
```

Чтобы присвоить переменной хэш-таблицу, используйте стандартную нотацию хэш-таблицы в PowerShell. Введите знак AT, `@` а затем пары "ключ-значение", разделенные точкой с запятой `;` и заключенные в фигурные скобки `{ }` . Например, чтобы присвоить переменной хэш-таблицу `$a` , введите:

```powershell
$a = @{one=1; two=2; three=3}
```

Чтобы присвоить шестнадцатеричные значения переменной, перед значением укажите `0x` .
PowerShell преобразует шестнадцатеричное значение (0x10) в десятичное значение (в данном случае 16) и присваивает `$a` переменной значение. Например, чтобы присвоить переменной значение 0x10 `$a` , введите:

```powershell
$a = 0x10
```

Чтобы присвоить переменной экспоненциальное значение, введите корневой номер, букву `e` и число, кратное 10. Например, чтобы присвоить значение 3,1415 для переменной степени 1 000 `$a` , введите:

```powershell
$a = 3.1415e3
```

PowerShell также может преобразовывать килобайты `KB` , мегабайты `MB` и гигабайты `GB` в байты. Например, чтобы присвоить переменной значение 10 килобайт `$a` , введите:

```powershell
$a = 10kb
```

### <a name="the-assignment-by-addition-operator"></a>Оператор присваивания с помощью оператора сложения

Оператор присваивания путем сложения `+=` либо увеличивает значение переменной, либо добавляет указанное значение к существующему значению. Действие зависит от того, имеет ли переменная числовой или строковый тип и указывает, содержит ли переменная одно значение (скалярное) или несколько значений (коллекция).

`+=`Оператор объединяет две операции. Сначала он добавляет, а затем назначает.
Поэтому следующие операторы эквивалентны:

```powershell
$a += 2
$a = ($a + 2)
```

Если переменная содержит одно числовое значение, `+=` оператор увеличивает существующее значение на величину в правой части оператора. Затем оператор присваивает результирующее значение переменной. В следующем примере показано, как использовать `+=` оператор для увеличения значения переменной:

```powershell
$a = 4
$a += 2
$a
```

```
6
```

Если значение переменной является строкой, то значение справа от оператора добавляется к строке следующим образом:

```powershell
$a = "Windows"
$a += " PowerShell"
$a
```

```
Windows PowerShell
```

Если значение переменной является массивом, `+=` оператор добавляет значения в правой части оператора в массив. Если массив явно не вводится путем приведения, можно добавить в массив любой тип значения, как показано ниже.

```powershell
$a = 1,2,3
$a += 2
$a
```

```
1
2
3
2
```

and

```powershell
$a += "String"
$a
```

```
1
2
3
2
String
```

Если значение переменной является хэш-таблицей, `+=` оператор добавляет значение в правой части оператора в хэш-таблицу. Однако, поскольку единственным типом, который можно добавить в хэш-таблицу, является другая хэш-таблица, все остальные назначения завершаются ошибкой.

Например, следующая команда назначает хэш-таблицу `$a` переменной.
Затем он использует оператор, `+=` чтобы присоединить другую хэш-таблицу к существующей хэш-таблице, фактически добавив новую пару «ключ-значение» в существующую хэш-таблицу.
Эта команда выполняется, как показано в выходных данных:

```powershell
$a = @{a = 1; b = 2; c = 3}
$a += @{mode = "write"}
$a
```

```
Name                           Value
----                           -----
a                              1
b                              2
mode                           write
c                              3
```

Следующая команда пытается добавить целое число "1" в хэш-таблицу в `$a` переменной. Эта команда завершается ошибкой:

```powershell
$a = @{a = 1; b = 2; c = 3}
$a += 1
```

```
You can add another hash table only to a hash table.
At line:1 char:6
+ $a += <<<<  1
```

### <a name="the-assignment-by-subtraction-operator"></a>Оператор присваивания с вычитанием

Оператор присваивания с вычитанием `-=` уменьшает значение переменной на значение, указанное в правой части оператора. Этот оператор не может использоваться со строковыми переменными и не может использоваться для удаления элемента из коллекции.

`-=`Оператор объединяет две операции. Сначала вычитается, а затем назначается. Поэтому следующие операторы эквивалентны:

```powershell
$a -= 2
$a = ($a - 2)
```

В следующем примере показано использование `-=` оператора для уменьшения значения переменной:

```powershell
$a = 8
$a -= 2
$a
```

```
6
```

`-=`Оператор присваивания также можно использовать для уменьшения значения элемента числового массива. Для этого укажите индекс элемента массива, который требуется изменить. В следующем примере значение третьего элемента массива (элемент 2) уменьшается на 1:

```powershell
$a = 1,2,3
$a[2] -= 1
$a
```

```
1
2
2
```

Нельзя использовать `-=` оператор для удаления значений переменной. Чтобы удалить все значения, назначенные переменной, используйте командлеты [Clear-Item](xref:Microsoft.PowerShell.Management.Clear-Item) или [clear-variable](xref:Microsoft.PowerShell.Utility.Clear-Variable) , чтобы присвоить значение `$null` `""` переменной или.

```powershell
$a = $null
```

Чтобы удалить определенное значение из массива, используйте нотацию массива, чтобы присвоить значение `$null` конкретному элементу. Например, следующая инструкция удаляет второе значение (позиция индекса 1) из массива.

```powershell
$a = 1,2,3
$a
```

```
1
2
3
```

```powershell
$a[1] = $null
$a
```

```
1
3
```

Чтобы удалить переменную, используйте командлет [Remove-Variable](xref:Microsoft.PowerShell.Utility.Remove-Variable) . Этот метод полезен, если переменная явно приведена к определенному типу данных и требуется нетипизированная переменная. Следующая команда удаляет `$a` переменную:

```powershell
Remove-Variable -Name a
```

### <a name="the-assignment-by-multiplication-operator"></a>Назначение по оператору умножения

Оператор присваивания по умножению `*=` умножает числовое значение или добавляет указанное число копий строкового значения переменной.

Если переменная содержит одно числовое значение, это значение умножается на значение в правой части оператора. Например, в следующем примере показано использование `*=` оператора для умножения значения переменной:

```powershell
$a = 3
$a *= 4
$a
```

```
12
```

В этом случае `*=` оператор объединяет две операции. Сначала он умножается, а затем назначается. Поэтому следующие операторы эквивалентны:

```powershell
$a *= 2
$a = ($a * 2)
```

Если переменная содержит строковое значение, PowerShell добавляет указанное число строк к значению следующим образом:

```powershell
$a = "file"
$a *= 4
$a
```

```
filefilefilefile
```

Чтобы умножить элемент массива, используйте индекс для задания элемента, который необходимо умножить. Например, следующая команда умножает первый элемент массива (позиция индекса 0) на 2:

```powershell
$a[0] *= 2
```

### <a name="the-assignment-by-division-operator"></a>Оператор присваивания по делениям

Оператор присваивания по делениям `/=` делит числовое значение на значение, указанное в правой части оператора. Оператор не может использоваться со строковыми переменными.

`/=`Оператор объединяет две операции. Сначала он делит, а затем назначает. Поэтому следующие две инструкции эквивалентны:

```powershell
$a /= 2
$a = ($a / 2)
```

Например, следующая команда использует `/=` оператор для деления значения переменной:

```powershell
$a = 8
$a /=2
$a
```

```
4
```

Чтобы разделить элемент массива, используйте индекс для задания элемента, который требуется изменить. Например, следующая команда делит второй элемент массива (позиция индекса 1) на 2:

```powershell
$a[1] /= 2
```

### <a name="the-assignment-by-modulus-operator"></a>Оператор присваивания по модулю

Оператор присваивания по модулю `%=` делит значение переменной на значение в правой части оператора. Затем `%=` оператор присваивает переменной остаток (известный как модуль). Этот оператор можно использовать, только если переменная содержит одно числовое значение. Этот оператор нельзя использовать, если переменная содержит строковую переменную или массив.

`%=`Оператор объединяет две операции. Сначала он делит и определяет остаток, а затем назначает остаток переменной. Поэтому следующие операторы эквивалентны:

```powershell
$a %= 2
$a = ($a % 2)
```

В следующем примере показано, как использовать `%=` оператор для сохранения модуля частного:

```powershell
$a = 7
$a %= 4
$a
```

```
3
```

## <a name="the-increment-and-decrement-operators"></a>Операторы инкремента и декремента

Оператор инкремента `++` увеличивает значение переменной на 1. При использовании оператора инкремента в простой инструкции значение не возвращается. Чтобы просмотреть результат, отобразите значение переменной следующим образом:

```powershell
$a = 7
++$a
$a
```

```
8
```

Чтобы принудительно вернуть значение, заключите переменную и оператор в круглые скобки следующим образом:

```powershell
$a = 7
(++$a)
```

```
8
```

Оператор инкремента может быть помещен перед переменной (prefix) или после нее (постфикс). Префиксная версия оператора увеличивает переменную перед использованием ее значения в инструкции следующим образом:

```powershell
$a = 7
$c = ++$a
$a
```

```
8
```

```powershell
$c
```

```
8
```

Постфиксная версия оператора увеличивает переменную после использования ее значения в инструкции. В следующем примере `$c` `$a` переменные и имеют разные значения, так как перед изменениями присваивается значение `$c` `$a` .

```powershell
$a = 7
$c = $a++
$a
```

```
8
```

```powershell
$c
```

```
7
```

Оператор декремента `--` уменьшает значение переменной на 1. Как и в случае с оператором инкремента, при использовании оператора в простой инструкции значение не возвращается. Для возврата значения используйте круглые скобки следующим образом:

```powershell
$a = 7
--$a
$a
```

```
6
```

```powershell
(--$a)
```

```
5
```

Префиксная версия оператора уменьшает переменную перед использованием ее значения в инструкции следующим образом:

```powershell
$a = 7
$c = --$a
$a
```

```
6
```

```powershell
$c
```

```
6
```

Постфиксная версия оператора уменьшает переменную после того, как ее значение используется в инструкции. В следующем примере `$d` `$a` переменные и имеют разные значения, так как перед изменениями присваивается значение `$d` `$a` .

```powershell
$a = 7
$d = $a--
$a
```

```
6
```

```powershell
$d
```

```
7
```

## <a name="microsoft-net-framework-types"></a>Типы Microsoft .NET Framework

По умолчанию, если переменная имеет только одно значение, то значение, присвоенное переменной, определяет тип данных переменной. Например, следующая команда создает переменную с типом "integer" (тип System. Int32):

```powershell
$a = 6
```

Чтобы найти тип .NET Framework переменной, используйте метод **GetType** и его свойство **FullName** , как показано ниже. Не забудьте добавить круглые скобки после имени метода **GetType** , даже если у вызова метода нет аргументов:

```powershell
$a = 6
$a.GetType().FullName
```

```
System.Int32
```

Чтобы создать переменную, содержащую строку, присвойте переменной строковое значение. Чтобы указать, что значение является строкой, заключите его в кавычки следующим образом:

```powershell
$a = "6"
$a.GetType().FullName
```

```
System.String
```

Если первое значение, присвоенное переменной, является строкой, PowerShell обрабатывает все операции как строковые операции и приводит новые значения к строкам.
Это происходит в следующем примере:

```powershell
$a = "file"
$a += 3
$a
```

```
file3
```

Если первое значение является целым числом, то PowerShell обрабатывает все операции как целочисленные операции и приводит новые значения к целому числу. Это происходит в следующем примере:

```powershell
$a = 6
$a += "3"
$a
```

```
9
```

Новую скалярную переменную можно привести в качестве любого типа .NET Framework, поместив имя типа в скобки перед именем переменной или первым значением присваивания. При приведении переменной можно определить типы данных, которые могут храниться в переменной. Кроме того, можно определить, как переменная ведет себя при управлении ею.

Например, следующая команда приводит переменную в виде строкового типа:

```powershell
[string]$a = 27
$a += 3
$a
```

```
273
```

В следующем примере первое значение приводится вместо приведения переменной:

```powershell
$a = [string]27
```

При приведении переменной к конкретному типу распространенным соглашением является приведение переменной, а не значения. Однако нельзя выполнить операцию переприведения типа данных существующей переменной, если ее значение не может быть преобразовано в новый тип данных. Чтобы изменить тип данных, необходимо заменить его значение следующим образом:

```powershell
$a = "string"
[int]$a
```

```
Cannot convert value "string" to type "System.Int32". Error: "Input string was
not in a correct format." At line:1 char:8 + [int]$a <<<<
```

```powershell
[int]$a = 3
```

Кроме того, если вы предшествует имени переменной с типом данных, тип этой переменной блокируется, если тип не был явно переопределен путем указания другого типа данных. Если попытаться присвоить значение, несовместимое с существующим типом, и не переопределить тип явным образом, PowerShell выведет ошибку, как показано в следующем примере:

```powershell
$a = 3
$a = "string"
[int]$a = 3
$a = "string"
```

```
Cannot convert value "string" to type "System.Int32". Error: "Input
string was not in a correct format."
At line:1 char:3
+ $a <<<<  = "string"
```

```powershell
[string]$a = "string"
```

В PowerShell типы данных переменных, содержащих несколько элементов в массиве, обрабатываются не так, как типы данных переменных, содержащих один элемент. Если тип данных специально не назначен переменной массива, тип данных всегда имеет значение `System.Object []` . Этот тип данных относится только к массивам.

Иногда можно переопределить тип по умолчанию, указав другой тип. Например, следующая команда приводит переменную в качестве `string []` типа массива:

```powershell
[string []] $a = "one", "two", "three"
```

Переменные PowerShell могут быть любого типа данных .NET Framework. Кроме того, можно назначить любой полный .NET Framework тип данных, доступный в текущем процессе. Например, следующая команда задает `System.DateTime` тип данных:

```powershell
[System.DateTime]$a = "5/31/2005"
```

Переменной будет присвоено значение, соответствующее `System.DateTime` типу данных. Значение `$a` переменной будет следующим:

```
Tuesday, May 31, 2005 12:00:00 AM
```

## <a name="assigning-multiple-variables"></a>Назначение нескольких переменных

В PowerShell можно назначить значения нескольким переменным с помощью одной команды. Первый элемент значения присваивания присваивается первой переменной, второй элемент присваивается второй переменной, третий элемент — третьей переменной и т. д. Например, следующая команда присваивает значение 1 `$a` переменной, значение 2 — переменной `$b` , а значение 3 `$c` — переменной:

```powershell
$a, $b, $c = 1, 2, 3
```

Если значение назначения содержит больше элементов, чем переменные, все остальные значения присваиваются последней переменной. Например, следующая команда содержит три переменные и пять значений:

```powershell
$a, $b, $c = 1, 2, 3, 4, 5
```

Таким образом, PowerShell присваивает переменной значение 1 `$a` , а значение 2 — `$b` переменной. Она присваивает переменной значения 3, 4 и 5 `$c` .
Чтобы присвоить значения в `$c` переменной трем другим переменным, используйте следующий формат:

```powershell
$d, $e, $f = $c
```

Эта команда присваивает переменной значение 3 `$d` , значение 4 `$e` — переменной, а значение 5 — `$f` переменной.

Если значение назначения содержит меньше элементов, чем переменные, все остальные переменные в конце не будут иметь никаких значений. Например, следующая команда содержит три переменные и два значения:

```powershell
$a, $b, $c = 1, 2
```

Таким образом, PowerShell присваивает переменной значение 1 `$a` , а значение 2 — `$b` переменной. Переменной не будет присвоено значение `$c` .

Можно также назначить одно значение нескольким переменным путем сцепления переменных. Например, следующая команда присваивает значение "три" всем четырем переменным:

```powershell
$a = $b = $c = $d = "three"
```

## <a name="variable-related-cmdlets"></a>Командлеты, связанные с переменными

В дополнение к использованию операции присваивания для задания значения переменной можно также использовать командлет [Set-Variable](xref:Microsoft.PowerShell.Utility.Set-Variable) . Например, следующая команда использует `Set-Variable` для присвоения переменной массива из 1, 2, 3 `$a` .

```powershell
Set-Variable -Name a -Value 1, 2, 3
```

## <a name="see-also"></a>См. также статью

[about_Arrays](about_Arrays.md)

[about_Hash_Tables](about_Hash_Tables.md)

[about_Variables](about_Variables.md)

[Clear-Variable](xref:Microsoft.PowerShell.Utility.Clear-Variable)

[Remove-Variable](xref:Microsoft.PowerShell.Utility.Remove-Variable)

[Set-Variable](xref:Microsoft.PowerShell.Utility.Set-Variable)
