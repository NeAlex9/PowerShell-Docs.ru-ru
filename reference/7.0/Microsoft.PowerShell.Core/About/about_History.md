---
description: Описание способов получения и выполнения команд в журнале команд.
keywords: powershell,командлет
Locale: en-US
ms.date: 05/13/2020
online version: https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_history?view=powershell-7&WT.mc_id=ps-gethelp
schema: 2.0.0
title: about_History
ms.openlocfilehash: b9e8ab09553f8cd6452f4a891ecbaa1b914af895
ms.sourcegitcommit: f874dc1d4236e06a3df195d179f59e0a7d9f8436
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "93231797"
---
# <a name="about-history"></a>Сведения о журнале

## <a name="short-description"></a>Краткое описание
Описание способов получения и выполнения команд в журнале команд.

## <a name="long-description"></a>Полное описание

При вводе команды в командной строке PowerShell сохраняет команду в журнале команд. Вы можете использовать команды в журнале в качестве записи своей работы. Вы также можете отозвать и выполнить команды из журнала команд.

PowerShell имеет два разных регистратора: Встроенный журнал и журнал, которыми управляет модуль **PSReadLine** . Журналы управляются отдельно, но оба журнала доступны в сеансах, где **PSReadLine** загружается.

## <a name="using-the-psreadline-history"></a>Использование журнала PSReadLine

Журнал PSReadLine отслеживает команды, используемые во всех сеансах PowerShell.
Журнал записывается в центральный файл на узле. Этот файл журнала доступен для всех сеансов и содержит весь журнал за прошлый период. Журнал не удаляется по завершении сеанса. Кроме того, этот журнал не может управляться `*-History` командлетами. Дополнительные сведения см. в разделе [about_PSReadLine](../../PSReadLine/About/about_PSReadLine.md).

## <a name="using-the-built-in-session-history"></a>Использование встроенного журнала сеанса

Встроенная История отслеживает только команды, используемые в текущем сеансе. Журнал недоступен для других сеансов и удаляется по завершении сеанса.

### <a name="history-cmdlets"></a>Командлеты журнала

PowerShell имеет набор командлетов для управления журналом команд.

| Командлет           | Псевдоним  | Описание                                |
| ---------------- | ------ | ------------------------------------------ |
| `Get-History`    | `h`    | Возвращает журнал команд.                  |
| `Invoke-History` | `r`    | Выполняет команду в журнале команд.     |
| `Add-History`    |        | Добавляет команду в журнал команд.     |
| `Clear-History`  | `clhy` | Удаляет команды из журнала команд. |

### <a name="keyboard-shortcuts-for-managing-history"></a>Сочетания клавиш для управления журналом

В консоли PowerShell для управления журналом команд можно использовать следующие сочетания клавиш.

- <kbd>Стрелка вверх</kbd> — Отображает предыдущую команду.
- <kbd>Стрелка вниз</kbd> — отображает следующую команду.
- <kbd>F7</kbd> — отображает журнал команд.
- <kbd>ESC</kbd> — скрытие журнала.
- <kbd>F8</kbd> — находит команду. Введите один или несколько символов и нажмите клавишу <kbd>F8</kbd>. Снова нажмите клавишу <kbd>F8</kbd> для следующего экземпляра.
- <kbd>F9</kbd> — Поиск команды по идентификатору журнала. Введите идентификатор журнала, а затем нажмите клавишу <kbd>F9</kbd>. Нажмите клавишу <kbd>F7</kbd> , чтобы найти идентификатор.
- <kbd>#</kbd>`<string>`</kbd><kbd>Tab</kbd> — Поиск по журналу `*<string>*` и возврат последнего совпадения. При многократном нажатии клавиши <kbd>Tab</kbd> выполняется циклический перебор соответствующих элементов в журнале.

> [!NOTE]
> Эти сочетания клавиш реализуются ведущим приложением консоли. Другие приложения, такие как Visual Studio Code или Windows Terminal, могут иметь различные сочетания клавиш. Привязки могут быть переопределены модулем PSReadLine. PSReadLine загружается автоматически при запуске сеанса PowerShell.
> При загрузке PSReadLine <kbd>F7</kbd> и <kbd>F9</kbd> не привязаны к какой бы то ни было функции. PSReadLine не предоставляет эквивалентной функциональности. Дополнительные сведения см. в разделе [about_PSReadLine](../../PSReadLine/About/about_PSReadLine.md).

### <a name="maximumhistorycount"></a>максимумхисторикаунт

`$MaximumHistoryCount`Переменная предпочтения определяет максимальное количество команд, сохраняемых PowerShell в журнале команд. Значение по умолчанию —
4096.

Например, следующая команда `$MaximumHistoryCount` позволяет сократить до 100 команд:

```powershell
$MaximumHistoryCount = 100
```

Чтобы применить этот параметр, перезапустите PowerShell.

Чтобы сохранить новое значение переменной для всех сеансов PowerShell, добавьте инструкцию назначения в профиль PowerShell. Дополнительные сведения о профилях см. в разделе [about_Profiles](about_Profiles.md).

Дополнительные сведения о `$MaximumHistoryCount` переменной предпочтений см. в разделе [about_Preference_Variables](about_Preference_Variables.md).

### <a name="order-of-commands-in-the-history"></a>Порядок команд в журнале

Команды добавляются в журнал, когда команда завершает выполнение, а не при введении команды. Если выполнение команд занимает некоторое время или команды выполняются во вложенной командной строке, команды могут выглядеть неупорядоченными в журнале. Команды, выполняемые во вложенном запросе, выполняются только при выходе из уровня запроса.

## <a name="see-also"></a>См. также:

- [about_Line_Editing](about_Line_Editing.md)
- [about_Preference_Variables](about_Preference_Variables.md)
- [about_Profiles](about_Profiles.md)
- [about_Variables](about_Variables.md)
- [about_PSReadLine](../../PSReadLine/About/about_PSReadLine.md)
