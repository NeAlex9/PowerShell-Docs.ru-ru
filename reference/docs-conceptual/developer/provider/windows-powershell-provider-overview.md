---
ms.date: 09/13/2016
ms.topic: reference
title: Общие сведения о поставщиках Windows PowerShell
description: Общие сведения о поставщиках Windows PowerShell
ms.openlocfilehash: 2f1c5f5991a64fb2b85ece7feba915164ebd34ee
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "93355516"
---
# <a name="windows-powershell-provider-overview"></a>Общие сведения о поставщиках Windows PowerShell

Поставщик Windows PowerShell позволяет предоставлять любое хранилище данных как файловую систему, как если бы это был подключенный диск. Например, встроенный поставщик реестра позволяет перемещаться по реестру, как при переходе на `c` диск компьютера. Поставщик может также переопределить `Item` командлеты (например,, и `Get-Item` `Set-Item` т. д.) таким образом, чтобы данные в хранилище данных можно было рассматривать как файлы и каталоги, обрабатываемые при переходе по файловой системе. Дополнительные сведения о поставщиках и дисках, а также встроенных поставщиках в Windows PowerShell см. в разделе [about_Providers](/powershell/module/microsoft.powershell.core/about/about_providers).

## <a name="providers-and-drives"></a>Поставщики и диски

Поставщик определяет логику, используемую для доступа, перемещения и изменения хранилища данных, в то время как диск указывает определенную точку входа в хранилище данных (или часть хранилища данных), относящееся к типу, определенному поставщиком. Например, поставщик реестра позволяет получить доступ к кустам и ключам в реестре, а диски HKLM и HKCU указывают соответствующие кусты в реестре. На дисках HKLM и HKCU используется поставщик реестра.

При создании поставщика можно указать диски по умолчанию, которые создаются автоматически при доступности поставщика. Вы также определите метод для создания новых дисков, использующих этот поставщик.

## <a name="type-of-providers"></a>Тип поставщиков

Существует несколько типов поставщиков, каждый из которых предоставляет разные уровни функциональности. Поставщик реализуется как класс, производный от одного из потомков класса [System. Management. Automation. сессионстатекатегори](/dotnet/api/system.management.automation.sessionstatecategory) 
 **кмдлетпровидер** . Сведения о различных типах поставщиков см. в разделе [типы поставщиков](./provider-types.md).

## <a name="provider-cmdlets"></a>Командлеты поставщика

Поставщики могут реализовывать методы, соответствующие командлетам, создавая пользовательские поведения для этих командлетов при использовании на диске для этого поставщика. В зависимости от типа поставщика доступны различные наборы командлетов. Полный список командлетов, доступных для настройки поставщиков, см. в разделе [командлеты поставщика](./provider-cmdlets.md).

## <a name="provider-paths"></a>Пути поставщика

Пользователи переходят на такие диски поставщиков, как файловые системы. По этой причине они предполагают, что синтаксис путей соответствует путям, используемым в навигации файловой системы. Когда пользователь запускает командлет поставщика, он указывает путь к элементу, к которому осуществляется доступ. Указанный путь может интерпретироваться несколькими способами. Поставщик должен поддерживать один или несколько следующих типов путей.

### <a name="drive-qualified-paths"></a>Пути с указанием диска

Путь к диску — это сочетание имени элемента, контейнера и вложенных элементов, в котором находится элемент, и диска Windows PowerShell, через который осуществляется доступ к элементу. (Диски определяются поставщиком, который используется для доступа к хранилищу данных. Этот путь начинается с имени диска, за которым следует двоеточие (:). Например: `get-childitem C:`

### <a name="provider-qualified-paths"></a>Пути, уточненные поставщиком

Чтобы разрешить обработчику Windows PowerShell инициализацию и деинициализацию поставщика, поставщик должен поддерживать путь, определенный поставщиком. Например, пользователь может инициализировать и отменить инициализацию поставщика FileSystem, так как он определяет следующий путь, определенный поставщиком: `FileSystem::\\uncshare\abc\bar` .

### <a name="provider-direct-paths"></a>Поставщик — прямые пути

Чтобы разрешить удаленный доступ к поставщику Windows PowerShell, он должен поддерживать прямой путь поставщика для передачи непосредственно поставщику Windows PowerShell для текущего расположения. Например, в реестре поставщик Windows PowerShell может использовать `\\server\regkeypath` в качестве непосредственного пути поставщика.

### <a name="provider-internal-paths"></a>Поставщик — внутренние пути

Чтобы предоставить командлету поставщика доступ к данным с помощью интерфейсов API, отличных от Windows PowerShell, поставщик Windows PowerShell должен поддерживать внутренний путь поставщика. Этот путь указывается после "::" в пути, уточненном поставщиком. Например, внутренний путь поставщика для файловой системы Windows PowerShell Provider — `\\uncshare\abc\bar` .

## <a name="overriding-cmdlet-parameters"></a>Переопределение параметров командлета

Поведение некоторых командлетов конкретного поставщика может быть переопределено поставщиком. Список параметров, которые можно переопределить, и способ их переопределения в классе поставщика см. в разделе [параметры командлета поставщика](./provider-cmdlet-parameters.md) .

## <a name="dynamic-parameters"></a>Динамические параметры

Поставщики могут определять динамические параметры, добавляемые в командлет поставщика, когда пользователь указывает определенное значение для одного из статических параметров командлета. Поставщик делает это, реализуя один или несколько методов динамических параметров. Список параметров командлета, которые можно использовать для добавления динамического параметра, и методы, используемые для их реализации, см. в разделе [динамические параметры командлета поставщика](./provider-cmdlet-dynamic-parameters.md).

## <a name="provider-capabilities"></a>Возможности поставщика

Перечисление [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) определяет ряд возможностей, поддерживаемых поставщиками. К ним относятся возможность использовать подстановочные знаки, элементы фильтра и транзакции поддержки. Чтобы указать возможности для поставщика, добавьте список значений перечисления [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) в сочетании с логической `OR` операцией в качестве свойства System. Management [. Automation. Provider. кмдлетпровидераттрибуте. провидеркапабилитиес *](/dotnet/api/System.Management.Automation.Provider.CmdletProviderAttribute.ProviderCapabilities) (второй параметр атрибута) атрибута [System. Management. Automation. Provider. кмдлетпровидераттрибуте](/dotnet/api/System.Management.Automation.Provider.CmdletProviderAttribute) для класса поставщика. Например, следующий атрибут указывает, что поставщик поддерживает возможности транзакций [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) 
 **ShouldProcess** и [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) 
  .

```csharp
[CmdletProvider(RegistryProvider.ProviderName, ProviderCapabilities.ShouldProcess | ProviderCapabilities.Transactions)]

```

## <a name="provider-cmdlet-help"></a>Справка по командлетам поставщика

При написании поставщика можно реализовать собственную справку для поддерживаемых командлетов поставщика.
Сюда входит отдельный раздел справки для каждого командлета поставщика или несколько версий раздела справки для случаев, когда командлет поставщика работает по-разному в зависимости от использования динамических параметров. Для поддержки справки, относящейся к командлету поставщика, поставщик должен реализовать интерфейс [System. Management. Automation. Provider. икмдлетпровидерсуппортшелп](/dotnet/api/System.Management.Automation.Provider.ICmdletProviderSupportsHelp) .

Обработчик Windows PowerShell вызывает метод [System. Management. Automation. Provider. икмдлетпровидерсуппортшелп. жеселпмамл *](/dotnet/api/System.Management.Automation.Provider.ICmdletProviderSupportsHelp.GetHelpMaml) для вывода раздела справки для командлетов поставщика. Подсистема предоставляет имя командлета, который пользователь указал при выполнении `Get-Help` командлета, и текущий путь пользователя.
Текущий путь необходим, если поставщик реализует разные версии одного командлета поставщика для разных дисков. Метод должен возвращать строку, содержащую XML для справки по командлету.

Содержимое файла справки записывается с помощью ПСМАМЛ XML. Это та же схема XML, которая используется для записи содержимого справки для отдельных командлетов. Добавьте содержимое для пользовательского командлета в файл справки для поставщика в `CmdletHelpPaths` элементе. В следующем примере показан `command` элемент для одного командлета поставщика, который показывает, как указать имя командлета поставщика. принтер

```xml
<CmdletHelpPaths>
  <command:command>
    <command:details>
      <command:name>ProviderCmdletName</command:name>
      <command:verb>Verb</command:verb>
      <command:noun>Noun</command:noun>
    <command:details>
  </command:command>
<CmdletHelpPath>
```

## <a name="see-also"></a>См. также:

[Функциональные возможности поставщика Windows PowerShell](./provider-types.md)

[Командлеты поставщика](./provider-cmdlets.md)

[Написание поставщика Windows PowerShell](./writing-a-windows-powershell-provider.md)
