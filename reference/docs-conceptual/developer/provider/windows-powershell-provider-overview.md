---
ms.date: 09/13/2016
ms.topic: reference
title: Общие сведения о поставщиках Windows PowerShell
description: Общие сведения о поставщиках Windows PowerShell
ms.openlocfilehash: 2f1c5f5991a64fb2b85ece7feba915164ebd34ee
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "93355516"
---
# <a name="windows-powershell-provider-overview"></a><span data-ttu-id="28bda-103">Общие сведения о поставщиках Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="28bda-103">Windows PowerShell Provider Overview</span></span>

<span data-ttu-id="28bda-104">Поставщик Windows PowerShell позволяет предоставлять любое хранилище данных как файловую систему, как если бы это был подключенный диск.</span><span class="sxs-lookup"><span data-stu-id="28bda-104">A Windows PowerShell provider allows any data store to be exposed like a file system as if it were a mounted drive.</span></span> <span data-ttu-id="28bda-105">Например, встроенный поставщик реестра позволяет перемещаться по реестру, как при переходе на `c` диск компьютера.</span><span class="sxs-lookup"><span data-stu-id="28bda-105">For example, the built-in Registry provider allows you to navigate the registry like you would navigate the `c` drive of your computer.</span></span> <span data-ttu-id="28bda-106">Поставщик может также переопределить `Item` командлеты (например,, и `Get-Item` `Set-Item` т. д.) таким образом, чтобы данные в хранилище данных можно было рассматривать как файлы и каталоги, обрабатываемые при переходе по файловой системе.</span><span class="sxs-lookup"><span data-stu-id="28bda-106">A provider can also override the `Item` cmdlets (for example, `Get-Item`, `Set-Item`, etc.) such that the data in your data store can be treated like files and directories are treated when navigating a file system.</span></span> <span data-ttu-id="28bda-107">Дополнительные сведения о поставщиках и дисках, а также встроенных поставщиках в Windows PowerShell см. в разделе [about_Providers](/powershell/module/microsoft.powershell.core/about/about_providers).</span><span class="sxs-lookup"><span data-stu-id="28bda-107">For more information about providers and drives, and the built-in providers in Windows PowerShell, see [about_Providers](/powershell/module/microsoft.powershell.core/about/about_providers).</span></span>

## <a name="providers-and-drives"></a><span data-ttu-id="28bda-108">Поставщики и диски</span><span class="sxs-lookup"><span data-stu-id="28bda-108">Providers and Drives</span></span>

<span data-ttu-id="28bda-109">Поставщик определяет логику, используемую для доступа, перемещения и изменения хранилища данных, в то время как диск указывает определенную точку входа в хранилище данных (или часть хранилища данных), относящееся к типу, определенному поставщиком.</span><span class="sxs-lookup"><span data-stu-id="28bda-109">A Provider defines the logic that is used to access, navigate, and edit a data store, while a drive specifies a specific entry point to a data store (or a portion of a data store) that is of the type defined by the provider.</span></span> <span data-ttu-id="28bda-110">Например, поставщик реестра позволяет получить доступ к кустам и ключам в реестре, а диски HKLM и HKCU указывают соответствующие кусты в реестре.</span><span class="sxs-lookup"><span data-stu-id="28bda-110">For example, the Registry provider allows you to access hives and keys in a registry, and the HKLM and HKCU drives specify the corresponding hives within the registry.</span></span> <span data-ttu-id="28bda-111">На дисках HKLM и HKCU используется поставщик реестра.</span><span class="sxs-lookup"><span data-stu-id="28bda-111">The HKLM and HKCU drives both use the Registry provider.</span></span>

<span data-ttu-id="28bda-112">При создании поставщика можно указать диски по умолчанию, которые создаются автоматически при доступности поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-112">When you write a provider, you can specify default drives-drives that are created automatically when the provider is available.</span></span> <span data-ttu-id="28bda-113">Вы также определите метод для создания новых дисков, использующих этот поставщик.</span><span class="sxs-lookup"><span data-stu-id="28bda-113">You also define a method to create new drives that use that provider.</span></span>

## <a name="type-of-providers"></a><span data-ttu-id="28bda-114">Тип поставщиков</span><span class="sxs-lookup"><span data-stu-id="28bda-114">Type of Providers</span></span>

<span data-ttu-id="28bda-115">Существует несколько типов поставщиков, каждый из которых предоставляет разные уровни функциональности.</span><span class="sxs-lookup"><span data-stu-id="28bda-115">There are several types of providers, each of which provides a different level of functionality.</span></span> <span data-ttu-id="28bda-116">Поставщик реализуется как класс, производный от одного из потомков класса [System. Management. Automation. сессионстатекатегори](/dotnet/api/system.management.automation.sessionstatecategory) 
 **кмдлетпровидер** .</span><span class="sxs-lookup"><span data-stu-id="28bda-116">A provider is implemented as a class that derives from one of the descendants of the [System.Management.Automation.SessionStateCategory](/dotnet/api/system.management.automation.sessionstatecategory)
**CmdletProvider** class.</span></span> <span data-ttu-id="28bda-117">Сведения о различных типах поставщиков см. в разделе [типы поставщиков](./provider-types.md).</span><span class="sxs-lookup"><span data-stu-id="28bda-117">For information about the different types of providers, see [Provider types](./provider-types.md).</span></span>

## <a name="provider-cmdlets"></a><span data-ttu-id="28bda-118">Командлеты поставщика</span><span class="sxs-lookup"><span data-stu-id="28bda-118">Provider cmdlets</span></span>

<span data-ttu-id="28bda-119">Поставщики могут реализовывать методы, соответствующие командлетам, создавая пользовательские поведения для этих командлетов при использовании на диске для этого поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-119">Providers can implement methods that correspond to cmdlets, creating custom behaviors for those cmdlets when used in a drive for that provider.</span></span> <span data-ttu-id="28bda-120">В зависимости от типа поставщика доступны различные наборы командлетов.</span><span class="sxs-lookup"><span data-stu-id="28bda-120">Depending on the type of provider, different sets of cmdlets are available.</span></span> <span data-ttu-id="28bda-121">Полный список командлетов, доступных для настройки поставщиков, см. в разделе [командлеты поставщика](./provider-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="28bda-121">For a complete list of the cmdlets available for customization in providers, see [Provider cmdlets](./provider-cmdlets.md).</span></span>

## <a name="provider-paths"></a><span data-ttu-id="28bda-122">Пути поставщика</span><span class="sxs-lookup"><span data-stu-id="28bda-122">Provider paths</span></span>

<span data-ttu-id="28bda-123">Пользователи переходят на такие диски поставщиков, как файловые системы.</span><span class="sxs-lookup"><span data-stu-id="28bda-123">Users navigate provider drives like file systems.</span></span> <span data-ttu-id="28bda-124">По этой причине они предполагают, что синтаксис путей соответствует путям, используемым в навигации файловой системы.</span><span class="sxs-lookup"><span data-stu-id="28bda-124">Because of this, they expect the syntax of paths to correspond to the paths used in file system navigation.</span></span> <span data-ttu-id="28bda-125">Когда пользователь запускает командлет поставщика, он указывает путь к элементу, к которому осуществляется доступ.</span><span class="sxs-lookup"><span data-stu-id="28bda-125">When a user runs a provider cmdlet, they specify a path to the item to be accessed.</span></span> <span data-ttu-id="28bda-126">Указанный путь может интерпретироваться несколькими способами.</span><span class="sxs-lookup"><span data-stu-id="28bda-126">The path that is specified can be interpreted in several ways.</span></span> <span data-ttu-id="28bda-127">Поставщик должен поддерживать один или несколько следующих типов путей.</span><span class="sxs-lookup"><span data-stu-id="28bda-127">A provider should support one or more of the following path types.</span></span>

### <a name="drive-qualified-paths"></a><span data-ttu-id="28bda-128">Пути с указанием диска</span><span class="sxs-lookup"><span data-stu-id="28bda-128">Drive-qualified paths</span></span>

<span data-ttu-id="28bda-129">Путь к диску — это сочетание имени элемента, контейнера и вложенных элементов, в котором находится элемент, и диска Windows PowerShell, через который осуществляется доступ к элементу.</span><span class="sxs-lookup"><span data-stu-id="28bda-129">A drive-qualified path is a combination of the item name, the container and subcontainers in which the item is located, and the Windows PowerShell drive through which the item is accessed.</span></span> <span data-ttu-id="28bda-130">(Диски определяются поставщиком, который используется для доступа к хранилищу данных.</span><span class="sxs-lookup"><span data-stu-id="28bda-130">(Drives are defined by the provider that is used to access the data store.</span></span> <span data-ttu-id="28bda-131">Этот путь начинается с имени диска, за которым следует двоеточие (:).</span><span class="sxs-lookup"><span data-stu-id="28bda-131">This path starts with the drive name followed by a colon (:).</span></span> <span data-ttu-id="28bda-132">Например: `get-childitem C:`</span><span class="sxs-lookup"><span data-stu-id="28bda-132">For example: `get-childitem C:`</span></span>

### <a name="provider-qualified-paths"></a><span data-ttu-id="28bda-133">Пути, уточненные поставщиком</span><span class="sxs-lookup"><span data-stu-id="28bda-133">Provider-qualified paths</span></span>

<span data-ttu-id="28bda-134">Чтобы разрешить обработчику Windows PowerShell инициализацию и деинициализацию поставщика, поставщик должен поддерживать путь, определенный поставщиком.</span><span class="sxs-lookup"><span data-stu-id="28bda-134">To allow the Windows PowerShell engine to initialize and uninitialize your provider, the provider must support a provider-qualified path.</span></span> <span data-ttu-id="28bda-135">Например, пользователь может инициализировать и отменить инициализацию поставщика FileSystem, так как он определяет следующий путь, определенный поставщиком: `FileSystem::\\uncshare\abc\bar` .</span><span class="sxs-lookup"><span data-stu-id="28bda-135">For example, the user can initialize and uninitialize the FileSystem provider because it defines the following provider-qualified path: `FileSystem::\\uncshare\abc\bar`.</span></span>

### <a name="provider-direct-paths"></a><span data-ttu-id="28bda-136">Поставщик — прямые пути</span><span class="sxs-lookup"><span data-stu-id="28bda-136">Provider-direct paths</span></span>

<span data-ttu-id="28bda-137">Чтобы разрешить удаленный доступ к поставщику Windows PowerShell, он должен поддерживать прямой путь поставщика для передачи непосредственно поставщику Windows PowerShell для текущего расположения.</span><span class="sxs-lookup"><span data-stu-id="28bda-137">To allow remote access to your Windows PowerShell provider, it should support a provider-direct path to pass directly to the Windows PowerShell provider for the current location.</span></span> <span data-ttu-id="28bda-138">Например, в реестре поставщик Windows PowerShell может использовать `\\server\regkeypath` в качестве непосредственного пути поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-138">For example, the registry Windows PowerShell provider can use `\\server\regkeypath` as a provider-direct path.</span></span>

### <a name="provider-internal-paths"></a><span data-ttu-id="28bda-139">Поставщик — внутренние пути</span><span class="sxs-lookup"><span data-stu-id="28bda-139">Provider-internal paths</span></span>

<span data-ttu-id="28bda-140">Чтобы предоставить командлету поставщика доступ к данным с помощью интерфейсов API, отличных от Windows PowerShell, поставщик Windows PowerShell должен поддерживать внутренний путь поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-140">To allow the provider cmdlet to access data using non-Windows PowerShell application programming interfaces (APIs), your Windows PowerShell provider should support a provider-internal path.</span></span> <span data-ttu-id="28bda-141">Этот путь указывается после "::" в пути, уточненном поставщиком.</span><span class="sxs-lookup"><span data-stu-id="28bda-141">This path is indicated after the "::" in the provider-qualified path.</span></span> <span data-ttu-id="28bda-142">Например, внутренний путь поставщика для файловой системы Windows PowerShell Provider — `\\uncshare\abc\bar` .</span><span class="sxs-lookup"><span data-stu-id="28bda-142">For example, the provider-internal path for the filesystem Windows PowerShell provider is `\\uncshare\abc\bar`.</span></span>

## <a name="overriding-cmdlet-parameters"></a><span data-ttu-id="28bda-143">Переопределение параметров командлета</span><span class="sxs-lookup"><span data-stu-id="28bda-143">Overriding cmdlet parameters</span></span>

<span data-ttu-id="28bda-144">Поведение некоторых командлетов конкретного поставщика может быть переопределено поставщиком.</span><span class="sxs-lookup"><span data-stu-id="28bda-144">The behavior of some provider-specific cmdlets can be overridden by a provider.</span></span> <span data-ttu-id="28bda-145">Список параметров, которые можно переопределить, и способ их переопределения в классе поставщика см. в разделе [параметры командлета поставщика](./provider-cmdlet-parameters.md) .</span><span class="sxs-lookup"><span data-stu-id="28bda-145">For a list of parameters that can be overridden, and how to override them in your provider class, see [Provider cmdlet parameters](./provider-cmdlet-parameters.md)</span></span>

## <a name="dynamic-parameters"></a><span data-ttu-id="28bda-146">Динамические параметры</span><span class="sxs-lookup"><span data-stu-id="28bda-146">Dynamic parameters</span></span>

<span data-ttu-id="28bda-147">Поставщики могут определять динамические параметры, добавляемые в командлет поставщика, когда пользователь указывает определенное значение для одного из статических параметров командлета.</span><span class="sxs-lookup"><span data-stu-id="28bda-147">Providers can define dynamic parameters that are added to a provider cmdlet when the user specifies a certain value for one of the static parameters of the cmdlet.</span></span> <span data-ttu-id="28bda-148">Поставщик делает это, реализуя один или несколько методов динамических параметров.</span><span class="sxs-lookup"><span data-stu-id="28bda-148">A provider does this by implementing one or more dynamic parameter methods.</span></span> <span data-ttu-id="28bda-149">Список параметров командлета, которые можно использовать для добавления динамического параметра, и методы, используемые для их реализации, см. в разделе [динамические параметры командлета поставщика](./provider-cmdlet-dynamic-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="28bda-149">For a list of cmdlet parameters that can be used to add dynamic parameter, and the methods used to implement them, see [Provider cmdlet dynamic parameters](./provider-cmdlet-dynamic-parameters.md).</span></span>

## <a name="provider-capabilities"></a><span data-ttu-id="28bda-150">Возможности поставщика</span><span class="sxs-lookup"><span data-stu-id="28bda-150">Provider capabilities</span></span>

<span data-ttu-id="28bda-151">Перечисление [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) определяет ряд возможностей, поддерживаемых поставщиками.</span><span class="sxs-lookup"><span data-stu-id="28bda-151">The [System.Management.Automation.Provider.Providercapabilities](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) enumeration defines a number of capabilities that providers can support.</span></span> <span data-ttu-id="28bda-152">К ним относятся возможность использовать подстановочные знаки, элементы фильтра и транзакции поддержки.</span><span class="sxs-lookup"><span data-stu-id="28bda-152">These include the ability to use wildcards, filter items, and support transactions.</span></span> <span data-ttu-id="28bda-153">Чтобы указать возможности для поставщика, добавьте список значений перечисления [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) в сочетании с логической `OR` операцией в качестве свойства System. Management [. Automation. Provider. кмдлетпровидераттрибуте. провидеркапабилитиес \*](/dotnet/api/System.Management.Automation.Provider.CmdletProviderAttribute.ProviderCapabilities) (второй параметр атрибута) атрибута [System. Management. Automation. Provider. кмдлетпровидераттрибуте](/dotnet/api/System.Management.Automation.Provider.CmdletProviderAttribute) для класса поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-153">To specify capabilities for a provider, add a list of values of the [System.Management.Automation.Provider.Providercapabilities](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) enumeration, combined with a logical `OR` operation, as the [System.Management.Automation.Provider.Cmdletproviderattribute.Providercapabilities\*](/dotnet/api/System.Management.Automation.Provider.CmdletProviderAttribute.ProviderCapabilities) property (the second parameter of the attribute) of the [System.Management.Automation.Provider.Cmdletproviderattribute](/dotnet/api/System.Management.Automation.Provider.CmdletProviderAttribute) attribute for your provider class.</span></span> <span data-ttu-id="28bda-154">Например, следующий атрибут указывает, что поставщик поддерживает возможности транзакций [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) 
 **ShouldProcess** и [System. Management. Automation. Provider. провидеркапабилитиес](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities) 
  .</span><span class="sxs-lookup"><span data-stu-id="28bda-154">For example, the following attribute specifies that the provider supports the [System.Management.Automation.Provider.Providercapabilities](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities)
**ShouldProcess** and [System.Management.Automation.Provider.ProviderCapabilities](/dotnet/api/System.Management.Automation.Provider.ProviderCapabilities)
**Transactions** capabilities.</span></span>

```csharp
[CmdletProvider(RegistryProvider.ProviderName, ProviderCapabilities.ShouldProcess | ProviderCapabilities.Transactions)]

```

## <a name="provider-cmdlet-help"></a><span data-ttu-id="28bda-155">Справка по командлетам поставщика</span><span class="sxs-lookup"><span data-stu-id="28bda-155">Provider cmdlet help</span></span>

<span data-ttu-id="28bda-156">При написании поставщика можно реализовать собственную справку для поддерживаемых командлетов поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-156">When writing a provider, you can implement your own Help for the provider cmdlets that you support.</span></span>
<span data-ttu-id="28bda-157">Сюда входит отдельный раздел справки для каждого командлета поставщика или несколько версий раздела справки для случаев, когда командлет поставщика работает по-разному в зависимости от использования динамических параметров.</span><span class="sxs-lookup"><span data-stu-id="28bda-157">This includes a single help topic for each provider cmdlet or multiple versions of a help topic for cases where the provider cmdlet acts differently based on the use of dynamic parameters.</span></span> <span data-ttu-id="28bda-158">Для поддержки справки, относящейся к командлету поставщика, поставщик должен реализовать интерфейс [System. Management. Automation. Provider. икмдлетпровидерсуппортшелп](/dotnet/api/System.Management.Automation.Provider.ICmdletProviderSupportsHelp) .</span><span class="sxs-lookup"><span data-stu-id="28bda-158">To support provider cmdlet-specific help, your provider must implement the [System.Management.Automation.Provider.Icmdletprovidersupportshelp](/dotnet/api/System.Management.Automation.Provider.ICmdletProviderSupportsHelp) interface.</span></span>

<span data-ttu-id="28bda-159">Обработчик Windows PowerShell вызывает метод [System. Management. Automation. Provider. икмдлетпровидерсуппортшелп. жеселпмамл \*](/dotnet/api/System.Management.Automation.Provider.ICmdletProviderSupportsHelp.GetHelpMaml) для вывода раздела справки для командлетов поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-159">The Windows PowerShell engine calls the [System.Management.Automation.Provider.Icmdletprovidersupportshelp.Gethelpmaml\*](/dotnet/api/System.Management.Automation.Provider.ICmdletProviderSupportsHelp.GetHelpMaml) method to display the Help topic for your provider cmdlets.</span></span> <span data-ttu-id="28bda-160">Подсистема предоставляет имя командлета, который пользователь указал при выполнении `Get-Help` командлета, и текущий путь пользователя.</span><span class="sxs-lookup"><span data-stu-id="28bda-160">The engine provides the name of the cmdlet that the user specified when running the `Get-Help` cmdlet and the current path of the user.</span></span>
<span data-ttu-id="28bda-161">Текущий путь необходим, если поставщик реализует разные версии одного командлета поставщика для разных дисков.</span><span class="sxs-lookup"><span data-stu-id="28bda-161">The current path is required if your provider implements different versions of the same provider cmdlet for different drives.</span></span> <span data-ttu-id="28bda-162">Метод должен возвращать строку, содержащую XML для справки по командлету.</span><span class="sxs-lookup"><span data-stu-id="28bda-162">The method must return a string that contains the XML for the cmdlet Help.</span></span>

<span data-ttu-id="28bda-163">Содержимое файла справки записывается с помощью ПСМАМЛ XML.</span><span class="sxs-lookup"><span data-stu-id="28bda-163">The content for the Help file is written using PSMAML XML.</span></span> <span data-ttu-id="28bda-164">Это та же схема XML, которая используется для записи содержимого справки для отдельных командлетов.</span><span class="sxs-lookup"><span data-stu-id="28bda-164">This is the same XML schema that is used for writing Help content for stand-alone cmdlets.</span></span> <span data-ttu-id="28bda-165">Добавьте содержимое для пользовательского командлета в файл справки для поставщика в `CmdletHelpPaths` элементе.</span><span class="sxs-lookup"><span data-stu-id="28bda-165">Add the content for your custom cmdlet Help to the Help file for your provider under the `CmdletHelpPaths` element.</span></span> <span data-ttu-id="28bda-166">В следующем примере показан `command` элемент для одного командлета поставщика, который показывает, как указать имя командлета поставщика.</span><span class="sxs-lookup"><span data-stu-id="28bda-166">The following example shows the `command` element for a single provider cmdlet, and it shows how you specify the name of the provider cmdlet that your provider.</span></span> <span data-ttu-id="28bda-167">принтер</span><span class="sxs-lookup"><span data-stu-id="28bda-167">supports</span></span>

```xml
<CmdletHelpPaths>
  <command:command>
    <command:details>
      <command:name>ProviderCmdletName</command:name>
      <command:verb>Verb</command:verb>
      <command:noun>Noun</command:noun>
    <command:details>
  </command:command>
<CmdletHelpPath>
```

## <a name="see-also"></a><span data-ttu-id="28bda-168">См. также:</span><span class="sxs-lookup"><span data-stu-id="28bda-168">See Also</span></span>

[<span data-ttu-id="28bda-169">Функциональные возможности поставщика Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="28bda-169">Windows PowerShell Provider Functionality</span></span>](./provider-types.md)

[<span data-ttu-id="28bda-170">Командлеты поставщика</span><span class="sxs-lookup"><span data-stu-id="28bda-170">Provider Cmdlets</span></span>](./provider-cmdlets.md)

[<span data-ttu-id="28bda-171">Написание поставщика Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="28bda-171">Writing a Windows PowerShell Provider</span></span>](./writing-a-windows-powershell-provider.md)
