---
ms.date: 09/13/2016
ms.topic: reference
title: Создание оболочки консоли
description: Создание оболочки консоли
ms.openlocfilehash: 9ea67c43b1ee35b1fbfc553b22a1423419317ca2
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "92657226"
---
# <a name="how-to-create-a-console-shell"></a><span data-ttu-id="b2d7e-103">Создание оболочки консоли</span><span class="sxs-lookup"><span data-stu-id="b2d7e-103">How to Create a Console Shell</span></span>

<span data-ttu-id="b2d7e-104">Windows PowerShell предоставляет Make-Shell средство, которое также называется "make-Kit", которое используется для создания консоли оболочки, которая не является расширяемой.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-104">Windows PowerShell provides a Make-Shell tool, also referred to as the "make-kit", that is used to create a console shell that is not extensible.</span></span> <span data-ttu-id="b2d7e-105">Оболочки, созданные с помощью этого нового средства, не могут быть расширены с помощью оснастки Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-105">Shells created with this new tool cannot be extended later through a Windows PowerShell snap-in.</span></span>

## <a name="syntax"></a><span data-ttu-id="b2d7e-106">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="b2d7e-106">Syntax</span></span>

<span data-ttu-id="b2d7e-107">Ниже приведен синтаксис, используемый для запуска Make-Shell в файле make-File.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-107">Here is the syntax used to run Make-Shell from within a make-file.</span></span>

```
make-shell
  -out n.exe
  -namespace ns
  [ -lib libdirectory1[,libdirectory2,..] ]
  [ -reference ca1.dll[,ca2.dll,...] ]
  [ -formatdata fd1.format.ps1xml[,fd2.format.ps1xml,...] ]
  [ -typedata td1.type.ps1xml[,td2.type.ps1xml,...] ]
  [ -source c1.cs [,c2.cs,...] ]
  [ -authorizationmanager authorizationManagerType ]
  [ -win32icon i.ico ]
  [ -initscript p.ps1 ]
  [ -builtinscript s1.ps1[,s2.ps1,...] ]
  [ -resource resourcefile.txt ]
  [ -cscflags cscFlags ]
  [ -? | -help ]
```

## <a name="parameters"></a><span data-ttu-id="b2d7e-108">Параметры</span><span class="sxs-lookup"><span data-stu-id="b2d7e-108">Parameters</span></span>

<span data-ttu-id="b2d7e-109">Ниже приведено краткое описание параметров make-Shell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-109">Here is a brief description of the parameters of Make-Shell.</span></span>

> [!CAUTION]
> <span data-ttu-id="b2d7e-110">Пути в формате UNC к сборкам не поддерживаются программой make-Shell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-110">UNC paths to assemblies are not supported by Make-Shell.</span></span>

|<span data-ttu-id="b2d7e-111">Параметр</span><span class="sxs-lookup"><span data-stu-id="b2d7e-111">Parameter</span></span>|<span data-ttu-id="b2d7e-112">Описание</span><span class="sxs-lookup"><span data-stu-id="b2d7e-112">Description</span></span>|
|---------------|-----------------|
|<span data-ttu-id="b2d7e-113">-out n.exe</span><span class="sxs-lookup"><span data-stu-id="b2d7e-113">-out n.exe</span></span>|<span data-ttu-id="b2d7e-114">Обязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-114">Required.</span></span> <span data-ttu-id="b2d7e-115">Имя создаваемой оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-115">The name of the shell to produce.</span></span> <span data-ttu-id="b2d7e-116">Путь указывается как часть этого параметра.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-116">The path is specified as part of this parameter.</span></span><br /><br /> <span data-ttu-id="b2d7e-117">Make-Shell добавит к этому значению ". exe", если оно не указано.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-117">Make-shell will append ".exe" to this value if it is not specified.</span></span> <span data-ttu-id="b2d7e-118">**Внимание!**  Не создавайте выходной файл с тем же именем, что и у упоминаемого DLL-файла.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-118">**Caution:**  Do not create an output file with the same name as the referenced .dll file.</span></span> <span data-ttu-id="b2d7e-119">В этом случае средство Make-Shell создает CS-файл с тем же именем, который перезапишет CS-файл с исходным кодом командлета.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-119">If you attempt this, the Make-Shell tool creates a .cs file with the same name, which will overwrite the .cs file that has your cmdlet source code.</span></span>|
|<span data-ttu-id="b2d7e-120">— пространство имен NS</span><span class="sxs-lookup"><span data-stu-id="b2d7e-120">-namespace ns</span></span>|<span data-ttu-id="b2d7e-121">Обязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-121">Required.</span></span> <span data-ttu-id="b2d7e-122">Пространство имен, используемое для производного класса [System. Management. Automation. ПространствоИмен. рунспацеконфигуратион](/dotnet/api/System.Management.Automation.Runspaces.RunspaceConfiguration) , создаваемого и компилируемого командлетом make-Kit.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-122">The namespace to use for the derived [System.Management.Automation.Runspaces.Runspaceconfiguration](/dotnet/api/System.Management.Automation.Runspaces.RunspaceConfiguration) class that the make-kit generates and compiles.</span></span>|
|<span data-ttu-id="b2d7e-123">-lib libdirectory1 [, libdirectory2,..]</span><span class="sxs-lookup"><span data-stu-id="b2d7e-123">-lib libdirectory1[,libdirectory2,..]</span></span>|<span data-ttu-id="b2d7e-124">Каталоги, в которых выполняется поиск сборок .NET, включая сборки Windows PowerShell, сборки, заданные `reference` параметром, сборки, косвенно упоминаемые в другой сборке, и сборки системы .NET.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-124">The directories that are searched for .NET assemblies, including the Windows PowerShell assemblies, assemblies specified by the `reference` parameter, assemblies indirectly referenced by another assembly, and the .NET system assemblies.</span></span>|
|<span data-ttu-id="b2d7e-125">-Reference ca1.dll [, ca2.dll,...]</span><span class="sxs-lookup"><span data-stu-id="b2d7e-125">-reference ca1.dll[,ca2.dll,...]</span></span>|<span data-ttu-id="b2d7e-126">Разделенный запятыми список сборок, включаемых в оболочку.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-126">A comma-separated list of the assemblies to include in the shell.</span></span> <span data-ttu-id="b2d7e-127">Эти сборки включают все сборки командлетов и поставщиков, а также сборки ресурсов, которые должны быть загружены.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-127">These assemblies  includes all cmdlet and provider assemblies, as well as resource assemblies that should be loaded.</span></span> <span data-ttu-id="b2d7e-128">Если этот параметр не указан, создается оболочка, которая содержит только основные командлеты и поставщики, предоставляемые Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-128">If this parameter is not specified, then a shell is produced that contains only the core cmdlets and providers provided by Windows PowerShell.</span></span><br /><br /> <span data-ttu-id="b2d7e-129">Сборки можно указать с помощью полного пути, в противном случае они будут искать по пути, указанному `lib` параметром.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-129">The assemblies can be specified using their full path, otherwise they will be searched for using the path specified by the `lib` parameter.</span></span>|
|<span data-ttu-id="b2d7e-130">-FormatData fd1.format.ps1XML [, fd2.format.ps1XML,...]</span><span class="sxs-lookup"><span data-stu-id="b2d7e-130">-formatdata fd1.format.ps1xml[,fd2.format.ps1xml,...]</span></span>|<span data-ttu-id="b2d7e-131">Разделенный запятыми список данных формата для включения в оболочку.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-131">A comma-separated list of format data to include in the shell.</span></span> <span data-ttu-id="b2d7e-132">Если этот параметр не указан, создается оболочка, содержащая только данные формата, предоставляемые Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-132">If this parameter is not specified, then a shell is produced that contains only the format data provided by Windows PowerShell.</span></span>|
|<span data-ttu-id="b2d7e-133">-TypeData td1.type.ps1XML [, td2.type.ps1XML,...]</span><span class="sxs-lookup"><span data-stu-id="b2d7e-133">-typedata td1.type.ps1xml[,td2.type.ps1xml,...]</span></span>|<span data-ttu-id="b2d7e-134">Разделенный запятыми список данных типа для включения в оболочку.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-134">A comma-separated list of type data to include in the shell.</span></span> <span data-ttu-id="b2d7e-135">Если этот параметр не указан, создается оболочка, которая содержит только данные типа, предоставленные Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-135">If this parameter is not specified, then a shell is produced that contains only the type data provided by Windows PowerShell.</span></span>|
|<span data-ttu-id="b2d7e-136">-Source c1.cs [, c2.cs,...]</span><span class="sxs-lookup"><span data-stu-id="b2d7e-136">-source c1.cs [,c2.cs,...]</span></span>|<span data-ttu-id="b2d7e-137">Имя файла, предоставленное разработчиком оболочки, которое содержит любой исходный код, необходимый для создания оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-137">The name of a file, provided by the shell developer, that contains any source code needed to build the shell.</span></span><br /><br /> <span data-ttu-id="b2d7e-138">Файл исходного кода может содержать любой из следующих исходных кодов:</span><span class="sxs-lookup"><span data-stu-id="b2d7e-138">The source code file can contain any of the following source code:</span></span><br /><br /> <span data-ttu-id="b2d7e-139">— Реализация диспетчера авторизации, переопределяющая Диспетчер авторизации по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-139">-   The Authorization manager implementation that overrides the default authorization manager.</span></span> <span data-ttu-id="b2d7e-140">(Это также можно передать в сборку.)</span><span class="sxs-lookup"><span data-stu-id="b2d7e-140">(This could also be supplied compiled into an assembly.)</span></span><br /><span data-ttu-id="b2d7e-141">— Объявления информационных атрибутов сборки: например, AssemblyCompanyAttribute, AssemblyCopyrightAttribute, AssemblyFileVersionAttribute, AssemblyInformationalVersionAttribute, AssemblyProductAttribute и AssemblyTrademarkAttribute.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-141">-   Assembly informational attribute declarations: such as the AssemblyCompanyAttribute, AssemblyCopyrightAttribute, AssemblyFileVersionAttribute, AssemblyInformationalVersionAttribute, AssemblyProductAttribute, and AssemblyTrademarkAttribute.</span></span>|
|<span data-ttu-id="b2d7e-142">-аусоризатионманажер Аусоризатионманажертипе</span><span class="sxs-lookup"><span data-stu-id="b2d7e-142">-authorizationmanager authorizationManagerType</span></span>|<span data-ttu-id="b2d7e-143">Тип, содержащий реализацию диспетчера авторизации.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-143">The type that contains the authorization manager implementation.</span></span> <span data-ttu-id="b2d7e-144">Его можно определить в исходном коде или скомпилировать в сборку (заданную `reference` параметром).</span><span class="sxs-lookup"><span data-stu-id="b2d7e-144">This can be defined in source code, or compiled into an assembly (specified by the `reference` parameter).</span></span> <span data-ttu-id="b2d7e-145">Если этот параметр не указан, используется диспетчер безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-145">If this parameter is not specified, the default security manager is used.</span></span> <span data-ttu-id="b2d7e-146">Значение должно быть полным именем типа, включая пространства имен.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-146">The value should be the full type name, including namespaces.</span></span>|
|<span data-ttu-id="b2d7e-147">-win32icon i. ico</span><span class="sxs-lookup"><span data-stu-id="b2d7e-147">-win32icon i.ico</span></span>|<span data-ttu-id="b2d7e-148">Значок exe для файла оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-148">The icon for the .exe file for the shell.</span></span> <span data-ttu-id="b2d7e-149">Если этот параметр не указан, оболочка будет иметь значок, включаемый компилятором c# (если он есть).</span><span class="sxs-lookup"><span data-stu-id="b2d7e-149">If not specified, then the shell will have the icon that the c# compiler includes (if any).</span></span>|
|<span data-ttu-id="b2d7e-150">-инитскрипт p.ps1</span><span class="sxs-lookup"><span data-stu-id="b2d7e-150">-initscript p.ps1</span></span>|<span data-ttu-id="b2d7e-151">Профиль запуска оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-151">The startup profile for the shell.</span></span> <span data-ttu-id="b2d7e-152">Файл включен "как есть"; Проверка действительности не выполняется с помощью make-Shell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-152">The file is included "as-is"; no validity checking is done by Make-Shell.</span></span>|
|<span data-ttu-id="b2d7e-153">-буилтинскрипт s1.ps1 [, s2.ps1,...]</span><span class="sxs-lookup"><span data-stu-id="b2d7e-153">-builtinscript s1.ps1[,s2.ps1,...]</span></span>|<span data-ttu-id="b2d7e-154">Список встроенных скриптов для оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-154">A list of built-in scripts for the shell.</span></span> <span data-ttu-id="b2d7e-155">Эти скрипты обнаруживаются перед сценариями в пути, и их содержимое нельзя изменить после сборки оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-155">These scripts are discovered before scripts in the path, and their contents cannot be changed once the shell is built.</span></span><br /><br /> <span data-ttu-id="b2d7e-156">Файлы включены "как есть"; Проверка действительности не выполняется с помощью make-Shell.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-156">The files are included "as-is"; no validity checking is done by Make-Shell.</span></span>|
|<span data-ttu-id="b2d7e-157">-resourcefile.txt ресурсов</span><span class="sxs-lookup"><span data-stu-id="b2d7e-157">-resource resourcefile.txt</span></span>|<span data-ttu-id="b2d7e-158">TXT файл, содержащий справку и ресурсы баннера для оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-158">The .txt file containing help and banner resources for the shell.</span></span> <span data-ttu-id="b2d7e-159">Первый ресурс называется Шеллхелп и содержит текст, отображаемый, если оболочка вызывается с `help` параметром.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-159">The first resource is named ShellHelp, and contains the text displayed if the shell is invoked with the `help` parameter.</span></span> <span data-ttu-id="b2d7e-160">Второй ресурс называется Шеллбаннер и содержит текст и сведения об авторском праве, отображаемые при запуске оболочки в интерактивном режиме.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-160">The second resource is named ShellBanner, and it contains the text and copyright information displayed when the shell is launched in interactive mode.</span></span><br /><br /> <span data-ttu-id="b2d7e-161">Если этот параметр не указан или эти ресурсы отсутствуют, используются Общая справка и баннер.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-161">If this parameter is not provided, or these resources are not present, then a generic help and banner are used.</span></span>|
|<span data-ttu-id="b2d7e-162">-кскфлагс Кскфлагс</span><span class="sxs-lookup"><span data-stu-id="b2d7e-162">-cscflags cscFlags</span></span>|<span data-ttu-id="b2d7e-163">Флаги, которые должны быть переданы компилятору C# (csc.exe).</span><span class="sxs-lookup"><span data-stu-id="b2d7e-163">Flags that should be passed to the C# compiler (csc.exe).</span></span> <span data-ttu-id="b2d7e-164">Они передаются без изменений.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-164">These are passed through unchanged.</span></span> <span data-ttu-id="b2d7e-165">Если этот параметр содержит пробелы, он должен быть заключен в двойные кавычки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-165">If this parameter includes spaces, it should be surrounded in double-quotes.</span></span>|
|<span data-ttu-id="b2d7e-166">-?</span><span class="sxs-lookup"><span data-stu-id="b2d7e-166">-?</span></span><br /><br /> <span data-ttu-id="b2d7e-167">-help</span><span class="sxs-lookup"><span data-stu-id="b2d7e-167">-help</span></span>|<span data-ttu-id="b2d7e-168">Отображает сообщение об авторских правах и Make-Shell параметры командной строки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-168">Displays the copyright message and Make-Shell command line options.</span></span>|
|<span data-ttu-id="b2d7e-169">-verbose</span><span class="sxs-lookup"><span data-stu-id="b2d7e-169">-verbose</span></span>|<span data-ttu-id="b2d7e-170">Отображает подробные сведения во время создания оболочки.</span><span class="sxs-lookup"><span data-stu-id="b2d7e-170">Displays detailed information while the shell is being created.</span></span>|

## <a name="see-also"></a><span data-ttu-id="b2d7e-171">См. также:</span><span class="sxs-lookup"><span data-stu-id="b2d7e-171">See Also</span></span>

[<span data-ttu-id="b2d7e-172">Руководство программиста по Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="b2d7e-172">Windows PowerShell Programmer's Guide</span></span>](./windows-powershell-programmer-s-guide.md)

[<span data-ttu-id="b2d7e-173">Пакет SDK для Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="b2d7e-173">Windows PowerShell SDK</span></span>](../windows-powershell-reference.md)
