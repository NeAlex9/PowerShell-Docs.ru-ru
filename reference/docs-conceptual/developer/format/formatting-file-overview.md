---
title: Общие сведения о файле форматирования | Документация Майкрософт
ms.date: 09/13/2016
ms.openlocfilehash: efdd3eed15c5f3c88636fcbe7a39f6c6cfb20ced
ms.sourcegitcommit: 0907b8c6322d2c7c61b17f8168d53452c8964b41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2020
ms.locfileid: "87773510"
---
# <a name="formatting-file-overview"></a>Общие сведения о файлах форматирования

Формат вывода объектов, возвращаемых командами (командлетами, функциями и скриптами), определяется с помощью файлов форматирования (format.ps1XML-файлов). Некоторые из этих файлов предоставляются PowerShell, чтобы определить формат представления для объектов, возвращаемых командами, предоставляемыми PowerShell, например объект [System. Diagnostics. Process](/dotnet/api/System.Diagnostics.Process) , возвращаемый `Get-Process` командлетом. Однако можно также создать собственные файлы форматирования, чтобы перезаписать форматы вывода по умолчанию, или создать файл пользовательского форматирования, чтобы определить отображение объектов, возвращаемых собственными командами.

> [!IMPORTANT]
> Файлы форматирования не определяют элементы объекта, возвращаемого в конвейер. Когда объект возвращается в конвейер, все члены этого объекта доступны, даже если некоторые из них не отображаются.

PowerShell использует данные в этих файлах форматирования для определения того, что отображается и как форматируются отображаемые данные. Отображаемые данные могут включать свойства объекта или значение скрипта. Скрипты используются, если требуется отобразить какое-либо значение, недоступное непосредственно из свойств объекта, например добавление значения двух свойств объекта и последующее отображение суммы в виде фрагмента данных. Форматирование отображаемых данных выполняется путем определения представлений для объектов, которые необходимо отобразить. Можно определить одно представление для каждого объекта, можно определить одно представление для нескольких объектов или определить несколько представлений для одного и того же объекта. Количество представлений, которые можно определить, не ограничено.

## <a name="common-features-of-formatting-files"></a>Общие возможности файлов форматирования

Каждый файл форматирования может определять следующие компоненты, которые можно совместно использовать во всех представлениях, определенных в файле:

- Параметр конфигурации по умолчанию, например, будут ли данные, отображаемые в строках таблиц, отображаться на следующей строке, если данные длиннее, чем ширина столбца. Дополнительные сведения об этих параметрах см. в разделе [Определение общих параметров конфигурации](./defining-common-configuration-features.md).

- Наборы объектов, которые могут отображаться любыми представлениями файла форматирования. Дополнительные сведения об этих наборах (называемых *наборами выбора*) см. в разделе [Определение наборов объектов](./defining-selection-sets.md).

- Стандартные элементы управления, которые могут использоваться всеми представлениями файла форматирования. Элементы управления обеспечивают более точный контроль над отображением данных. Дополнительные сведения об элементах управления см. в разделе [Определение пользовательских элементов управления](./creating-custom-controls.md).

## <a name="formatting-views"></a>Представления форматирования

Представления форматирования могут отображать объекты в табличном формате, формате списка, в расширенном формате и пользовательском формате. В большей части каждое определение форматирования описывается набором XML-тегов, описывающих представление. Каждое представление содержит имя представления, объекты, использующие представление, и элементы представления, такие как сведения о столбцах и строках для табличного представления.

Табличное представление содержит список свойств объекта или значения блока скрипта в одном или нескольких столбцах. Каждый столбец представляет отдельное свойство объекта или значение скрипта. Можно определить табличное представление, отображающее все свойства объекта, подмножество свойств объекта или сочетание свойств и значений скриптов. Каждая строка таблицы представляет возвращаемый объект. Создание табличного представления очень похоже на то, что при передаче объекта в `Format-Table` командлет. Дополнительные сведения об этом представлении см. в разделе [табличное представление](./creating-a-table-view.md).

Представление списка содержит свойства объекта или значения скрипта в одном столбце. В каждой строке списка отображается необязательная метка или имя свойства, за которым следует значение свойства или скрипта. Создание представления списка очень похоже на передача объекта в командлет по конвейеру `Format-List` . Дополнительные сведения об этом представлении см. в разделе [представление списка](./creating-a-list-view.md).

Расширенное представление содержит одно свойство объекта или значение скрипта в одном или нескольких столбцах. Для этого представления отсутствует метка или заголовок. Создание широкого представления очень похоже на передача объекта в командлет по конвейеру `Format-Wide` . Дополнительные сведения об этом представлении см. в разделе [широкие представления](./creating-a-wide-view.md).

Настраиваемое представление отображает настраиваемое представление свойств объекта или значений скриптов, не соответствующих жестким структурам табличных представлений, представлений списков или расширенных представлений. Можно определить автономное пользовательское представление или определить пользовательское представление, используемое другим представлением, например табличное представление или представление списка. Создание пользовательского представления очень похоже на передача объекта в командлет по конвейеру `Format-Custom` . Дополнительные сведения об этом представлении см. в разделе [пользовательское представление](./creating-custom-controls.md).

## <a name="components-of-a-view"></a>Компоненты представления

В следующих примерах кода XML показаны базовые XML-компоненты представления. Отдельные XML-элементы зависят от того, какое представление вы хотите создать, но основные компоненты представлений одинаковы.

Для начала каждое представление содержит `Name` элемент, указывающий понятное имя, используемое для ссылки на представление. `ViewSelectedBy`элемент, который определяет, какие объекты .NET отображаются в представлении, и элемент *управления* , определяющий представление.

```xml
<ViewDefinitions>
  <View>
    <Name>NameOfView</Name>
    <ViewSelectedBy>...</ViewSelectedBy>
    <TableControl>...</TableControl>
  </View>
  <View>
    <Name>NameOfView</Name>
    <ViewSelectedBy>...</ViewSelectedBy>
    <ListControl>...</ListControl>
  <View>
  <View>
    <Name>NameOfView</Name>
    <ViewSelectedBy>...</ViewSelectedBy>
    <WideControl>...</WideControl>
  <View>
  <View>
    <Name>NameOfView</Name>
    <ViewSelectedBy>...</ViewSelectedBy>
    <CustomControl>...</CustomControl>
  </View>
</ViewDefinitions>

```

Внутри элемента управления можно определить один или несколько элементов *записи* . При использовании нескольких определений необходимо указать, какие объекты .NET будут использовать каждое определение. Как правило, для каждого элемента управления требуется только одна запись с одним определением.

```xml
<ListControl>
  <ListEntries>
    <ListEntry>
      <EntrySelectedBy>...</EntrySelectedBy>
      <ListItems>...</ListItems>
    <ListEntry>
    <ListEntry>
        <EntrySelectedBy>...</EntrySelectedBy>
      <ListItems>...</ListItems>
    <ListEntry>
    <ListEntry>
        <EntrySelectedBy>...</EntrySelectedBy>
      <ListItems>...</ListItems>
    <ListEntry>
  </ListEntries>
</ListControl>

```

В каждом элементе Entry представления указываются *элементы,* определяющие свойства или скрипты .NET, отображаемые этим представлением.

```xml

<ListItems>
  <ListItem>...</ListItem>
  <ListItem>...</ListItem>
  <ListItem>...</ListItem>
</ListItems>

```

Как показано в предыдущих примерах, файл форматирования может содержать несколько представлений, представление может содержать несколько определений, и каждое определение может содержать несколько элементов.

## <a name="example-of-a-table-view"></a>Пример табличного представления

В следующем примере показаны XML-теги, используемые для определения табличного представления, содержащего два столбца. Элемент [виевдефинитионс](./viewdefinitions-element-format.md) является элементом-контейнером для всех представлений, определенных в файле форматирования. Элемент [View](./view-element-format.md) определяет определенную таблицу, список, широкий или настраиваемое представление. В каждом элементе [View](./view-element-format.md) элемент [Name](./name-element-for-view-format.md) задает имя представления, элемент [виевселектедби](./viewselectedby-element-format.md) определяет объекты, использующие представление, а различные управляющие элементы (такие как `TableControl` элемент, показанный в следующем примере) определяют тип представления.

```xml
<ViewDefinitions>
  <View>
    <Name>Name of View</Name>
    <ViewSelectedBy>
      <TypeName>Object to display using this view</TypeName>
      <TypeName>Object to display using this view</TypeName>
    </ViewSelectedBy>
    <TableControl>
      <TableHeaders>
        <TableColumnHeader>
          <Width></Width>
        </TableColumnHeader>
        <TableColumnHeader>
          <Width></Width>
        </TableColumnHeader>
      </TableHeaders>
      <TableRowEntries>
        <TableRowEntry>
          <TableColumnItems>
            <TableColumnItem>
              <PropertyName>Header for column 1</PropertyName>
            </TableColumnItem>
            <TableColumnItem>
              <PropertyName>Header for column 2</PropertyName>
            </TableColumnItem>
          </TableColumnItems>
        </TableRowEntry>
      </TableRowEntries>
    </TableControl)
  </View>
</ViewDefinitions>

```

## <a name="see-also"></a>См. также

[Создание представления списка](./creating-a-list-view.md)

[Создание представления таблицы](./creating-a-table-view.md)

[Создание широкого представления](./creating-a-wide-view.md)

[Создание пользовательских элементов управления](./creating-custom-controls.md)

[Создание файла форматирования и типов PowerShell](./writing-a-powershell-formatting-file.md)
