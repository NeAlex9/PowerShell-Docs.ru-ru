---
ms.date: 09/13/2016
ms.topic: reference
title: Интерпретация объектов ErrorRecord
description: Интерпретация объектов ErrorRecord
ms.openlocfilehash: 5a8556e0ba83e54dd197ed03665a119f0b565f2b
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "92666881"
---
# <a name="interpreting-errorrecord-objects"></a><span data-ttu-id="ad72f-103">Интерпретация объектов ErrorRecord</span><span class="sxs-lookup"><span data-stu-id="ad72f-103">Interpreting ErrorRecord Objects</span></span>

<span data-ttu-id="ad72f-104">В большинстве случаев объект [System. Management. Automation. ерроррекорд](/dotnet/api/System.Management.Automation.ErrorRecord) представляет устранимую ошибку, созданную командой или сценарием.</span><span class="sxs-lookup"><span data-stu-id="ad72f-104">In most cases, an [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object represents a non-terminating error generated by a command or script.</span></span> <span data-ttu-id="ad72f-105">В случае прерывания ошибок можно также указать дополнительные сведения в Ерроррекорд через интерфейс [System. Management. Automation. иконтаинсерроррекорд](/dotnet/api/System.Management.Automation.IContainsErrorRecord) .</span><span class="sxs-lookup"><span data-stu-id="ad72f-105">Terminating errors can also specify the additional information in an ErrorRecord via the [System.Management.Automation.Icontainserrorrecord](/dotnet/api/System.Management.Automation.IContainsErrorRecord) interface.</span></span>

<span data-ttu-id="ad72f-106">Если вы хотите написать обработчик ошибок в скрипте или на узле для обработки конкретных ошибок, происходящих во время выполнения команды или скрипта, необходимо интерпретировать объект [System. Management. Automation. ерроррекорд](/dotnet/api/System.Management.Automation.ErrorRecord) , чтобы определить, представляет ли он класс ошибки, которую требуется обработать.</span><span class="sxs-lookup"><span data-stu-id="ad72f-106">If you want to write an error handler in your script or a host to handle specific errors that occur during command or script execution, you must interpret the [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object to determine whether it represents the class of error that you want to handle.</span></span>

<span data-ttu-id="ad72f-107">Когда командлет обнаруживает неустранимую или устранимую ошибку, он должен создать запись об ошибке, которая описывает условие ошибки.</span><span class="sxs-lookup"><span data-stu-id="ad72f-107">When a cmdlet encounters a terminating or non-terminating error, it should create an error record that describes the error condition.</span></span> <span data-ttu-id="ad72f-108">Ведущее приложение должно исследовать эти записи об ошибках и выполнить любое действие, чтобы устранить ошибку.</span><span class="sxs-lookup"><span data-stu-id="ad72f-108">The host application must investigate these error records and perform whatever action will mitigate the error.</span></span> <span data-ttu-id="ad72f-109">Ведущее приложение также должно исследовать записи об ошибках для неустранимых ошибок, которые не удалось обработать запись, но могли продолжать работу, и должны исследовать записи об ошибках для завершения процесса, вызвавшего остановку конвейера.</span><span class="sxs-lookup"><span data-stu-id="ad72f-109">The host application must also investigate error records for nonterminating errors that failed to process a record but were able to continue, and it must investigate error records for terminating errors that caused the pipeline to stop.</span></span>

> [!NOTE]
> <span data-ttu-id="ad72f-110">Для завершения ошибок командлет вызывает метод [System. Management. Automation. командлет. ThrowTerminatingError \*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) .</span><span class="sxs-lookup"><span data-stu-id="ad72f-110">For terminating errors, the cmdlet calls the [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) method.</span></span> <span data-ttu-id="ad72f-111">Для неустранимых ошибок командлет вызывает метод [System. Management. Automation. командлет. WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) .</span><span class="sxs-lookup"><span data-stu-id="ad72f-111">For non-terminating errors, the cmdlet calls the [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) method.</span></span>

## <a name="error-record-design"></a><span data-ttu-id="ad72f-112">Структура записи ошибок</span><span class="sxs-lookup"><span data-stu-id="ad72f-112">Error Record Design</span></span>

<span data-ttu-id="ad72f-113">Записи об ошибках предназначены для предоставления дополнительных сведений об ошибках, недоступных в исключениях и гарантирующих уникальность Объединенных сведений в каждой записи об ошибке.</span><span class="sxs-lookup"><span data-stu-id="ad72f-113">Error records are designed to provide additional error information that is not available in exceptions while ensuring that the combined information in each error record is unique.</span></span> <span data-ttu-id="ad72f-114">Это уникальность позволяет ведущему приложению проверять различные части записи об ошибке, чтобы оно определяло условие ошибки и действие, которое должен выполнить узел.</span><span class="sxs-lookup"><span data-stu-id="ad72f-114">This uniqueness allows the host application to inspect the different parts of the error record so that it can identify the error condition and the action the host must take.</span></span>

## <a name="interpreting-error-records"></a><span data-ttu-id="ad72f-115">Интерпретация записей об ошибках</span><span class="sxs-lookup"><span data-stu-id="ad72f-115">Interpreting Error Records</span></span>

<span data-ttu-id="ad72f-116">Для обнаружения ошибки можно изучить несколько частей записи об ошибке.</span><span class="sxs-lookup"><span data-stu-id="ad72f-116">You can review several parts of the error record to identify the error.</span></span> <span data-ttu-id="ad72f-117">В число этих частей входят следующие.</span><span class="sxs-lookup"><span data-stu-id="ad72f-117">These parts include the following:</span></span>

- <span data-ttu-id="ad72f-118">Категория ошибки</span><span class="sxs-lookup"><span data-stu-id="ad72f-118">The error category</span></span>

- <span data-ttu-id="ad72f-119">Исключение ошибки</span><span class="sxs-lookup"><span data-stu-id="ad72f-119">The error exception</span></span>

- <span data-ttu-id="ad72f-120">Полный идентификатор ошибки (ФКИД)</span><span class="sxs-lookup"><span data-stu-id="ad72f-120">The fully qualified error identifier (FQID)</span></span>

- <span data-ttu-id="ad72f-121">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="ad72f-121">Other information</span></span>

### <a name="the-error-category"></a><span data-ttu-id="ad72f-122">Категория ошибки</span><span class="sxs-lookup"><span data-stu-id="ad72f-122">The Error Category</span></span>

<span data-ttu-id="ad72f-123">Категория ошибок записи об ошибке является одной из стандартных констант, предоставляемых перечислением [System. Management. Automation. ErrorCategory](/dotnet/api/System.Management.Automation.ErrorCategory) .</span><span class="sxs-lookup"><span data-stu-id="ad72f-123">The error category of the error record is one of the predefined constants provided by the [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) enumeration.</span></span> <span data-ttu-id="ad72f-124">Эта информация доступна через свойство [System. Management. Automation. ерроррекорд. CategoryInfo](/dotnet/api/System.Management.Automation.ErrorRecord.CategoryInfo) объекта [System. Management. Automation. ерроррекорд](/dotnet/api/System.Management.Automation.ErrorRecord) .</span><span class="sxs-lookup"><span data-stu-id="ad72f-124">This information  is available through the [System.Management.Automation.ErrorRecord.CategoryInfo](/dotnet/api/System.Management.Automation.ErrorRecord.CategoryInfo) property of the [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object.</span></span>

<span data-ttu-id="ad72f-125">Командлет может указывать категории Клосиррор, Опенеррор, Инвалидтипе, Реадеррор и WriteError, а также другие категории ошибок.</span><span class="sxs-lookup"><span data-stu-id="ad72f-125">The cmdlet can specify the CloseError, OpenError, InvalidType, ReadError, and WriteError categories, and other error categories.</span></span> <span data-ttu-id="ad72f-126">Ведущее приложение может использовать категорию ошибок для записи групп ошибок.</span><span class="sxs-lookup"><span data-stu-id="ad72f-126">The host application can use the error category to capture groups of errors.</span></span>

### <a name="the-exception"></a><span data-ttu-id="ad72f-127">Исключение</span><span class="sxs-lookup"><span data-stu-id="ad72f-127">The Exception</span></span>

<span data-ttu-id="ad72f-128">Исключение, включенное в запись ошибки, предоставляется командлетом и доступно через свойство [System. Management. Automation. ерроррекорд. Exception \*](/dotnet/api/System.Management.Automation.ErrorRecord.Exception) объекта [System. Management. Automation. ерроррекорд](/dotnet/api/System.Management.Automation.ErrorRecord) .</span><span class="sxs-lookup"><span data-stu-id="ad72f-128">The exception included in the error record is provided by the cmdlet and can be accessed through the [System.Management.Automation.ErrorRecord.Exception\*](/dotnet/api/System.Management.Automation.ErrorRecord.Exception) property of the [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object.</span></span>

<span data-ttu-id="ad72f-129">Ведущие приложения могут использовать `is` ключевое слово, чтобы указать, что исключение относится к определенному классу или производному классу.</span><span class="sxs-lookup"><span data-stu-id="ad72f-129">Host applications can use the `is` keyword to identify that the exception is of a specific class or of a derived class.</span></span> <span data-ttu-id="ad72f-130">Лучше создать ветвь для типа исключения, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="ad72f-130">It is better to branch on the exception type, as shown in the following example.</span></span>

`if (MyNonTerminatingError.Exception is AccessDeniedException)`

<span data-ttu-id="ad72f-131">Таким образом, вы перехватываете производные классы.</span><span class="sxs-lookup"><span data-stu-id="ad72f-131">This way, you catch the derived classes.</span></span> <span data-ttu-id="ad72f-132">Однако при десериализации исключения возникают проблемы.</span><span class="sxs-lookup"><span data-stu-id="ad72f-132">However, there are problems if the exception is deserialized.</span></span>

### <a name="the-fqid"></a><span data-ttu-id="ad72f-133">ФКИД</span><span class="sxs-lookup"><span data-stu-id="ad72f-133">The FQID</span></span>

<span data-ttu-id="ad72f-134">ФКИД — это наиболее специфичная информация, которую можно использовать для обнаружения ошибки.</span><span class="sxs-lookup"><span data-stu-id="ad72f-134">The FQID is the most specific information you can use to identify the error.</span></span> <span data-ttu-id="ad72f-135">Это строка, которая включает определяемый командлетом идентификатор, имя класса командлета и источник, который сообщил об ошибке.</span><span class="sxs-lookup"><span data-stu-id="ad72f-135">It is a string that includes a cmdlet-defined identifier, the name of the cmdlet class, and the source that reported the error.</span></span> <span data-ttu-id="ad72f-136">Как правило, запись об ошибке аналогична записи события в журнале событий Windows.</span><span class="sxs-lookup"><span data-stu-id="ad72f-136">In general, an error record is analogous to an event record of a Windows Event log.</span></span> <span data-ttu-id="ad72f-137">ФКИД является аналогом следующего кортежа, который определяет класс записи события: (*имя журнала*, *источник*, *идентификатор события*).</span><span class="sxs-lookup"><span data-stu-id="ad72f-137">The FQID is analogous to the following tuple, which identifies the class of the event record: (*log name*, *source*, *event ID*).</span></span>

<span data-ttu-id="ad72f-138">ФКИД предназначен для проверки в виде одной строки.</span><span class="sxs-lookup"><span data-stu-id="ad72f-138">The FQID is designed to be inspected as a single string.</span></span> <span data-ttu-id="ad72f-139">Однако существуют случаи, в которых идентификатор ошибки предназначен для анализа ведущим приложением.</span><span class="sxs-lookup"><span data-stu-id="ad72f-139">However, cases exist in which the error identifier is designed to be parsed by the host application.</span></span> <span data-ttu-id="ad72f-140">Следующий пример представляет собой полный идентификатор ошибки с правильным форматом.</span><span class="sxs-lookup"><span data-stu-id="ad72f-140">The following example is a well-formed fully qualified error identifier.</span></span>

`CommandNotFoundException,Microsoft.PowerShell.Commands.GetCommandCommand.`

<span data-ttu-id="ad72f-141">В предыдущем примере первым маркером является идентификатор ошибки, за которым следует имя класса командлета.</span><span class="sxs-lookup"><span data-stu-id="ad72f-141">In the previous example, the first token is the error identifier, which is followed by the name of the cmdlet class.</span></span> <span data-ttu-id="ad72f-142">Идентификатор ошибки может быть одним токеном или идентификатором, разделенным точкой с запятой, который позволяет ветвление при проверке идентификатора.</span><span class="sxs-lookup"><span data-stu-id="ad72f-142">The error identifier can be a single token, or it can be a dot-separated identifier that allows for branching on inspection of the identifier.</span></span> <span data-ttu-id="ad72f-143">Не используйте пробелы или знаки препинания в идентификаторе ошибки.</span><span class="sxs-lookup"><span data-stu-id="ad72f-143">Do not use white space or punctuation in the error identifier.</span></span> <span data-ttu-id="ad72f-144">Особенно важно не использовать запятую; Запятая используется Windows PowerShell для разделения идентификатора и имени класса командлета.</span><span class="sxs-lookup"><span data-stu-id="ad72f-144">It is especially important not to use a comma; a comma is used by Windows PowerShell to separate the identifier and the cmdlet class name.</span></span>

### <a name="other-information"></a><span data-ttu-id="ad72f-145">Другие сведения</span><span class="sxs-lookup"><span data-stu-id="ad72f-145">Other Information</span></span>

<span data-ttu-id="ad72f-146">Объект [System. Management. Automation. ерроррекорд](/dotnet/api/System.Management.Automation.ErrorRecord) также может предоставлять сведения, описывающие среду, в которой произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="ad72f-146">The [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object might also provide information that describes the environment in which the error occurred.</span></span> <span data-ttu-id="ad72f-147">Эти сведения включают такие элементы, как сведения об ошибке, сведения о вызовах и целевой объект, который был обработан при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="ad72f-147">This information includes items such as error details, invocation information, and the target object that was being processed when the error occurred.</span></span> <span data-ttu-id="ad72f-148">Хотя эта информация может быть полезной для ведущего приложения, она обычно не используется для обнаружения ошибки.</span><span class="sxs-lookup"><span data-stu-id="ad72f-148">Although this information might be useful to the host application, it is not typically used to identify the error.</span></span> <span data-ttu-id="ad72f-149">Эти сведения доступны в следующих свойствах:</span><span class="sxs-lookup"><span data-stu-id="ad72f-149">This information is available through the following properties:</span></span>

[<span data-ttu-id="ad72f-150">System. Management. Automation. Ерроррекорд. ErrorDetails</span><span class="sxs-lookup"><span data-stu-id="ad72f-150">System.Management.Automation.ErrorRecord.ErrorDetails</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.ErrorDetails)

[<span data-ttu-id="ad72f-151">System. Management. Automation. Ерроррекорд. Инвокатионинфо</span><span class="sxs-lookup"><span data-stu-id="ad72f-151">System.Management.Automation.ErrorRecord.InvocationInfo</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.InvocationInfo)

[<span data-ttu-id="ad72f-152">System. Management. Automation. Ерроррекорд. TargetObject</span><span class="sxs-lookup"><span data-stu-id="ad72f-152">System.Management.Automation.ErrorRecord.TargetObject</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.TargetObject)

## <a name="see-also"></a><span data-ttu-id="ad72f-153">См. также:</span><span class="sxs-lookup"><span data-stu-id="ad72f-153">See Also</span></span>

[<span data-ttu-id="ad72f-154">System. Management. Automation. Ерроррекорд</span><span class="sxs-lookup"><span data-stu-id="ad72f-154">System.Management.Automation.ErrorRecord</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord)

[<span data-ttu-id="ad72f-155">System. Management. Automation. ErrorCategory</span><span class="sxs-lookup"><span data-stu-id="ad72f-155">System.Management.Automation.Errorcategory</span></span>](/dotnet/api/System.Management.Automation.ErrorCategory)

[<span data-ttu-id="ad72f-156">System. Management. Automation. Ерроркатегоринфо</span><span class="sxs-lookup"><span data-stu-id="ad72f-156">System.Management.Automation.Errorcategoryinfo</span></span>](/dotnet/api/System.Management.Automation.ErrorCategoryInfo)

[<span data-ttu-id="ad72f-157">System. Management. Automation. командлет. WriteError</span><span class="sxs-lookup"><span data-stu-id="ad72f-157">System.Management.Automation.Cmdlet.WriteError</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.WriteError)

[<span data-ttu-id="ad72f-158">System. Management. Automation. командлет. ThrowTerminatingError \*</span><span class="sxs-lookup"><span data-stu-id="ad72f-158">System.Management.Automation.Cmdlet.Throwterminatingerror\*</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError)

[<span data-ttu-id="ad72f-159">Добавление сообщения о непрерывающей ошибке в командлет</span><span class="sxs-lookup"><span data-stu-id="ad72f-159">Adding Non-Terminating Error Reporting to Your Cmdlet</span></span>](./adding-non-terminating-error-reporting-to-your-cmdlet.md)

[<span data-ttu-id="ad72f-160">Отчеты об ошибках Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="ad72f-160">Windows PowerShell Error Reporting</span></span>](./error-reporting-concepts.md)

[<span data-ttu-id="ad72f-161">Запись командлета Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="ad72f-161">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
