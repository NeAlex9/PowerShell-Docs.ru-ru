---
description: Описание параметров групповая политика для PowerShell
Locale: en-US
ms.date: 03/25/2020
online version: https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_group_policy_settings?view=powershell-7.2&WT.mc_id=ps-gethelp
schema: 2.0.0
title: about_Group_Policy_Settings
ms.openlocfilehash: 5ca13d22c69213dd8bae57a0dd08587c9c2b1541
ms.sourcegitcommit: 95d41698c7a2450eeb70ef2fb6507fe7e6eff3b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2020
ms.locfileid: "99601876"
---
# <a name="about-group-policy-settings"></a>Сведения о параметрах групповая политика

## <a name="short-description"></a>Краткое описание
Описание параметров групповая политика для PowerShell

## <a name="long-description"></a>Подробное описание

В PowerShell имеются групповая политика параметры, помогающие определить единообразные значения конфигурации для компьютеров Windows в корпоративной среде.

Параметры групповая политика PowerShell находятся в следующих групповая политика путях:

```
Computer Configuration\
  Administrative Templates\
    PowerShell Core

User Configuration\
  Administrative Templates\
    PowerShell Core
```

Параметры групповой политики в пути конфигурации пользователя имеют приоритет над параметрами групповая политика в пути конфигурации компьютера.

В PowerShell 7 предусмотрены шаблоны групповой политики и скрипт установки в `$PSHOME`.

Инструменты групповой политики используют файлы административных шаблонов (с расширениями `.admx`, `.adml`) для заполнения параметров политики в пользовательском интерфейсе. Это позволяет администраторам управлять параметрами политики на основе реестра. `InstallPSCorePolicyDefinitions.ps1`Сценарий устанавливает **PowerShell Core административные шаблоны** на локальном компьютере.

```powershell
Get-ChildItem -Path $PSHOME -Filter *Core*Policy*
```

```Output
    Directory: C:\Program Files\PowerShell\7

Mode       LastWriteTime         Length Name
----       -------------         ------ ----
-a---      2/27/2020 12:38 AM     15861 InstallPSCorePolicyDefinitions.ps1
-a---      2/27/2020 12:28 AM      9675 PowerShellCoreExecutionPolicy.adml
-a---      2/27/2020 12:28 AM      6201 PowerShellCoreExecutionPolicy.admx
```

После установки шаблонов эти параметры можно изменить в редакторе групповая политика ( `gpedit.msc` ).

Существуют следующие политики.

- Конфигурация сеанса консоли — задает конечную точку конфигурации, в которой выполняется PowerShell.
- Включить ведение журнала модуля: задает свойство **LogPipelineExecutionDetails** модулей.
- "Включить регистрацию блоков сценариев PowerShell" — включает подробное ведение журнала всех скриптов PowerShell.
- "Включить выполнение сценариев" — задает политику выполнения PowerShell.
- "Включить транскрипции PowerShell" — включает запись входных и выходных данных команд PowerShell в виде текстовых расшифровок
- Задайте исходный путь по умолчанию для `Update-Help` : задает для обновляемой справки каталог, а не Интернет.

Каждый параметр групповая политика PowerShell имеет параметр ("использовать параметр политики Windows PowerShell") для использования значения из аналогичного параметра групповая политика Windows PowerShell, расположенного по следующим групповая политика путям:

```
Computer Configuration\
  Administrative Templates\
    Windows Components\
      Windows PowerShell

User Configuration\
  Administrative Templates\
    Windows Components\
      Windows PowerShell
```

> [!NOTE]
> Эти **Административные шаблоны PowerShell Core** не включают параметры для Windows PowerShell. Дополнительные сведения о получении других шаблонов и настройке групповой политики см. в статье [Создание центрального хранилища для групповая политика административные шаблоны в Windows и управление им][gpstore].

## <a name="console-session-configuration"></a>Конфигурация сеанса консоли

Параметр политики **конфигурации сеанса консоли** задает конечную точку конфигурации, в которой выполняется PowerShell. Это может быть любая конечная точка, зарегистрированная на локальном компьютере, включая конечные точки удаленного взаимодействия PowerShell по умолчанию или пользовательскую конечную точку с конкретными возможностями роли пользователя.

## <a name="turn-on-module-logging"></a>Включить ведение журнала модуля

Параметр политики **включить ведение журнала модуля** включает ведение журнала для выбранных модулей PowerShell. Этот параметр действует во всех сеансах на всех затронутых компьютерах.

Если включить этот параметр политики и указать один или несколько модулей, события выполнения конвейера для указанных модулей записываются в журнал Windows PowerShell в Просмотр событий.

Если отключить этот параметр политики, ведение журнала событий выполнения будет отключено для всех модулей PowerShell.

Если этот параметр политики не настроен, свойство **LogPipelineExecutionDetails** каждого модуля определяет, регистрируются ли события выполнения модуля. По умолчанию свойство **LogPipelineExecutionDetails** всех модулей имеет значение false.

Чтобы включить ведение журнала модуля для модуля, используйте следующий формат команды: Модуль должен быть импортирован в сеанс, и параметр действует только в текущем сеансе.

```powershell
Import-Module <Module-Name>
(Get-Module <Module-Name>).LogPipelineExecutionDetails = $true
```

Чтобы включить ведение журнала модуля для всех сеансов на определенном компьютере, добавьте предыдущие команды в профиль PowerShell "все пользователи ( `$Profile.AllUsersAllHosts` )".

Дополнительные сведения о ведении журнала модулей см. в разделе [about_Modules](about_Modules.md).

## <a name="turn-on-powershell-script-block-logging"></a>Включить ведение журнала блоков сценариев PowerShell

Параметр политики **включить ведение журнала блока сценариев PowerShell** включает ведение журнала всех входных данных сценария PowerShell в журнал событий Microsoft-Windows-PowerShell/операционный. Если этот параметр политики включен, PowerShell Core будет записывать в журнал обработку команд, блоков скриптов, функций и сценариев, которые будут вызываться в интерактивном режиме или с помощью службы автоматизации.

Если этот параметр политики отключен, регистрация ввода сценариев PowerShell отключена. Если регистрация вызова блоков сценариев включена, PowerShell также регистрирует события при запуске или остановке вызова команд, блоков сценариев, функций или сценариев. Включение регистрации вызовов ведет к созданию большого количества журналов событий.

## <a name="turn-on-script-execution"></a>Включить выполнение скрипта

Параметр политики **включить выполнение скрипта** задает политику выполнения для компьютеров и пользователей, которые определяют, какие скрипты разрешено запускать.

При включении параметра политики можно выбрать следующие параметры политики.

- **Разрешение только подписанных скриптов** позволяет выполнять сценарии только в том случае, если они подписаны доверенным издателем. Этот параметр политики эквивалентен политике выполнения AllSigned.

- **Разрешить локальным сценариям и удаленно подписанным сценариям** выполнять все локальные скрипты. Сценарии, созданные из Интернета, должны быть подписаны доверенным издателем. Этот параметр политики эквивалентен политике выполнения RemoteSigned.

- **Разрешить всем сценариям** выполнять все сценарии. Этот параметр политики эквивалентен политике неограниченного выполнения.

Если этот параметр политики отключен, выполнение скриптов запрещено. Этот параметр политики эквивалентен политике ограниченного выполнения.

Если вы отключаете или не настраиваете этот параметр политики, политика выполнения, заданная для компьютера или пользователя `Set-ExecutionPolicy` командлетом, определяет, разрешено ли выполнение скриптов. По умолчанию используется значение Restricted.

Подробнее см. в разделе [about_Execution_Policies](about_Execution_Policies.md).

## <a name="turn-on-powershell-transcription"></a>Включить транскрипцию PowerShell

Параметр политики включить запись в **PowerShell** позволяет записывать входные и выходные данные команд PowerShell Core в текстовые записи. Если этот параметр политики включен, PowerShell Core включит ведение журнала регистрации для PowerShell Core и любых других приложений, использующих ядро PowerShell Core. По умолчанию PowerShell Core будет записывать выходные данные записи в каталог "Мои документы" каждого пользователя с именем файла, включающего "PowerShell_transcript", а также имя компьютера и время запуска.
Включение этой политики равнозначно вызову командлета Start-Transcript в каждом сеансе PowerShell Core.

Если вы отключаете этот параметр политики, ведение журнала для приложений на основе PowerShell по умолчанию отключено, хотя запись по-прежнему может быть включена с помощью командлета Start-Transcript.

Если вы используете параметр OutputDirectory, чтобы включить ведение журнала записи в общую папку, ограничьте доступ к этому каталогу, чтобы пользователи не могли просматривать запись других пользователей или компьютеров.

## <a name="set-the-default-source-path-for-update-help"></a>Задайте путь к источнику по умолчанию для Update-Help

В параметре **задать путь к источнику по умолчанию для параметра политика обновления — Справка** задается значение по умолчанию для параметра **SourcePath** `Update-Help` командлета.
Этот параметр запрещает пользователям использовать `Update-Help` командлет для скачивания файлов справки из Интернета.

> [!NOTE]
> Этот параметр групповая политика отображается в разделе **Конфигурация компьютера** и **Конфигурация пользователя**. Однако действует только параметр групповая политика в разделе **Конфигурация компьютера** . Параметр групповая политика в разделе **Конфигурация пользователя** игнорируется.

`Update-Help`Командлет загрузит и установит новейшие файлы справки для модулей PowerShell и установит их на компьютере. По умолчанию `Update-Help` скачивает новые файлы справки из расположения в Интернете, указанного модулем.

Однако с помощью `Save-Help` командлета можно скачать самые новые файлы справки в расположение файловой системы, например в общую сетевую папку, а затем использовать `Update-Help` командлет для получения файлов справки из расположения файловой системы и установки их на компьютер. Параметр **SourcePath** `Update-Help` командлета задает расположение файловой системы.

Указав значение по умолчанию для параметра **SourcePath** , этот групповая политика неявно добавляет параметр **SourcePath** ко всем `Update-Help` командам. Пользователи могут переопределить определенное расположение файловой системы, указанное в качестве значения по умолчанию, введя другое расположение файловой системы.
Но они не могут удалить параметр **SourcePath** из `Update-Help` команды.

Если этот параметр политики включен, можно указать значение по умолчанию для параметра **SourcePath** . Введите расположение файловой системы.

Если этот параметр политики отключен или не настроен, значение по умолчанию для параметра **SourcePath** `Update-Help` командлета отсутствует. Пользователи могут загружать справку из Интернета или из любого расположения файловой системы.

Дополнительные сведения см. в разделе [about_Updatable_Help](about_Updatable_Help.md).

## <a name="keywords"></a>Keywords

about_Group_Policies about_GroupPolicy

## <a name="see-also"></a>См. также

[RFC основной политики PowerShell](https://github.com/PowerShell/PowerShell-RFC/blob/master/4-Experimental-Accepted/RFC0041-Policy.md)

[about_Execution_Policies](about_Execution_Policies.md)

[about_Modules](about_Modules.md)

[about_Updatable_Help](about_Updatable_Help.md)

[Get-ExecutionPolicy](xref:Microsoft.PowerShell.Security.Get-ExecutionPolicy)

[Set-ExecutionPolicy](xref:Microsoft.PowerShell.Security.Set-ExecutionPolicy)

[Get-Module](xref:Microsoft.PowerShell.Core.Get-Module)

[Update-Help](xref:Microsoft.PowerShell.Core.Update-Help)

[Save-Help](xref:Microsoft.PowerShell.Core.Save-Help)

<!-- link references -->
[gpstore]: https://support.microsoft.com/help/3087759

