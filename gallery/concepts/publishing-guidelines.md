---
ms.date: 06/12/2017
contributor: JKeithB, SydneyhSmith
keywords: коллекции,powershell,командлет,psgallery
description: Руководства для издателей
title: Руководства и рекомендации для публикации коллекции PowerShell
ms.openlocfilehash: b470dbd81e79d2a6a228b8c89f85e57c03803ede
ms.sourcegitcommit: 5a004064f33acc0145ccd414535763e95f998c89
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2019
ms.locfileid: "69986498"
---
# <a name="powershellgallery-publishing-guidelines-and-best-practices"></a><span data-ttu-id="8b973-104">Руководства и рекомендации для публикации коллекции PowerShell</span><span class="sxs-lookup"><span data-stu-id="8b973-104">PowerShellGallery Publishing Guidelines and Best Practices</span></span>

<span data-ttu-id="8b973-105">Это руководство описывает рекомендуемые специалистами Майкрософт этапы, гарантирующие, что пакеты, опубликованные в коллекции PowerShell, получат широкое распространение среди пользователей и будут полезны для них. Это возможно благодаря тому, как именно коллекция PowerShell обрабатывает данные манифеста, а также получению отзывов большого количества пользователей коллекции PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-105">This topic describes recommended steps used by Microsoft teams to ensure the packages published to the PowerShell Gallery will be widely adopted and provide high value to users, based on how the PowerShell Gallery handles manifest data and on feedback from large numbers of PowerShell Gallery users.</span></span>
<span data-ttu-id="8b973-106">Пакеты, опубликованные в соответствии с рекомендациями этого руководства, с большей вероятностью будут установлены, считаясь надежными и популярными среди большого количества пользователей.</span><span class="sxs-lookup"><span data-stu-id="8b973-106">Packages that are published following these guidelines will be more likely to be installed, trusted, and attract more users.</span></span>

<span data-ttu-id="8b973-107">Ниже приведены рекомендации, которые помогут оптимизировать пакет коллекции PowerShell, описаны самые важные необязательные параметры манифеста. Кроме того здесь приведены советы по улучшению вашего кода на основе отзывов первоначальных рецензентов и [анализатора скриптов PowerShell](https://aka.ms/psscriptanalyzer), управлению версиями модуля, а также работе с документацией, тестами и примерами использования опубликованных пакетов.</span><span class="sxs-lookup"><span data-stu-id="8b973-107">Included below are guidelines for what makes a good PowerShell Gallery package, what optional Manifest settings are most important, improving your code with feedback from initial reviewers and [Powershell Script Analyzer](https://aka.ms/psscriptanalyzer), versioning your module, documentation, tests & examples for how to use what you have shared.</span></span>
<span data-ttu-id="8b973-108">Большая часть этой документации содержит рекомендации по публикации [высококачественных модулей ресурсов DSC](https://github.com/PowerShell/DscResources/blob/master/HighQualityModuleGuidelines.md).</span><span class="sxs-lookup"><span data-stu-id="8b973-108">Much of this documentation follows the guidelines for publishing [High Quality DSC Resource Modules](https://github.com/PowerShell/DscResources/blob/master/HighQualityModuleGuidelines.md).</span></span>

<span data-ttu-id="8b973-109">См. дополнительные сведения о [создании и публикации пакета в коллекции PowerShell](/powershell/gallery/how-to/publishing-packages/publishing-a-package).</span><span class="sxs-lookup"><span data-stu-id="8b973-109">For the mechanics of publishing a package to the PowerShell Gallery, see [Creating and Publishing a Package](/powershell/gallery/how-to/publishing-packages/publishing-a-package).</span></span>

<span data-ttu-id="8b973-110">Мы будем рады получить ваши отзывы об этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="8b973-110">Feedback on these guidelines is welcomed.</span></span> <span data-ttu-id="8b973-111">Чтобы оставить отзыв, перейдите на вкладку с вопросами в [репозитории документации Github](https://github.com/powershell/powershell-docs/issues).</span><span class="sxs-lookup"><span data-stu-id="8b973-111">If you do have feedback, please open issues in our [Github documentation repository](https://github.com/powershell/powershell-docs/issues).</span></span>

## <a name="best-practices-for-publishing-packages"></a><span data-ttu-id="8b973-112">Рекомендации по публикации пакетов</span><span class="sxs-lookup"><span data-stu-id="8b973-112">Best practices for publishing packages</span></span>

<span data-ttu-id="8b973-113">Ниже приведены важные рекомендации пользователей, использующих элементы коллекции PowerShell. Они перечисляются в порядке номинального приоритета.</span><span class="sxs-lookup"><span data-stu-id="8b973-113">The following best practices are what the users of PowerShell Gallery items say is important, and are listed in nominal priority order.</span></span>
<span data-ttu-id="8b973-114">Пользователи чаще скачивают и применяют пакеты, опубликованные в соответствии с этими рекомендациями.</span><span class="sxs-lookup"><span data-stu-id="8b973-114">Packages that follow these guidelines are far more likely to be downloaded and adopted by others.</span></span>

- <span data-ttu-id="8b973-115">Используйте PSScriptAnalyzer.</span><span class="sxs-lookup"><span data-stu-id="8b973-115">Use PSScriptAnalyzer</span></span>
- <span data-ttu-id="8b973-116">Добавьте документацию и примеры.</span><span class="sxs-lookup"><span data-stu-id="8b973-116">Include documentation and examples</span></span>
- <span data-ttu-id="8b973-117">Поддерживайте обратную связь с пользователями.</span><span class="sxs-lookup"><span data-stu-id="8b973-117">Be responsive to feedback</span></span>
- <span data-ttu-id="8b973-118">Предоставьте модули вместо скриптов.</span><span class="sxs-lookup"><span data-stu-id="8b973-118">Provide modules rather than scripts</span></span>
- <span data-ttu-id="8b973-119">Предоставьте ссылки на сайт проекта.</span><span class="sxs-lookup"><span data-stu-id="8b973-119">Provide links to a project site</span></span>
- <span data-ttu-id="8b973-120">Пометьте пакет с указанием совместимых PSEditions и платформ</span><span class="sxs-lookup"><span data-stu-id="8b973-120">Tag your package with the compatible PSEdition(s) and platforms</span></span>
- <span data-ttu-id="8b973-121">Добавьте проверку модулей.</span><span class="sxs-lookup"><span data-stu-id="8b973-121">Include tests with your modules</span></span>
- <span data-ttu-id="8b973-122">Включите условия лицензионного соглашения и/или предоставьте ссылку на них.</span><span class="sxs-lookup"><span data-stu-id="8b973-122">Include and/or link to license terms</span></span>
- <span data-ttu-id="8b973-123">Подписание кода</span><span class="sxs-lookup"><span data-stu-id="8b973-123">Sign your code</span></span>
- <span data-ttu-id="8b973-124">Следуйте рекомендациям [SemVer](http://semver.org/) по управлению версиями.</span><span class="sxs-lookup"><span data-stu-id="8b973-124">Follow [SemVer](http://semver.org/) guidelines for versioning</span></span>
- <span data-ttu-id="8b973-125">Используйте общие теги, как описано в коллекции тегов распространенных модулей PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-125">Use common tags, as documented in Common PowerShell Gallery tags</span></span>
- <span data-ttu-id="8b973-126">Тестируйте публикацию с помощью локального репозитория</span><span class="sxs-lookup"><span data-stu-id="8b973-126">Test publishing using a local repository</span></span>
- <span data-ttu-id="8b973-127">Публикация с помощью PowerShellGet</span><span class="sxs-lookup"><span data-stu-id="8b973-127">Use PowerShellGet to publish</span></span>

<span data-ttu-id="8b973-128">Каждая из этих рекомендаций кратко описывается в разделах ниже.</span><span class="sxs-lookup"><span data-stu-id="8b973-128">Each of these is covered briefly in the sections below.</span></span>

## <a name="use-psscriptanalyzer"></a><span data-ttu-id="8b973-129">Использование PSScriptAnalyzer</span><span class="sxs-lookup"><span data-stu-id="8b973-129">Use PSScriptAnalyzer</span></span>

<span data-ttu-id="8b973-130">[PSScriptAnalyzer](https://www.powershellgallery.com/packages/PSScriptAnalyzer) — это бесплатное средство статического анализа кода, которое можно использовать с кодом PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-130">[PSScriptAnalyzer](https://www.powershellgallery.com/packages/PSScriptAnalyzer) is a free static code analysis tool that works on PowerShell code.</span></span>
<span data-ttu-id="8b973-131">PSScriptAnalyzer определяет наиболее распространенные проблемы, возникающие в коде PowerShell, и часто предоставляет рекомендации по устранению проблемы.</span><span class="sxs-lookup"><span data-stu-id="8b973-131">PSScriptAnalyzer will identify the most common issues seen in PowerShell code, and often a recommendation for how to fix the issue.</span></span>
<span data-ttu-id="8b973-132">Это средство просто в использовании и классифицирует проблемы как ошибки (серьезные ошибки, которые необходимо устранить), предупреждения (которые необходимо изучить и устранить) и сведения (которые следует рассмотреть для получения рекомендаций).</span><span class="sxs-lookup"><span data-stu-id="8b973-132">The tool is easy to use, and categorizes the issues as Errors (severe, must be addressed), Warning (need to be reviewed & should be addressed), and Information (worth checking out for best practices).</span></span>
<span data-ttu-id="8b973-133">Все пакеты, опубликованные в коллекции PowerShell, будут сканироваться с помощью PSScriptAnalyzer. Сведения об ошибках, которые необходимо устранить, будут передаваться владельцу для устранения.</span><span class="sxs-lookup"><span data-stu-id="8b973-133">All packages published to the PowerShell Gallery will be scanned using PSScriptAnalyzer, and any errors will be reported back to the owner and must be addressed.</span></span>

<span data-ttu-id="8b973-134">Мы рекомендуем запустить `Invoke-ScriptAnalyzer` с предупреждением `-Recurse` и `-Severity`.</span><span class="sxs-lookup"><span data-stu-id="8b973-134">The best practice is to run `Invoke-ScriptAnalyzer` with `-Recurse` and `-Severity` Warning.</span></span>

<span data-ttu-id="8b973-135">Просмотрите результаты и убедитесь, что:</span><span class="sxs-lookup"><span data-stu-id="8b973-135">Review the results, and ensure that:</span></span>

- <span data-ttu-id="8b973-136">в документации исправлены или устранены все ошибки;</span><span class="sxs-lookup"><span data-stu-id="8b973-136">All Errors are corrected or addressed in your documentation</span></span>
- <span data-ttu-id="8b973-137">все предупреждения проверены и по возможности устранены.</span><span class="sxs-lookup"><span data-stu-id="8b973-137">All Warnings are reviewed, and addressed where applicable</span></span>

<span data-ttu-id="8b973-138">Мы настоятельно рекомендуем пользователям, получившим пакеты из коллекции PowerShell, запустить PSScriptAnalyzer и проверить все ошибки и предупреждения.</span><span class="sxs-lookup"><span data-stu-id="8b973-138">Users who acquire packages from the PowerShell Gallery are strongly encouraged to run PSScriptAnalyzer and evaluate all Errors and Warnings.</span></span>
<span data-ttu-id="8b973-139">Если PSScriptAnalyzer обнаруживает ошибку, это значит, что пользователи, скорее всего, будут обращаться к владельцам пакетов.</span><span class="sxs-lookup"><span data-stu-id="8b973-139">Users are very likely to contact package owners if they see that there is an error reported by PSScriptAnalyzer.</span></span>
<span data-ttu-id="8b973-140">Если есть веское основание сохранить код пакета, который помечен как ошибка, добавьте эти сведения в документацию, чтобы не отвечать на один и тот же вопрос несколько раз.</span><span class="sxs-lookup"><span data-stu-id="8b973-140">If there is a compelling reason for your package to keep code that is flagged as an error, add that information to your documentation to avoid having to answer the same question many times.</span></span>

## <a name="include-documentation-and-examples"></a><span data-ttu-id="8b973-141">Добавление документации и примеров</span><span class="sxs-lookup"><span data-stu-id="8b973-141">Include documentation and examples</span></span>

<span data-ttu-id="8b973-142">Документация и примеры — это лучший способ для пользователей воспользоваться преимуществами любого общего кода.</span><span class="sxs-lookup"><span data-stu-id="8b973-142">Documentation and examples are the best way to ensure users can take advantage of any shared code.</span></span>

<span data-ttu-id="8b973-143">Документация — это самое полезное, что следует добавить в пакеты, публикуемые в коллекции PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-143">Documentation is the most helpful thing to include in packages published to the PowerShell Gallery.</span></span>
<span data-ttu-id="8b973-144">Как правило, пользователи не обращают внимание на пакеты без документации. так как иначе им нужно просматривать код, чтобы понять, что это за пакет и как его использовать.</span><span class="sxs-lookup"><span data-stu-id="8b973-144">Users will generally bypass packages without documentation, as the alternative is to read the code to understand what the package is and how to use it.</span></span>
<span data-ttu-id="8b973-145">Доступно несколько статей о том, как добавить документацию к пакетам PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8b973-145">There are several articles available about how to provide documentation with PowerShell packages, including:</span></span>

- <span data-ttu-id="8b973-146">Рекомендации по предоставлению справки, которые находятся в статье [How to Write Cmdlet Help](https://go.microsoft.com/fwlink/?LinkID=123415) (Как писать справку для командлетов).</span><span class="sxs-lookup"><span data-stu-id="8b973-146">Guidelines for providing help are in [How to Write Cmdlet Help](https://go.microsoft.com/fwlink/?LinkID=123415)</span></span>
- <span data-ttu-id="8b973-147">Создание справки по командлетам (самый оптимальный вариант для любого скрипта, функции или командлета PowerShell).</span><span class="sxs-lookup"><span data-stu-id="8b973-147">Creating cmdlet help, which is the best approach for any PowerShell script, function, or cmdlet.</span></span>
  <span data-ttu-id="8b973-148">См. дополнительные сведения о [написании справки по командлетам](https://go.microsoft.com/fwlink/?LinkID=123415).</span><span class="sxs-lookup"><span data-stu-id="8b973-148">For information about how to create cmdlet help, start with [How to Write Cmdlet Help](https://go.microsoft.com/fwlink/?LinkID=123415).</span></span>
  <span data-ttu-id="8b973-149">Сведения о том, как добавить справку в скрипт, см. в статье [About Comment Based Help](/powershell/module/microsoft.powershell.core/about/about_comment_based_help) (Справка на основе комментариев).</span><span class="sxs-lookup"><span data-stu-id="8b973-149">To add help within a script, see [About Comment Based Help](/powershell/module/microsoft.powershell.core/about/about_comment_based_help).</span></span>
- <span data-ttu-id="8b973-150">Много модулей также содержат документацию в текстовом формате, например файлы MarkDown.</span><span class="sxs-lookup"><span data-stu-id="8b973-150">Many modules also include documentation in text format, such as MarkDown files.</span></span>
  <span data-ttu-id="8b973-151">Это может быть особенно полезно при наличии сайта проекта на Github, где интенсивно используется формат Markdown.</span><span class="sxs-lookup"><span data-stu-id="8b973-151">This can be particularly helpful when there is a project site in Github, where Markdown is a heavily used format.</span></span>
  <span data-ttu-id="8b973-152">Мы рекомендуем использовать [GitHub Flavored Markdown](https://help.github.com/categories/writing-on-github/).</span><span class="sxs-lookup"><span data-stu-id="8b973-152">The best practice is to use [Github-flavored Markdown](https://help.github.com/categories/writing-on-github/)</span></span>

<span data-ttu-id="8b973-153">На примерах пользователи смогут понять как необходимо использовать пакет.</span><span class="sxs-lookup"><span data-stu-id="8b973-153">Examples show users how the package is intended to be used.</span></span>
<span data-ttu-id="8b973-154">Многие разработчики указывают, что прежде чем изучить документацию, они просматривают примеры, чтобы понять, как использовать элемент.</span><span class="sxs-lookup"><span data-stu-id="8b973-154">Many developers will say that they look at examples before documentation to understand how to use something.</span></span>
<span data-ttu-id="8b973-155">В лучших типах примеров показаны базовые варианты использования, а также имитация реальных вариантов использования. Приведенные примеры кода хорошо комментируются.</span><span class="sxs-lookup"><span data-stu-id="8b973-155">The best type of examples show basic use, plus a simulated realistic use case, and the code is well-commented.</span></span>
<span data-ttu-id="8b973-156">Примеры для модулей, опубликованные в коллекции PowerShell, должны находиться в папке примеров в корневом элементе модуля.</span><span class="sxs-lookup"><span data-stu-id="8b973-156">Examples for modules published to the PowerShell Gallery should be in an Examples folder under the module root.</span></span>

<span data-ttu-id="8b973-157">Хороший шаблон для примеров можно найти в [модуле PSDscResource](https://www.powershellgallery.com/packages/PSDscResources) в папке Examples\RegistryResource.</span><span class="sxs-lookup"><span data-stu-id="8b973-157">A good pattern for examples can be found in the [PSDscResource module](https://www.powershellgallery.com/packages/PSDscResources) under the Examples\RegistryResource folder.</span></span>
<span data-ttu-id="8b973-158">Существует четыре примера варианта использования с кратким описанием в верхней части каждого файла, которые содержат сведения о рассматриваемых вариантах.</span><span class="sxs-lookup"><span data-stu-id="8b973-158">There are four sample use cases with a brief description at the top of each file that documents what is being demonstrated.</span></span>

## <a name="manage-dependencies"></a><span data-ttu-id="8b973-159">Управление зависимостями</span><span class="sxs-lookup"><span data-stu-id="8b973-159">Manage Dependencies</span></span>

<span data-ttu-id="8b973-160">В манифесте модуля важно указать модули, от которых зависит ваш модуль.</span><span class="sxs-lookup"><span data-stu-id="8b973-160">It is important to specify modules that your module is dependent on in the Module Manifest.</span></span>
<span data-ttu-id="8b973-161">Это позволит конечному пользователю не беспокоиться об установке правильных версий модулей, от которых зависит ваш модуль.</span><span class="sxs-lookup"><span data-stu-id="8b973-161">This allows the end user to not have to worry about installing the proper versions of modules that yours take a dependency on.</span></span>
<span data-ttu-id="8b973-162">Чтобы указать зависимые модули, следует использовать требуемое поле модуля в манифесте модуля.</span><span class="sxs-lookup"><span data-stu-id="8b973-162">To specify dependent modules you should use the required module field in the module manifest.</span></span>
<span data-ttu-id="8b973-163">При этом все указанные модули будут загружены в глобальную среду до импорта модуля (если они еще не загружены).</span><span class="sxs-lookup"><span data-stu-id="8b973-163">This will load any listed modules into the global environment prior to importing your module unless they have already been loaded.</span></span> <span data-ttu-id="8b973-164">(Например, некоторые модули уже могут быть загружены с помощью другого модуля.)</span><span class="sxs-lookup"><span data-stu-id="8b973-164">(For example, some modules may already be loaded by a different module.).</span></span>
<span data-ttu-id="8b973-165">Можно также указать конкретную версию для загрузки с помощью поля RequiredVersion, а не поля ModuleVersion.</span><span class="sxs-lookup"><span data-stu-id="8b973-165">It is also possible to specify a specific version to load using the RequiredVersion field rather than the ModuleVersion field.</span></span> <span data-ttu-id="8b973-166">При использовании поля ModuleVersion будет загружаться последняя доступная версия не ниже указанной.</span><span class="sxs-lookup"><span data-stu-id="8b973-166">When using ModuleVersion it will load the newest version available with a minimum of the version specified.</span></span>
<span data-ttu-id="8b973-167">Если не использовать поле RequiredVersion для указания конкретной версии, важно отслеживать обновления версий для требуемого модуля.</span><span class="sxs-lookup"><span data-stu-id="8b973-167">When not using the RequiredVersion field to specify a specific version it is important to monitor version updates to the required module.</span></span>
<span data-ttu-id="8b973-168">Особенно важно учитывать все критические изменения, которые могут повлиять на работу пользователей с вашим модулем.</span><span class="sxs-lookup"><span data-stu-id="8b973-168">It is especially important to be aware of any breaking changes that could effect the user experience with your module.</span></span>

```powershell
Example: RequiredModules = @(@{ModuleName="myDependentModule"; ModuleVersion="2.0"; Guid="cfc45206-1e49-459d-a8ad-5b571ef94857"})

Example: RequiredModules = @(@{ModuleName="myDependentModule"; RequiredVersion="1.5"; Guid="cfc45206-1e49-459d-a8ad-5b571ef94857"})
```

## <a name="respond-to-feedback"></a><span data-ttu-id="8b973-169">Обратная связь с пользователями</span><span class="sxs-lookup"><span data-stu-id="8b973-169">Respond to feedback</span></span>

<span data-ttu-id="8b973-170">Владельцы пакетов, должным образом отвечающие на отзывы, вносят ценный вклад в сообщество.</span><span class="sxs-lookup"><span data-stu-id="8b973-170">Package owners who respond properly to feedback are highly valued by the community.</span></span>
<span data-ttu-id="8b973-171">Очень важно реагировать на конструктивные отзывы пользователей, так как их интерес к пакету может способствовать его улучшению.</span><span class="sxs-lookup"><span data-stu-id="8b973-171">Users who provide constructive feedback are important to respond to, as they are interested enough in the package to try to help improve it.</span></span>

<span data-ttu-id="8b973-172">В коллекции PowerShell можно использовать следующие два метода обратной связи:</span><span class="sxs-lookup"><span data-stu-id="8b973-172">There are two feedback methods available in the PowerShell Gallery:</span></span>

- <span data-ttu-id="8b973-173">Связаться с владельцем: эта возможность позволяет пользователю отправить сообщение по электронной почте владельцу пакета.</span><span class="sxs-lookup"><span data-stu-id="8b973-173">Contact Owner: This allows a user to send an email to the package owner(s).</span></span> <span data-ttu-id="8b973-174">Владельцу пакета следует просматривать электронную почту, указанную для пакетов коллекции PowerShell, и реагировать на возникающие вопросы.</span><span class="sxs-lookup"><span data-stu-id="8b973-174">As an package owner, is important to monitor the email address used with the PowerShell Gallery packages, and respond to issues that are raised.</span></span> <span data-ttu-id="8b973-175">Единственный недостаток этого метода в том, что информацию видит только пользователь и владелец, поэтому владелец может отвечать на один и тот же вопрос несколько раз.</span><span class="sxs-lookup"><span data-stu-id="8b973-175">The one disadvantage to this method is that only the user and owner will ever see the communication, so the owner may have to answer the same question many times.</span></span>
- <span data-ttu-id="8b973-176">Комментарии: в нижней части страницы пакета есть поле для отправки комментария.</span><span class="sxs-lookup"><span data-stu-id="8b973-176">Comments: At the bottom of the package page is a Comment field.</span></span>
  <span data-ttu-id="8b973-177">Преимущество этой системы заключается в том, что остальные пользователи могут просматривать комментарии и ответы. Поэтому владельцу не нужно будет отвечать на один и тот же вопрос.</span><span class="sxs-lookup"><span data-stu-id="8b973-177">The advantage to this system is that other users can see the comments and responses, which reduces the number of times any single question must be answered.</span></span>
  <span data-ttu-id="8b973-178">Мы настоятельно рекомендуем владельцу пакета просматривать комментарии к каждому пакету.</span><span class="sxs-lookup"><span data-stu-id="8b973-178">As a package owner, it is strongly recommended that you Follow the comments made for each package.</span></span>
<span data-ttu-id="8b973-179">Сведения о том, как это сделать, см. в статье [Providing Feedback via Social Media or Comments](../how-to/working-with-packages/social-media-feedback.md) (Предоставление отзыва с помощью социальных сетей или комментариев).</span><span class="sxs-lookup"><span data-stu-id="8b973-179">See [Providing Feedback via Social Media or Comments](../how-to/working-with-packages/social-media-feedback.md) for details on how to do that.</span></span>

<span data-ttu-id="8b973-180">Владельцы, дающие конструктивные ответы на отзывы, высоко ценятся в сообществе.</span><span class="sxs-lookup"><span data-stu-id="8b973-180">Owners who respond to feedback constructively are appreciated by the community.</span></span>
<span data-ttu-id="8b973-181">Используйте отчеты, чтобы при необходимости запросить дополнительные сведения, предоставить возможное решение или определить, устранит ли обновление проблему.</span><span class="sxs-lookup"><span data-stu-id="8b973-181">Use the opportunity in the report to request more information if needed, provide a workaround, or identify if an update fixes a problem.</span></span>

<span data-ttu-id="8b973-182">Если в любом из этих каналов связи наблюдается неправильное поведение, воспользуйтесь функцией Report Abuse (Сообщить о нарушении) коллекции PowerShell, чтобы связаться с администраторами коллекции.</span><span class="sxs-lookup"><span data-stu-id="8b973-182">If there is inappropriate behavior observed from either of these communication channels, use the Report Abuse feature of the PowerShell Gallery to contact the Gallery Administrators.</span></span>

## <a name="modules-versus-scripts"></a><span data-ttu-id="8b973-183">Модули и скрипты</span><span class="sxs-lookup"><span data-stu-id="8b973-183">Modules Versus Scripts</span></span>

<span data-ttu-id="8b973-184">Совместное использование скрипта с другими пользователями — это отличная идея. Другие пользователи могут просматривать примеры решения проблем, которые могут возникнуть.</span><span class="sxs-lookup"><span data-stu-id="8b973-184">Sharing a script with other users is great, and provides others with examples of how to solve problems they may have.</span></span>
<span data-ttu-id="8b973-185">Проблема заключается в том, что скрипты в коллекции PowerShell — это отдельные файлы, которые не содержат документации, примеров и тестов.</span><span class="sxs-lookup"><span data-stu-id="8b973-185">The issue is that scripts in the PowerShell Gallery are single files without separate documentation, examples, and tests.</span></span>

<span data-ttu-id="8b973-186">Структура папок модулей PowerShell позволяет включать в пакет несколько папок и файлов.</span><span class="sxs-lookup"><span data-stu-id="8b973-186">PowerShell Modules have a folder structure that allows multiple folders and files to be included with the package.</span></span>
<span data-ttu-id="8b973-187">Структура модуля позволяет добавлять другие пакеты, перечисленные в списке рекомендаций: справка по командлетам, документация, примеры и тесты.</span><span class="sxs-lookup"><span data-stu-id="8b973-187">The module structure enables including the other packages we list as best practices: cmdlet help, documentation, examples, and tests.</span></span>
<span data-ttu-id="8b973-188">Существенным недостатком является то, что скрипт внутри модуля должен предоставляться и использоваться как функция.</span><span class="sxs-lookup"><span data-stu-id="8b973-188">The biggest disadvantage is that a script inside a module must be exposed and used as a function.</span></span>
<span data-ttu-id="8b973-189">Сведения о создании модуля см. в статье [Writing a Windows PowerShell Module](http://go.microsoft.com/fwlink/?LinkId=144916) (Написание модуля Windows PowerShell).</span><span class="sxs-lookup"><span data-stu-id="8b973-189">For information on how to create a module, see [Writing a Windows PowerShell Module](http://go.microsoft.com/fwlink/?LinkId=144916).</span></span>

<span data-ttu-id="8b973-190">Существуют ситуации, когда скрипт улучшает взаимодействие с пользователем, в особенности с конфигурацией DSC.</span><span class="sxs-lookup"><span data-stu-id="8b973-190">There are situations where a script provides a better experience for the user, particularly with DSC configurations.</span></span>
<span data-ttu-id="8b973-191">Мы рекомендуем опубликовать конфигурацию DSC как скрипт с сопутствующим модулем, содержащим документы, примеры и тесты.</span><span class="sxs-lookup"><span data-stu-id="8b973-191">The best practice for DSC configurations is to publish the configuration as a script with an accompanying module that contains the docs, examples, and tests.</span></span>
<span data-ttu-id="8b973-192">Скрипт указывает сопутствующий модуль, используя RequiredModules = @(имя модуля).</span><span class="sxs-lookup"><span data-stu-id="8b973-192">The script lists the accompanying module using RequiredModules = @(Name of the Module).</span></span>
<span data-ttu-id="8b973-193">Этот подход можно использовать для любого скрипта.</span><span class="sxs-lookup"><span data-stu-id="8b973-193">This approach can be used with any script.</span></span>

<span data-ttu-id="8b973-194">Автономные скрипты, реализующие эти рекомендации, полезны для пользователей.</span><span class="sxs-lookup"><span data-stu-id="8b973-194">Standalone scripts that follow the other best practices provide real value to other users.</span></span>
<span data-ttu-id="8b973-195">При публикации скрипта в коллекции PowerShell мы настоятельно рекомендуем предоставить документацию на основе комментариев и ссылку на сайт проекта.</span><span class="sxs-lookup"><span data-stu-id="8b973-195">Providing comment-based documentation and a link to a Project Site are highly recommended when publishing a script to the PowerShell Gallery.</span></span>

## <a name="provide-a-link-to-a-project-site"></a><span data-ttu-id="8b973-196">Предоставление ссылки на сайт проекта</span><span class="sxs-lookup"><span data-stu-id="8b973-196">Provide a link to a project site</span></span>

<span data-ttu-id="8b973-197">На сайте проекта издатель может напрямую взаимодействовать с пользователями пакетов коллекции PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-197">A Project Site is where a publisher can interact directly with the users of their PowerShell Gallery packages.</span></span>
<span data-ttu-id="8b973-198">Пользователи предпочитают использовать пакеты, связанные с сайтом проекта, из-за большего удобства получения информации о пакете.</span><span class="sxs-lookup"><span data-stu-id="8b973-198">Users prefer packages that provide this, as it allows them to get information about the package more easily.</span></span>
<span data-ttu-id="8b973-199">Многие пакеты в коллекции PowerShell разработаны на GitHub, другие предоставляются организациями, имеющими свои веб-сайты.</span><span class="sxs-lookup"><span data-stu-id="8b973-199">Many packages in the PowerShell Gallery are developed in GitHub, others are provided by organizations with a dedicated web presence.</span></span>
<span data-ttu-id="8b973-200">Каждый из них можно рассматривать как сайт проекта.</span><span class="sxs-lookup"><span data-stu-id="8b973-200">Each of these can be considered a project site.</span></span>

<span data-ttu-id="8b973-201">Чтобы добавить ссылку, включите ProjectURI в раздел PSData манифеста следующим образом:</span><span class="sxs-lookup"><span data-stu-id="8b973-201">Adding a link is done by including ProjectURI in the PSData section of the manifest as follows:</span></span>

        # A URL to the main website for this project.
        ProjectUri = 'https://github.com/powershell/powershell'

<span data-ttu-id="8b973-202">Если указан ProjectURI, коллекция PowerShell будет отображать ссылку на сайт проекта в левой части страницы пакета.</span><span class="sxs-lookup"><span data-stu-id="8b973-202">When a ProjectURI is provided, the PowerShell Gallery will include a link to the Project Site on the left side of the package page.</span></span>

## <a name="tag-your-package-with-the-compatible-pseditions-and-platforms"></a><span data-ttu-id="8b973-203">Пометьте пакет с указанием совместимых PSEditions и платформ</span><span class="sxs-lookup"><span data-stu-id="8b973-203">Tag your package with the compatible PSEdition(s) and platforms</span></span>

<span data-ttu-id="8b973-204">Чтобы продемонстрировать пользователям, какие пакеты хорошо взаимодействуют со средой, используйте следующие теги:</span><span class="sxs-lookup"><span data-stu-id="8b973-204">Use the following tags to demonstrate to users which packages will work well with their environment:</span></span>

- <span data-ttu-id="8b973-205">PSEdition_Desktop: пакеты, которые совместимы с Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="8b973-205">PSEdition_Desktop : Packages that are compatible with Windows PowerShell</span></span>
- <span data-ttu-id="8b973-206">PSEdition_Core: пакеты, которые совместимы с PowerShell Core</span><span class="sxs-lookup"><span data-stu-id="8b973-206">PSEdition_Core : Packages that are compatible with PowerShell Core</span></span>
- <span data-ttu-id="8b973-207">Windows: пакеты, которые совместимы с операционной системой Windows</span><span class="sxs-lookup"><span data-stu-id="8b973-207">Windows : Packages that are compatible with the Windows Operating System</span></span>
- <span data-ttu-id="8b973-208">Linux: пакеты, которые совместимы с операционной системой Linux</span><span class="sxs-lookup"><span data-stu-id="8b973-208">Linux : Packages that are compatible with Linux Operating Systems</span></span>
- <span data-ttu-id="8b973-209">MacOS: пакеты, которые совместимы с операционной системой компьютеров Mac</span><span class="sxs-lookup"><span data-stu-id="8b973-209">MacOS : Packages that are compatible with the Mac Operating System</span></span>

<span data-ttu-id="8b973-210">Отмеченный с помощью тегов пакет с совместимыми платформами будет включен в фильтры поиска в коллекции на панели результатов поиска слева.</span><span class="sxs-lookup"><span data-stu-id="8b973-210">By tagging your package with the compatible platform(s) it will be included in the Gallery search filters on the left pane of the search results.</span></span> <span data-ttu-id="8b973-211">Если вы, отмечая пакет тегами, размещаете его на сайте GitHub, вы сможете воспользоваться преимуществами [экранирования совместимости коллекции PowerShell](https://img.shields.io/powershellgallery/p/:packageName.svg) 
![compatibility shield](https://img.shields.io/powershellgallery/p/CosmosDB.svg).</span><span class="sxs-lookup"><span data-stu-id="8b973-211">If you host your package on GitHub, when you tag your package, you can also take advantage of our [PowerShell Gallery compability shields](https://img.shields.io/powershellgallery/p/:packageName.svg) 
![compatibility shield](https://img.shields.io/powershellgallery/p/CosmosDB.svg).</span></span>  

## <a name="include-tests"></a><span data-ttu-id="8b973-212">Включение тестов</span><span class="sxs-lookup"><span data-stu-id="8b973-212">Include tests</span></span>

<span data-ttu-id="8b973-213">Для пользователей очень важно включить тесты с открытым кодом, так как это дает гарантии относительно проверенных элементов. Кроме того, они смогут понять, как работает ваш код.</span><span class="sxs-lookup"><span data-stu-id="8b973-213">Including tests with open-source code is important to users, as it gives them assurance about what you validate, and provides information on how your code works.</span></span> <span data-ttu-id="8b973-214">Пользователи также могут убедиться, что они не нарушат исходную функциональность, если изменят код в соответствии с требованиями их среды.</span><span class="sxs-lookup"><span data-stu-id="8b973-214">It also allows users to ensure they do not break your original functionality if they modify your code to fit their environment.</span></span>

<span data-ttu-id="8b973-215">Мы рекомендуем написать тест, чтобы воспользоваться преимуществами тестовой платформы Pester, разработанной специально для PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-215">It is strongly recommended that tests be written to take advantage of the Pester test framework, which has been designed specifically for PowerShell.</span></span>
<span data-ttu-id="8b973-216">Pester доступен на сайте [GitHub](https://github.com/Pester/Pester), в [коллекции PowerShell](https://www.powershellgallery.com/packages/Pester/) и предоставляется в Windows 10, Windows Server 2016, WMF 5.0 и WMF 5.1.</span><span class="sxs-lookup"><span data-stu-id="8b973-216">Pester is available in [GitHub](https://github.com/Pester/Pester), the [PowerShell Gallery](https://www.powershellgallery.com/packages/Pester/), and ships in Windows 10, Windows Server 2016, WMF 5.0 and WMF 5.1.</span></span>

<span data-ttu-id="8b973-217">[Сайт проекта Pester в GitHub](https://github.com/Pester/Pester) содержит отличную документацию по написанию тестов Pester для начинающих и продвинутых пользователей.</span><span class="sxs-lookup"><span data-stu-id="8b973-217">The [Pester project site in GitHub](https://github.com/Pester/Pester) includes good documentation on writing Pester tests, from getting started to best practices.</span></span>

<span data-ttu-id="8b973-218">Целевые объекты для тестов указаны в [документации по высококачественному модулю ресурсов](https://github.com/PowerShell/DscResources/blob/master/HighQualityModuleGuidelines.md) с рекомендуемым покрытием кода модульных тестов 70 %.</span><span class="sxs-lookup"><span data-stu-id="8b973-218">The targets for test coverage are called out in the [High Quality Resource Module documentation](https://github.com/PowerShell/DscResources/blob/master/HighQualityModuleGuidelines.md), with 70% unit test code coverage recommended.</span></span>

## <a name="include-andor-link-to-license-terms"></a><span data-ttu-id="8b973-219">Включение условий лицензионного соглашения и/или предоставление ссылки на них</span><span class="sxs-lookup"><span data-stu-id="8b973-219">Include and/or link to license terms</span></span>

<span data-ttu-id="8b973-220">Для всех пакетов, опубликованных в коллекции PowerShell, необходимо указать условия лицензии, или же использование пакета должно регулироваться лицензией, представленной в приложении А к [условиям использования](https://www.powershellgallery.com/policies/Terms).</span><span class="sxs-lookup"><span data-stu-id="8b973-220">All packages published to the PowerShell Gallery must specify the license terms, or be bound by the license included in the [Terms of Use](https://www.powershellgallery.com/policies/Terms) under "Exhibit A".</span></span>
<span data-ttu-id="8b973-221">Чтобы указать другую лицензию, лучше всего предоставить на нее ссылку с помощью LicenseURI в PSData.</span><span class="sxs-lookup"><span data-stu-id="8b973-221">The best approach to specifying a different license is to provide a link to the license using the LicenseURI in PSData.</span></span>
<span data-ttu-id="8b973-222">Пример можно найти в разделе рекомендуемых полей манифеста.</span><span class="sxs-lookup"><span data-stu-id="8b973-222">You can find an example in the Recommended Manifest Fields topic.</span></span>

```powershell
PrivateData = @{
    PSData = @{

        # Tags applied to this module. These help with module discovery in online galleries.
        Tags = @('.net','acl','active-directory')

        # A URL to the license for this module.
        LicenseUri = 'http://www.apache.org/licenses/LICENSE-2.0'
```

## <a name="sign-your-code"></a><span data-ttu-id="8b973-223">Подписание кода</span><span class="sxs-lookup"><span data-stu-id="8b973-223">Sign your code</span></span>

<span data-ttu-id="8b973-224">Подписывая код, владелец пакета подтверждает свою надежность и гарантирует достоверность опубликованного кода.</span><span class="sxs-lookup"><span data-stu-id="8b973-224">Code signing provides users with the highest level of assurance for who published the package, and that the copy of the code they acquire is exactly what the publisher released.</span></span>
<span data-ttu-id="8b973-225">Общие сведения о подписании кода см. в [этой статье](http://go.microsoft.com/fwlink/?LinkId=106296).</span><span class="sxs-lookup"><span data-stu-id="8b973-225">To learn more about code signing generally, see [Introduction to Code Signing](http://go.microsoft.com/fwlink/?LinkId=106296).</span></span>
<span data-ttu-id="8b973-226">PowerShell поддерживает проверку подписи кода, используя два основных подхода:</span><span class="sxs-lookup"><span data-stu-id="8b973-226">PowerShell supports validation of code signing through two primary approaches:</span></span>

- <span data-ttu-id="8b973-227">подписание файлов скрипта;</span><span class="sxs-lookup"><span data-stu-id="8b973-227">Signing script files</span></span>
- <span data-ttu-id="8b973-228">подписание модулей каталога.</span><span class="sxs-lookup"><span data-stu-id="8b973-228">Catalog signing a module</span></span>

<span data-ttu-id="8b973-229">Подписание файлов PowerShell — это известный подход, гарантирующий, что выполняемый код создан с помощью надежного источника и не изменялся.</span><span class="sxs-lookup"><span data-stu-id="8b973-229">Signing PowerShell files is a well-established approach to ensuring that the code being executed was produced by a reliable source, and has not been modified.</span></span>
<span data-ttu-id="8b973-230">Сведения о том, как подписать файлы скрипта PowerShell, рассматриваются в [этой статье](/powershell/module/microsoft.powershell.core/about/about_signing).</span><span class="sxs-lookup"><span data-stu-id="8b973-230">Details on how to sign PowerShell script files is covered in the [About Signing](/powershell/module/microsoft.powershell.core/about/about_signing) topic.</span></span>
<span data-ttu-id="8b973-231">В целом подпись можно добавить в любой PS1-файл, который проверяет PowerShell во время загрузки скрипта.</span><span class="sxs-lookup"><span data-stu-id="8b973-231">In overview, a signature can be added to any .PS1 file that PowerShell validates when the script is loaded.</span></span>
<span data-ttu-id="8b973-232">Действия PowerShell можно ограничить с помощью командлетов [политики выполнения](/powershell/module/microsoft.powershell.core/about/about_execution_policies), чтобы обеспечить использование подписанных скриптов.</span><span class="sxs-lookup"><span data-stu-id="8b973-232">PowerShell can be constrained using the [Execution Policy](/powershell/module/microsoft.powershell.core/about/about_execution_policies) cmdlets to ensure use of signed scripts.</span></span>

<span data-ttu-id="8b973-233">Функция подписания модулей каталога была добавлена в PowerShell версии 5.1.</span><span class="sxs-lookup"><span data-stu-id="8b973-233">Catalog signing modules is a feature added to PowerShell in version 5.1.</span></span>
<span data-ttu-id="8b973-234">Сведения о подписании модулей см. в статье [Командлеты для работы с каталогами](/powershell/wmf/5.1/catalog-cmdlets).</span><span class="sxs-lookup"><span data-stu-id="8b973-234">How to sign a module is covered in the [Catalog Cmdlets](/powershell/wmf/5.1/catalog-cmdlets) topic.</span></span>
<span data-ttu-id="8b973-235">Для подписания каталога создается файл каталога, содержащий значение хэша для каждого файла модуля, после чего подписывается файл.</span><span class="sxs-lookup"><span data-stu-id="8b973-235">In overview, catalog signing is done by creating a catalog file, which contains a hash value for every file in the module, and then signing that file.</span></span>
<span data-ttu-id="8b973-236">Командлеты PowerShellGet, такие как Publish-Module, Install-Module, Save-Module и Update-Module, проверят достоверность подписи, а затем подтвердят, что значение хэша каждого пакета соответствует значениям в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8b973-236">The PowerShellGet publish-module, install-module, save-module, and update-module cmdlets will check the signature to ensure it is valid, then confirm that the hash value for each package matches what is in the catalog.</span></span>
<span data-ttu-id="8b973-237">Если в системе установлена предыдущая версия модуля, в командлете Install-Module будет показано, что заверитель подписи для новой версии совпадает с заверителем для установленной ранее.</span><span class="sxs-lookup"><span data-stu-id="8b973-237">If a previous version of the module is installed on the system, install-module will confirm that the signing authority for the new version matches what was previously installed.</span></span>
<span data-ttu-id="8b973-238">Подписание каталога работает с подписанными файлами скрипта, но не заменяет их.</span><span class="sxs-lookup"><span data-stu-id="8b973-238">Catalog signing works with, but does not replace signing script files.</span></span> <span data-ttu-id="8b973-239">PowerShell не выполняет проверку подписи каталога во время загрузки модуля.</span><span class="sxs-lookup"><span data-stu-id="8b973-239">PowerShell does not validate catalog signatures at module load time.</span></span>

## <a name="follow-semver-guidelines-for-versioning"></a><span data-ttu-id="8b973-240">Следуйте рекомендациям SemVer по управлению версиями</span><span class="sxs-lookup"><span data-stu-id="8b973-240">Follow SemVer guidelines for versioning</span></span>

<span data-ttu-id="8b973-241">[SemVer](http://semver.org/) — это общедоступное соглашение, в котором описаны принципы структурирования и изменения версий для простой интерпретации изменений.</span><span class="sxs-lookup"><span data-stu-id="8b973-241">[SemVer](http://semver.org/) is a public convention that describes how to structure and change a version to allow easy interpretation of changes.</span></span>
<span data-ttu-id="8b973-242">Версия вашего пакета должна быть включена в данные манифеста.</span><span class="sxs-lookup"><span data-stu-id="8b973-242">The version for your package must be included in the manifest data.</span></span>

- <span data-ttu-id="8b973-243">Она должна соответствовать числовым блокам с 3 сегментами, разделенными точками, как в версии 0.1.1 или 4.11.192.</span><span class="sxs-lookup"><span data-stu-id="8b973-243">The version should be structured as 3 numeric blocks separated by periods, as in 0.1.1 or 4.11.192</span></span>
- <span data-ttu-id="8b973-244">Если номер версии начинается с 0, это значит, что пакет еще не готов к использованию в рабочей среде. Версия должна начинаться с 0, только если она является единственной.</span><span class="sxs-lookup"><span data-stu-id="8b973-244">Versions starting with "0" indicate that the package is not yet production ready, and the first number should only begin with "0" if that is the only number used</span></span>
- <span data-ttu-id="8b973-245">Изменения в первом числе (1.9.9999 на 2.0.0) указывают основные и критические изменения между версиями.</span><span class="sxs-lookup"><span data-stu-id="8b973-245">Changes in the first number (1.9.9999 to 2.0.0) indicate major and breaking changes between the versions</span></span>
- <span data-ttu-id="8b973-246">Изменения во втором числе (1.2 вместо 1.1) указывают на изменения на уровне компонента, например добавление новых командлетов в модуль.</span><span class="sxs-lookup"><span data-stu-id="8b973-246">Changes to the second number (1.1 to 1.2) indicate feature-level changes, such as adding new cmdlets to a module</span></span>
- <span data-ttu-id="8b973-247">Изменения в третьем числе указывают некритические изменения, например новые параметры, обновленные примеры или новые тесты.</span><span class="sxs-lookup"><span data-stu-id="8b973-247">Changes to the third number indicate non-breaking changes, such as new parameters, updated samples, or new tests</span></span>
- <span data-ttu-id="8b973-248">При перечислении версий PowerShell отсортирует версии как строки. Поэтому версия 1.01.0 будет считаться больше версии 1.001.0.</span><span class="sxs-lookup"><span data-stu-id="8b973-248">When listing versions, PowerShell will sort the versions as strings, so 1.01.0 will be treated as greater than 1.001.0</span></span>

<span data-ttu-id="8b973-249">PowerShell была создана перед публикацией SemVer, поэтому она поддерживает большинство элементов SemVer, в частности:</span><span class="sxs-lookup"><span data-stu-id="8b973-249">PowerShell was created before SemVer was published, so it provides support for most but not all elements of SemVer, specifically:</span></span>

- <span data-ttu-id="8b973-250">Она не поддерживает предварительные строки в номерах версий.</span><span class="sxs-lookup"><span data-stu-id="8b973-250">It does not support prerelease strings in version numbers.</span></span> <span data-ttu-id="8b973-251">Это удобно, если издателю необходимо доставить предварительную версию новой основной версии после предоставления версии 1.0.0.</span><span class="sxs-lookup"><span data-stu-id="8b973-251">This is useful when a publisher wishes to deliver a preview release of a new major version after providing a version 1.0.0.</span></span> <span data-ttu-id="8b973-252">Эту функцию будет добавлено в будущих выпусках коллекции PowerShell и командлетов PowerShellGet.</span><span class="sxs-lookup"><span data-stu-id="8b973-252">This will be supported in a future release of the PowerShell Gallery and PowerShellGet cmdlets.</span></span>
- <span data-ttu-id="8b973-253">PowerShell и коллекция PowerShell позволяют использовать строки версии с 1, 2 и 4 сегментами.</span><span class="sxs-lookup"><span data-stu-id="8b973-253">PowerShell and the PowerShell Gallery allow version strings with 1, 2, and 4 segments.</span></span> <span data-ttu-id="8b973-254">Много предыдущих версий модулей не соответствовали рекомендациям, и выпуски продуктов корпорации Майкрософт включают сведения о построении блоков чисел с 4 сегментами (например, 5.1.14393.1066).</span><span class="sxs-lookup"><span data-stu-id="8b973-254">Many early modules did not follow the guidelines, and product releases from Microsoft include build information as a 4th block of numbers (for example 5.1.14393.1066).</span></span> <span data-ttu-id="8b973-255">С точки зрения управления версиями эти различия игнорируются.</span><span class="sxs-lookup"><span data-stu-id="8b973-255">From a versioning standpoint, these differences are ignored.</span></span>

## <a name="test-using-a-local-repository"></a><span data-ttu-id="8b973-256">Тестирование с помощью локального репозитория</span><span class="sxs-lookup"><span data-stu-id="8b973-256">Test using a local repository</span></span>

<span data-ttu-id="8b973-257">Коллекция PowerShell не должна быть целевой для тестирования процесса публикации.</span><span class="sxs-lookup"><span data-stu-id="8b973-257">The PowerShell Gallery is not designed to be a target for testing the publishing process.</span></span>
<span data-ttu-id="8b973-258">Лучший способ протестировать весь процесс публикации в коллекции PowerShell — настроить и использовать ваш собственный локальный репозиторий.</span><span class="sxs-lookup"><span data-stu-id="8b973-258">The best way to test out the end-to-end process of publishing to the PowerShell Gallery is to set up and use your own local repository.</span></span>
<span data-ttu-id="8b973-259">Это можно сделать несколькими способами:</span><span class="sxs-lookup"><span data-stu-id="8b973-259">This can be done in a few ways, including:</span></span>

- <span data-ttu-id="8b973-260">Настройте локальный экземпляр коллекции PowerShell с помощью [проекта закрытой коллекции PS](https://github.com/PowerShell/PSPrivateGallery) в Github.</span><span class="sxs-lookup"><span data-stu-id="8b973-260">Set up a local PowerShell Gallery instance, using the [PS Private Gallery project](https://github.com/PowerShell/PSPrivateGallery) in Github.</span></span> <span data-ttu-id="8b973-261">Предварительная версия проекта поможет вам создать управляемый экземпляр коллекции PowerShell, который можно использовать для тестов.</span><span class="sxs-lookup"><span data-stu-id="8b973-261">This preview project will help you set up an instance of the PowerShell Gallery that you can control, and use for your tests.</span></span>
- <span data-ttu-id="8b973-262">Настройте [внутренний репозиторий Nuget](https://blogs.msdn.microsoft.com/powershell/2014/05/20/setting-up-an-internal-powershellget-repository/).</span><span class="sxs-lookup"><span data-stu-id="8b973-262">Set up an [internal Nuget repository](https://blogs.msdn.microsoft.com/powershell/2014/05/20/setting-up-an-internal-powershellget-repository/).</span></span> <span data-ttu-id="8b973-263">Данный способ более трудоемкий, однако он позволит вам проверить соответствие еще ряду требований (например, проверить использование ключа API и наличие в целевом объекте зависимостей при публикации).</span><span class="sxs-lookup"><span data-stu-id="8b973-263">This will require more work to set up, but will have the advantage of validating a few more of the requirements, notably validating use of an API key, and whether or not dependencies are present in the target when you publish.</span></span>
- <span data-ttu-id="8b973-264">Настройте общую папку в качестве тестового репозитория.</span><span class="sxs-lookup"><span data-stu-id="8b973-264">Set up a file share as the test “repository”.</span></span> <span data-ttu-id="8b973-265">Сделать это несложно, однако, поскольку используется общая папка, указанные выше проверки выполняться не будут.</span><span class="sxs-lookup"><span data-stu-id="8b973-265">This is easy to set up, but since it is a file share, the validations noted above will not take place.</span></span> <span data-ttu-id="8b973-266">Одно из возможных преимуществ этого способа в том, что общая папка не проверяет (требуемый) ключ API и вы можете использовать тот же ключ, что и для публикации в коллекции PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-266">One potential advantage in this case is that the file share does not check the (required) API key, so you can use the same key you would to publish to the PowerShell Gallery.</span></span>

<span data-ttu-id="8b973-267">Прибегнув к любому описанному способу, вы сможете использовать Register-PSRepository, чтобы задать новый репозиторий, который используется в свойстве -Repository для Publish-Module.</span><span class="sxs-lookup"><span data-stu-id="8b973-267">With any of these solutions, use Register-PSRepository to define a new "repository", which you use in the -Repository property for Publish-Module.</span></span>

<span data-ttu-id="8b973-268">Еще кое-что о тестировании публикаций: публикуемые в коллекции PowerShell пакеты можно удалить только с помощью специалистов эксплуатационной команды, которые подтвердят, что удаление пакета ни на что не повлияет.</span><span class="sxs-lookup"><span data-stu-id="8b973-268">One additional point about test publishing: any package you publish to the PowerShell Gallery cannot be deleted without help from the operations team, who will confirm that nothing is dependent upon the package you wish to publish.</span></span>
<span data-ttu-id="8b973-269">Поэтому мы не поддерживаем использование коллекции PowerShell в качестве целевого объекта тестирования и обязательно свяжемся с любым издателем, который так делает.</span><span class="sxs-lookup"><span data-stu-id="8b973-269">For that reason, we do not support the PowerShell Gallery as a testing target, and will contact any publisher who does so.</span></span>

## <a name="use-powershellget-to-publish"></a><span data-ttu-id="8b973-270">Публикация с помощью PowerShellGet</span><span class="sxs-lookup"><span data-stu-id="8b973-270">Use PowerShellGet to publish</span></span>

<span data-ttu-id="8b973-271">Издателям настоятельно рекомендуется использование командлетов Publish-Module и Publish-Script при работе с коллекцией PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-271">It is strongly recommended that publishers use the Publish-Module and Publish-Script cmdlets when working with the PowerShell Gallery.</span></span>
<span data-ttu-id="8b973-272">Благодаря PowerShellGet вам не нужно запоминать важные сведения об установке из коллекции PowerShell и публикации в ней.</span><span class="sxs-lookup"><span data-stu-id="8b973-272">PowerShellGet has been created to help you avoid remembering important details about installing from and publishing to the PowerShell Gallery.</span></span>
<span data-ttu-id="8b973-273">В некоторых случаях издатели используют клиент NuGet вместо PowerShellGet или командлеты PackageManagement вместо Publish-Module.</span><span class="sxs-lookup"><span data-stu-id="8b973-273">On occasion, publishers have chosen to skip PowerShellGet and use the NuGet client, or PackageManagement cmdlets, instead of Publish-Module.</span></span>
<span data-ttu-id="8b973-274">При этом возможно упущение ряда сведений, что приводит к росту обращений в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="8b973-274">There are a number of details that are easily missed, which results in a variety of support requests.</span></span>

<span data-ttu-id="8b973-275">При наличии причин, которые делают невозможным использование Publish-Module и Publish-Script, сообщите нам об этом.</span><span class="sxs-lookup"><span data-stu-id="8b973-275">If there is a reason that you cannot use Publish-Module or Publish-Script, please let us know.</span></span>
<span data-ttu-id="8b973-276">Зарегистрируйте вопрос в репозитории GitHub PowerShellGet и укажите причины, побудившие вас выбрать NuGet или PackageManagement.</span><span class="sxs-lookup"><span data-stu-id="8b973-276">File an issue in the PowerShellGet GitHub repo, and provide the details that cause you to choose NuGet or PackageManagement.</span></span>

## <a name="recommended-workflow"></a><span data-ttu-id="8b973-277">Рекомендуемый рабочий процесс</span><span class="sxs-lookup"><span data-stu-id="8b973-277">Recommended workflow</span></span>

<span data-ttu-id="8b973-278">Самый оптимальный подход к разработке и сопровождению пакета, публикуемого в коллекции PowerShell, предполагает следующее:</span><span class="sxs-lookup"><span data-stu-id="8b973-278">The most successful approach we have found for packages published to the PowerShell Gallery is this:</span></span>

- <span data-ttu-id="8b973-279">Выполните первоначальную стадию разработки на сайте проекта с открытым кодом.</span><span class="sxs-lookup"><span data-stu-id="8b973-279">Do initial development in a an open-source project site.</span></span> <span data-ttu-id="8b973-280">Команда разработчиков PowerShell использует Github.</span><span class="sxs-lookup"><span data-stu-id="8b973-280">The PowerShell Team uses Github.</span></span>
- <span data-ttu-id="8b973-281">Используйте отзывы рецензентов и [анализатора скрипта Powershell](https://aka.ms/psscriptanalyzer), чтобы достичь стабильного состояния кода.</span><span class="sxs-lookup"><span data-stu-id="8b973-281">Use feedback from reviewers and [Powershell Script Analyzer](https://aka.ms/psscriptanalyzer) to get the code to stable state</span></span>
- <span data-ttu-id="8b973-282">Включите документацию, чтобы другие пользователи узнали, как использовать вашу работу.</span><span class="sxs-lookup"><span data-stu-id="8b973-282">Include documentation, so others know how to use your work</span></span>
- <span data-ttu-id="8b973-283">Тестирование публикации с помощью локального репозитория.</span><span class="sxs-lookup"><span data-stu-id="8b973-283">Test out the publishing action using a local repository.</span></span>
- <span data-ttu-id="8b973-284">Опубликуйте стабильную версию или альфа-версию в коллекции PowerShell. Не забудьте включить документацию и ссылку на сайт проекта.</span><span class="sxs-lookup"><span data-stu-id="8b973-284">Publish a stable or Alpha release to the PowerShell Gallery, making sure to include the documentation and link to your project site</span></span>
- <span data-ttu-id="8b973-285">Собирайте отзывы и выполняйте итерацию кода на сайте проекта, а затем публикуйте надежные обновления в коллекцию PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-285">Gather feedback and iterate on the code in your project site, then publish stable updates to the PowerShell Gallery</span></span>
- <span data-ttu-id="8b973-286">Добавляйте примеры и тесты Pester в свой проект и модуль.</span><span class="sxs-lookup"><span data-stu-id="8b973-286">Add examples and Pester tests in your project and your module</span></span>
- <span data-ttu-id="8b973-287">Определите, хотите ли вы подписать код своего пакета.</span><span class="sxs-lookup"><span data-stu-id="8b973-287">Decide if you want to code sign your package</span></span>
- <span data-ttu-id="8b973-288">Если вы считаете, что проект готов к использованию в рабочей среде, опубликуйте версию 1.0.0 в коллекцию PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b973-288">When you feel the project is ready to use in a production environment, publish a 1.0.0 version to the PowerShell Gallery</span></span>
- <span data-ttu-id="8b973-289">Продолжайте собирать отзывы и выполняйте итерацию кода на основе пользовательского входа.</span><span class="sxs-lookup"><span data-stu-id="8b973-289">Continue to gather feedback and iterate on your code based on user input</span></span>
