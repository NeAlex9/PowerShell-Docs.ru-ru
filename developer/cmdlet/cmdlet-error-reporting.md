---
title: Ошибка в командлете Reporting | Документация Майкрософт
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- error records [PowerShell], terminating
- non-terminating errors [PowerShell]
- error records [PowerShell]
- terminating errors [PowerShell]
- error records [PowerShell], non-terminating
ms.assetid: 0b014035-52ea-44cb-ab38-bbe463c5465a
caps.latest.revision: 8
ms.openlocfilehash: 7b54fc220a66a47c25b3e8cba644882d31713cb7
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2019
ms.locfileid: "56857690"
---
# <a name="cmdlet-error-reporting"></a><span data-ttu-id="7e9b8-102">Отчеты об ошибках командлета</span><span class="sxs-lookup"><span data-stu-id="7e9b8-102">Cmdlet Error Reporting</span></span>

<span data-ttu-id="7e9b8-103">Командлеты, должны отправлять ошибки по-разному в зависимости от ли ошибки прекращение выполняется ошибки или устранимые ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-103">Cmdlets should report errors differently depending on whether the errors are terminating errors or nonterminating errors.</span></span> <span data-ttu-id="7e9b8-104">Прерывающие ошибки являются ошибки, которые заставляют конвейер, чтобы немедленно прекращается или ошибки, возникающие при нет причин продолжать обработку.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-104">Terminating errors are errors that cause the pipeline to be terminated immediately, or errors that occur when there is no reason to continue processing.</span></span> <span data-ttu-id="7e9b8-105">Устранимые ошибки — эти ошибки, которые указывают на текущее условие ошибки, но командлет может продолжать обрабатывать входные объекты.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-105">Nonterminating errors are those errors that report a current error condition, but the cmdlet can continue to process input objects.</span></span> <span data-ttu-id="7e9b8-106">Устранимые ошибки проблемы обычно уведомления пользователя, но командлет продолжает обрабатывать следующего входного объекта.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-106">With nonterminating errors, the user is typically notified of the problem, but the cmdlet continues to process the next input object.</span></span>

## <a name="terminating-and-nonterminating-errors"></a><span data-ttu-id="7e9b8-107">Завершающий и устранимые ошибки</span><span class="sxs-lookup"><span data-stu-id="7e9b8-107">Terminating and Nonterminating Errors</span></span>

<span data-ttu-id="7e9b8-108">Следующие рекомендации можно использовать для определения того, является ли условие ошибки неустранимую ошибку или устранимые ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-108">The following guidelines can be used to determine if an error condition is a terminating error or a nonterminating error.</span></span>

- <span data-ttu-id="7e9b8-109">Условие ошибки не командлета успешно обрабатывал любые дополнительные входные объекты?</span><span class="sxs-lookup"><span data-stu-id="7e9b8-109">Does the error condition prevent your cmdlet from successfully processing any further input objects?</span></span> <span data-ttu-id="7e9b8-110">Если Да, это неустранимую ошибку.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-110">If so, this is a terminating error.</span></span>

- <span data-ttu-id="7e9b8-111">Условие ошибки, связанные для конкретного входного объекта или подмножество входных объектов?</span><span class="sxs-lookup"><span data-stu-id="7e9b8-111">Is the error condition related to a specific input object or a subset of input objects?</span></span> <span data-ttu-id="7e9b8-112">Если Да, это устранимые ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-112">If so, this is a nonterminating error.</span></span>

- <span data-ttu-id="7e9b8-113">Командлет принимает несколько входных объектов, например обработка может завершиться успешно с другим входным объектом?</span><span class="sxs-lookup"><span data-stu-id="7e9b8-113">Does the cmdlet accept multiple input objects, such that processing may succeed on another input object?</span></span> <span data-ttu-id="7e9b8-114">Если Да, это устранимые ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-114">If so, this is a nonterminating error.</span></span>

- <span data-ttu-id="7e9b8-115">Командлеты, которые может принимать несколько входных объектов следует выбрать что прекращение выполняется и устранимые ошибки, даже в том случае, если применяется только один входной объект конкретной ситуации.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-115">Cmdlets that can accept multiple input objects should decide between what are terminating and nonterminating errors, even when a particular situation applies to only a single input object.</span></span>

- <span data-ttu-id="7e9b8-116">Командлеты можно получать любое количество входных объектов и отправить любое число объектов успеха или ошибки до создания исключения завершающий.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-116">Cmdlets can receive any number of input objects and send any number of success or error objects before throwing a terminating exception.</span></span> <span data-ttu-id="7e9b8-117">Отсутствует связь между числом входных объектов, принятых и числа объектов успеха и ошибки отправки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-117">There is no relationship between the number of input objects received and the number of success and error objects sent.</span></span>

- <span data-ttu-id="7e9b8-118">Командлеты, которые может принимать входные данные объектов только 0-1 и создать только 0-1 выходные объекты следует рассматривать ошибки как прерывающие ошибки и создают завершающий исключения.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-118">Cmdlets that can accept only 0-1 input objects and generate only 0-1 output objects should treat errors as terminating errors and generate terminating exceptions.</span></span>

## <a name="reporting-nonterminating-errors"></a><span data-ttu-id="7e9b8-119">Устранимые ошибки</span><span class="sxs-lookup"><span data-stu-id="7e9b8-119">Reporting Nonterminating Errors</span></span>

<span data-ttu-id="7e9b8-120">Создание отчетов по устранимые ошибки всегда должна выполняться в рамках реализации командлета [System.Management.Automation.Cmdlet.Beginprocessing\*](/dotnet/api/System.Management.Automation.Cmdlet.BeginProcessing) метода [ System.Management.Automation.Cmdlet.Processrecord\*](/dotnet/api/System.Management.Automation.Cmdlet.ProcessRecord) метод, или [System.Management.Automation.Cmdlet.Endprocessing\*](/dotnet/api/System.Management.Automation.Cmdlet.EndProcessing) метод.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-120">The reporting of a nonterminating error should always be done within the cmdlet's implementation of the [System.Management.Automation.Cmdlet.Beginprocessing\*](/dotnet/api/System.Management.Automation.Cmdlet.BeginProcessing) method, the [System.Management.Automation.Cmdlet.Processrecord\*](/dotnet/api/System.Management.Automation.Cmdlet.ProcessRecord) method, or the [System.Management.Automation.Cmdlet.Endprocessing\*](/dotnet/api/System.Management.Automation.Cmdlet.EndProcessing) method.</span></span> <span data-ttu-id="7e9b8-121">Эти типы ошибок выводятся путем вызова [System.Management.Automation.Cmdlet.Writeerror\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) метода, который в свою очередь отправляет запись об ошибке в поток ошибок.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-121">These types of errors are reported by calling the [System.Management.Automation.Cmdlet.Writeerror\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) method that in turn sends an error record to the error stream.</span></span>

## <a name="reporting-terminating-errors"></a><span data-ttu-id="7e9b8-122">Reporting прерывающие ошибки</span><span class="sxs-lookup"><span data-stu-id="7e9b8-122">Reporting Terminating Errors</span></span>

<span data-ttu-id="7e9b8-123">Завершающий отображаются ошибки, исключения или вызвав [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) метод.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-123">Terminating errors are reported by throwing exceptions or by calling the [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) method.</span></span> <span data-ttu-id="7e9b8-124">Имейте в виду, что командлеты также можно перехватить и повторно сгенерировать исключения, например OutOfMemory, однако они не требуются для повторного создания исключения, как среда выполнения Windows PowerShell будет перехватывать их также.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-124">Be aware that cmdlets can also catch and re-throw exceptions such as OutOfMemory, however, they are not required to re-throw exceptions as the Windows PowerShell runtime will catch them as well.</span></span>

<span data-ttu-id="7e9b8-125">Можно также определить собственные исключения для проблемы, относящиеся к вашей ситуации или добавления дополнительных сведений для существующих исключений с помощью его запись об ошибке.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-125">You can also define your own exceptions for issues specific to your situation, or add additional information to an existing exception using its error record.</span></span>

## <a name="error-records"></a><span data-ttu-id="7e9b8-126">Записи об ошибках</span><span class="sxs-lookup"><span data-stu-id="7e9b8-126">Error Records</span></span>

<span data-ttu-id="7e9b8-127">Windows PowerShell описываются устранимые ошибки помощи [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) объектов.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-127">Windows PowerShell describes a nonterminating error condition through the use of [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) objects.</span></span> <span data-ttu-id="7e9b8-128">Каждый [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) объект предоставляет сведения о категории ошибок, необязательный целевой объект и сведения об ошибке.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-128">Each [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) object provides error category information, an optional target object, and details about the error condition.</span></span>

### <a name="error-identifiers"></a><span data-ttu-id="7e9b8-129">Ошибка идентификаторы</span><span class="sxs-lookup"><span data-stu-id="7e9b8-129">Error Identifiers</span></span>

<span data-ttu-id="7e9b8-130">Идентификатор ошибки — простая строка, обозначающий условия ошибки в данном командлете.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-130">The error identifier is a simple string that identifies the error condition within the cmdlet.</span></span> <span data-ttu-id="7e9b8-131">Windows PowerShell объединяет этот идентификатор с идентификатором командлет для создания идентификатора полное ошибки, который может использоваться позже, при фильтрации потоков ошибку или ведение журнала ошибок при ответе на определенные ошибки, или с другими действиями конкретного пользователя.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-131">Windows PowerShell combines this identifier with a cmdlet identifier to create a fully qualified error identifier that can be used later when filtering error streams or logging errors, when responding to specific errors, or with other user-specific activities.</span></span>

<span data-ttu-id="7e9b8-132">Следующие рекомендации необходимо соблюдать при указании идентификаторов ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-132">The following guidelines should be followed when specifying error identifiers.</span></span>

- <span data-ttu-id="7e9b8-133">Назначает идентификаторы отличные, высокоспециализированные, ошибка на разных путей кода.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-133">Assign different, highly specific, error identifiers to different code paths.</span></span> <span data-ttu-id="7e9b8-134">Каждый путь кода, который вызывает [System.Management.Automation.Cmdlet.Writeerror\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) или [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) должен иметь свой собственный идентификатор ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-134">Each code path that calls [System.Management.Automation.Cmdlet.Writeerror\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) or [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) should have its own error identifier.</span></span>

- <span data-ttu-id="7e9b8-135">Ошибка идентификаторы должны быть уникальными для типов исключений среды CLR для и устранимые ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-135">Error identifiers should be unique to CLR exception types for both terminating and nonterminating errors.</span></span>

- <span data-ttu-id="7e9b8-136">Не изменяет семантику идентификатора ошибка между версиями командлета или поставщика Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-136">Do not change the semantics of an error identifier between versions of your cmdlet or Windows PowerShell provider.</span></span> <span data-ttu-id="7e9b8-137">После установления семантика идентификатор ошибка, она должна оставаться неизменным на протяжении всего жизненного цикла командлета.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-137">After the semantics of an error identifier is established, it should remain constant throughout the life cycle of your cmdlet.</span></span>

- <span data-ttu-id="7e9b8-138">Для прерывающие ошибки используйте это ошибка уникальный идентификатор для определенного типа исключения среды CLR.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-138">For terminating errors, use a unique error identifier for a particular CLR exception type.</span></span> <span data-ttu-id="7e9b8-139">Если изменяется тип исключения, используйте новый идентификатор ошибки.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-139">If the exception type changes, use a new error identifier.</span></span>

- <span data-ttu-id="7e9b8-140">Устранимые ошибки используйте идентификатор конкретной ошибки для конкретного входного объекта.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-140">For nonterminating errors, use a specific error identifier for a specific input object.</span></span>

- <span data-ttu-id="7e9b8-141">Выберите текст для идентификатора, кратко соответствующий сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-141">Choose text for the identifier that tersely corresponds to the error being reported.</span></span> <span data-ttu-id="7e9b8-142">Не используйте пробелы или знаки препинания.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-142">Do not use white space or punctuation.</span></span>

- <span data-ttu-id="7e9b8-143">Не создают ошибки идентификаторы, которые не воспроизводятся.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-143">Do not generate error identifiers that are not reproducible.</span></span> <span data-ttu-id="7e9b8-144">Например не создают идентификаторы, которые включают идентификатор процесса.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-144">For example, do not generate identifiers that include a process identifier.</span></span> <span data-ttu-id="7e9b8-145">Ошибка идентификаторы полезны только в том случае, если они соответствуют идентификаторы, которые будут видны другим пользователям, у которых возникают та же проблема.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-145">Error identifiers are useful only when they correspond to identifiers that are seen by other users who are experiencing the same problem.</span></span>

### <a name="error-categories"></a><span data-ttu-id="7e9b8-146">Категории ошибок</span><span class="sxs-lookup"><span data-stu-id="7e9b8-146">Error Categories</span></span>

<span data-ttu-id="7e9b8-147">Категории ошибок используются для группировки ошибок для конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-147">Error categories are used to group errors for the end-user.</span></span> <span data-ttu-id="7e9b8-148">Windows PowerShell определяет эти категории и командлеты и поставщики Windows PowerShell необходимо выбрать между ними при создании запись об ошибке.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-148">Windows PowerShell defines these categories and cmdlets and Windows PowerShell providers must choose between them when generating the error record.</span></span>

<span data-ttu-id="7e9b8-149">Описание категории ошибок, которые доступны, см. в разделе [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) перечисления.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-149">For a description of the error categories that are available, see the [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) enumeration.</span></span> <span data-ttu-id="7e9b8-150">В общем случае следует использовать значение NoError UndefinedError и общая ошибка, когда это возможно.</span><span class="sxs-lookup"><span data-stu-id="7e9b8-150">In general, you should avoid using NoError, UndefinedError, and GenericError whenever possible.</span></span>

<span data-ttu-id="7e9b8-151">Пользователи могут просматривать ошибки, основанной на категориях, когда они значение "`$ErrorView`" для «CategoryView».</span><span class="sxs-lookup"><span data-stu-id="7e9b8-151">Users can view errors based on category when they set "`$ErrorView`" to "CategoryView".</span></span>

## <a name="see-also"></a><span data-ttu-id="7e9b8-152">См. также</span><span class="sxs-lookup"><span data-stu-id="7e9b8-152">See Also</span></span>

[<span data-ttu-id="7e9b8-153">Командлеты Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="7e9b8-153">Windows PowerShell Cmdlets</span></span>](./cmdlet-overview.md)

[<span data-ttu-id="7e9b8-154">Выходные данные командлета</span><span class="sxs-lookup"><span data-stu-id="7e9b8-154">Cmdlet Output</span></span>](./types-of-cmdlet-output.md)

[<span data-ttu-id="7e9b8-155">Оболочка Windows PowerShell SDK</span><span class="sxs-lookup"><span data-stu-id="7e9b8-155">Windows PowerShell Shell SDK</span></span>](../windows-powershell-reference.md)
