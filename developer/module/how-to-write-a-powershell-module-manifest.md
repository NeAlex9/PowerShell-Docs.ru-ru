---
title: Как создать манифест модуля PowerShell | Документация Майкрософт
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e082c2e3-12ce-4032-9caf-bf6b2e0dcf81
caps.latest.revision: 23
ms.openlocfilehash: 93a8c11099a9883127bca87422e1acaebfd2c093
ms.sourcegitcommit: 00cf9a99972ce40db7c25b9a3fc6152dec6bddb6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64670298"
---
# <a name="how-to-write-a-powershell-module-manifest"></a>Как написать манифест модуля PowerShell

После написания модуля Windows PowerShell, при необходимости можно добавить манифест модуля. Манифест модуля представляет файл сценария PowerShell, которые можно использовать для включения сведений о модуле. Например можно описывают автора, файлы в модуле (например, вложенные модули), выполнять скрипты для настройки среды пользователя, загрузить тип и файлы форматирования, определим требования к системе, а также ограничить элементы, экспортируемые модулем.

## <a name="creating-a-module-manifest"></a>Создание манифеста модуля

Объект *манифеста модуля* является файл данных Windows PowerShell (psd1), который описывает содержимое модуля и определяет, как происходит обработка модуля. Сам файл манифеста — это текстовый файл, содержащий хэш-таблицу ключей и значений. Связать файл манифеста для модуля именования так же, как модуль, и поместить его в корневом каталоге модуля.

Для простых модулей, которые содержат только один psm1 или двоичную сборку манифеста модуля является необязательным. Тем не менее рекомендуется использовать манифеста модуля, когда это возможно, так как они полезны для организации кода и поддерживать сведения об управлении версиями. Кроме того манифест модуля необходим для экспорта сборки, которая установлена в глобальном кэше сборок. Манифест модуля также является обязательным для модулей, которые поддерживают функцию обновляемой справки. То есть используются обновляемую справку **HelpInfoUri** ключа в манифесте модуля, чтобы найти файл справки сведения (HelpInfo XML), который содержит расположение обновленные файлы справки для модуля. Дополнительные сведения об обновляемой справке см. в разделе [поддержка обновляемой справки](./supporting-updatable-help.md).

### <a name="to-create-and-use-a-module-manifest"></a>Создание и использование манифеста модуля

1. Чтобы создать манифест модуля, можно несколькими способами:

   1. Напрямую создать хэш-таблицы с минимальные сведения, необходимые и сохраните его в psd1-файл, имеющий имя, совпадающее с именем вашего модуля. После этого, можно открыть файл и вручную добавить в соответствующие значения.

      `'@{ModuleVersion="1.0"}' > myModuleName.psd1`

   2. Или позвоните [New-ModuleManifest](/powershell/module/Microsoft.PowerShell.Core/New-ModuleManifest) командлет с одним или несколькими значениями по умолчанию, переданный в качестве параметров. (Обратите внимание, что требуется для создания манифеста, однако только имя файла.) Манифест модуля будут созданы со всеми манифеста значениями, указанными в явном виде и с помощью rest, содержащий соответствующее значение по умолчанию.

      `New-ModuleManifest myModuleName.psd1 -ModuleVersion "2.0" -Author "YourNameHere"`

   3. Наконец можно также создать пустой psd1-файл и скопировать шаблон в нижней части этого раздела в файл и введите соответствующие значения. Единственным реальным требованием в данном случае следует убедиться, что файл назывался так же, как модуль.

2. Добавьте в дополнительные элементы в манифест, который требуется, чтобы в файле.

   Вообще говоря это будет возможно сделать в любой текстовый редактор, вы предпочитаете, например в блокноте. Тем не менее технически это файл скрипта, который содержит код, поэтому вы можете изменить его в фактический написания сценариев и разработки среде, например интегрированная среда Сценариев PowerShell. Опять же Обратите внимание на то, что все элементы файла манифеста являются необязательными, за исключением номер ModuleVersion.

   Описание разделов и значений, у вас в манифесте модуля, см. в разделе **элементы манифеста модуля** ниже. Дополнительные сведения см. в разделе описания параметров в [New-ModuleManifest](/powershell/module/Microsoft.PowerShell.Core/New-ModuleManifest) командлета.

3. При необходимости можно добавить дополнительный код в манифест модуля, для сценариев, которые бы не оказываться элементов основной модуль манифеста.

   Из-за проблемы безопасности PowerShell будет выполняться только небольшое подмножество доступных операций в файле манифеста модуля. Как правило, можно использовать **Если** инструкции, арифметические и операторы сравнения и базовых типов данных PowerShell.

4. После создания манифест модуля, можно проверить его (чтобы убедиться, что все пути, описанные в манифеста являются правильными) с помощью вызова [Test-ModuleManifest](/powershell/module/Microsoft.PowerShell.Core/Test-ModuleManifest).

   `Test-ModuleManifest myModuleName.psd1`

5. Убедитесь, что манифест модуля находится на верхнем уровне каталога, в котором содержится вашего модуля.

   При копировании вашего модуля в систему и импортировать его, PowerShell использует для импорта модуля манифеста модуля.

6. При необходимости можно напрямую проверить манифест модуля с помощью вызова [Import-Module](/powershell/module/Microsoft.PowerShell.Core/Import-Module) по с точкой манифест сам.

   `Import-Module .\myModuleName.psd1`

## <a name="module-manifest-elements"></a>Элементы манифеста модуля

В следующей таблице описаны элементы, которые возникают в манифесте модуля

|Элемент|Значение по умолчанию|Описание|
|-------------|-------------|-----------------|
|RootModule<br /><br /> Тип: строка|' '|Модуль или двоичного файла модуля скрипта связан этот манифест. Предыдущие версии PowerShell вызывается этот элемент ModuleToProcess.<br /><br /> Возможные типы для основного модуля может быть пустым (что сделает это **манифеста** модуля), имя модуля сценариев (.psm1, что делает это **скрипт** модуля), или именем двоичного модуля (.exe или .dll, что делает это **двоичных** модуля). Поместив имя манифеста модуля (.psd1) или файл сценария (.ps1) в этом элементе вызовет возникновения ошибок.|
|ModuleVersion<br /><br /> Тип: строка|1.0|Номер версии этого модуля. Строка должна быть возможность преобразования [System.Version]. То есть "#. #. #. #. #". `Import-Module` загрузит первого модуля, она обнаружит на **$psModulePath** , совпадает с именем и имеет по крайней мере, как высокая ModuleVersion как `-MinimumVersion` параметр. Чтобы импортировать определенную версию, используйте`-RequiredVersion` параметра, вместо этого.<br /><br /> Пример: `ModuleVersion = '1.0'`|
|Код GUID<br /><br /> Тип: строка|Автоматически созданное GUID|Идентификатор, используемый для уникальной идентификации этого модуля. Обратите внимание на то, что невозможно в настоящее время импорта модуля по идентификатору GUID.<br /><br /> Пример: `GUID = 'cfc45206-1e49-459d-a8ad-5b571ef94857'`|
|Дизайнер<br /><br /> Тип: строка|Нет|Автор этого модуля.<br /><br /> Пример: `Author = 'AuthorNameHere'`|
|CompanyName<br /><br /> Тип: строка|Unknown|Компания или поставщик этого модуля.<br /><br /> Пример: `CompanyName = 'Fabrikam'`|
|Авторские права<br /><br /> Тип: строка|(c) [currentYear] [автор]. Все права защищены.|Заявление об авторских правах для этого модуля.<br /><br /> Пример: `Copyright = '2016 AuthorName. All rights reserved.'`|
|Описание<br /><br /> Тип: строка|' '|Описание функций, предоставляемых этим модулем.<br /><br /> Пример: `Description = 'This is a description of a module.'`|
|PowerShellVersion<br /><br /> Тип: строка|' '|Минимальная версия подсистемы Windows PowerShell, необходимых этим модулем. Текущий допустимые значения: 1.0, 2.0, 3.0, 4.0 и 5.0.<br /><br /> Пример: `PowerShellVersion = '5.0'`|
|PowerShellHostName<br /><br /> Тип: строка|' '|Указывает имя узла Windows PowerShell, который необходим в модуле. Это имя предоставляется Windows PowerShell. Чтобы найти имя основной программы, в программе, введите: `$host.name` .<br /><br /> Пример: `PowerShellHostName = 'Windows PowerShell ISE Host'`|
|PowerShellHostVersion<br /><br /> Тип: строка|' '|Минимальная версия узла Windows PowerShell, необходимых этим модулем.<br /><br /> Пример: `PowerShellHostVersion = '2.0'`|
|DotNetFrameworkVersion<br /><br /> Тип: строка|' '|Минимальная версия Microsoft .NET Framework требуется этим модулем.<br /><br /> Пример: `DotNetFrameworkVersion = '3.5'`|
|CLRVersion<br /><br /> Тип: строка|' '|Минимальная версия общеязыковой среды выполнения (CLR), необходимых этим модулем.<br /><br /> Пример: `CLRVersion = '3.5'`|
|ProcessorArchitecture<br /><br /> Тип: строка|' '|Архитектура процессора (нет, X86, Amd64) требуется этим модулем. Допустимые значения: x86, AMD64, IA64 и None (неизвестен или не задан).<br /><br /> Пример: `ProcessorArchitecture = 'x86'`|
|RequiredModules<br /><br /> Тип: [строка []]|@()|Модули, которые должны быть импортированы в глобальной среде, прежде чем импортировать этот модуль. Он загрузит каких-либо модулей, если они уже были загружены в списке. (Например, некоторые модули могут уже быть загружен модуль.). Это также можно указать определенную версию для загрузки с помощью `RequiredVersion` вместо `ModuleVersion`. При использовании `ModuleVersion` он будет загрузить новейшую версию пакета с как минимум указанной версии.<br /><br /> Пример: `RequiredModules = @(@{ModuleName="myDependentModule"; ModuleVersion="2.0"; Guid="cfc45206-1e49-459d-a8ad-5b571ef94857"})`<br /><br /> Пример: `RequiredModules = @(@{ModuleName="myDependentModule"; RequiredVersion="1.5"; Guid="cfc45206-1e49-459d-a8ad-5b571ef94857"})`|
|RequiredAssemblies<br /><br /> Тип: [строка []]|@()|Сборки, необходимо загрузить до импорта этого модуля.<br /><br /> Обратите внимание, что в отличие от RequiredModules, PowerShell будет загружать RequiredAssemblies, если они уже не загружены.|
|ScriptsToProcess<br /><br /> Тип: [строка []]|@()|Файлы скрипта (ps1), которые выполняются в состоянии сеанса вызывающего при импорте модуля. Это может быть глобальный сеанс, состояние или, для вложенных модулей, состояние сеанса другого модуля. Эти сценарии можно использовать для подготовки среды, так же, как можно использовать скрипт входа в систему.<br /><br /> Эти скрипты выполняются перед загрузкой всех модулей, перечисленных в манифесте.|
|TypesToProcess<br /><br /> Тип: [объекта []]|@()|Введите файлы (ps1xml), необходимо загрузить, при импорте этого модуля.|
|FormatsToProcess<br /><br /> Тип: [объекта []]|@()|Файлы (ps1xml-файлы) для загрузки, при импорте этого модуля форматирования.|
|NestedModules<br /><br /> Тип: [объекта []]|@()|Модули для импорта в качестве вложенных модулей из модуля, указанного в RootModule/ModuleToProcess.<br /><br /> Добавление имени модуля к данному элементу аналогично вызову `Import-Module` из кода сценария или сборки. Основное различие — это проще видеть, что вы загружаете здесь в файле манифеста. Кроме того Если модуль не удается загрузить здесь, будет не еще загрузки фактическое модуля.<br /><br /> Помимо других модулей могут также загрузить здесь файлы скрипта (ps1). Эти файлы будет выполняться в контексте основного модуля. (Это эквивалентно точечное введение сценарий в модуле корневой.)|
|FunctionsToExport<br /><br /> Введите команду: Строка|'*'|Указывает состояние сеанса вызывающего функции, экспортируемые модулем (подстановочный знак, который разрешается использовать знаки). По умолчанию экспортируются все функции. Этот ключ можно использовать для ограничения экспортируемых модулем функций.<br /><br /> Состояние сеанса вызывающего может быть глобальный сеанс, состояние или, для вложенных модулей, состояние сеанса другого модуля. При объединении вложенные модули, все функции, экспортируемые модулем вложенных будут экспортированы в глобальное состояние сеанса, если модуля в цепочке ограничит функцию с помощью FunctionsToExport ключа.<br /><br /> Если манифест также экспортирует псевдонимы для функций, этот ключ можно удалить функции, псевдонимы, перечислены в разделе AliasesToExport, но этот ключ не удается добавить функцию псевдонимы в список.|
|CmdletsToExport<br /><br /> Введите команду: Строка|'*'|Задает командлеты, экспортируемые модулем (подстановочный знак, который разрешается использовать знаки). По умолчанию экспортируются все командлеты. Этот ключ можно использовать для ограничения экспортируемых модулем командлетов.<br /><br /> Состояние сеанса вызывающего может быть глобальный сеанс, состояние или, для вложенных модулей, состояние сеанса другого модуля. При объединении в вложенные модули все командлеты, экспортируемые модулем вложенных в конечном счете экспортируется в глобальном состоянии сеанса Если модуля в цепочке ограничит командлет с помощью CmdletsToExport ключа.<br /><br /> Если манифест также экспортирует псевдонимы для командлетов, этот ключ позволяет удалять командлеты, псевдонимы, перечислены в ключе AliasesToExport, но этот ключ не может добавить в список псевдонимы командлетов.|
|VariablesToExport<br /><br /> Введите команду: Строка|'*'|Указывает переменные, экспортируемые модулем (подстановочный знак, который разрешается использовать знаки) в состоянии сеанса вызывающего. По умолчанию экспортируются все переменные. Этот ключ можно использовать для ограничения экспортируемых модулем переменных.<br /><br /> Состояние сеанса вызывающего может быть глобальный сеанс, состояние или, для вложенных модулей, состояние сеанса другого модуля. При объединении в вложенные модули, если модуля в цепочке ограничит переменной с помощью ключа VariablesToExport все переменные, экспортируемые модулем вложенных будут экспортированы в глобальное состояние сеанса.<br /><br /> Если манифест также экспортирует псевдонимы для переменных, этот ключ можно удалить переменные, псевдонимы, перечислены в разделе AliasesToExport, но этот ключ не может добавить в список переменных псевдонимы.|
|AliasesToExport<br /><br /> Введите команду: Строка|'*'|Указывает состояние сеанса вызывающего псевдонимы, экспортируемые модулем (подстановочный знак, который разрешается использовать знаки). По умолчанию экспортируются все псевдонимы. Этот ключ можно использовать для ограничения экспортируемых модулем псевдонимов.<br /><br /> Состояние сеанса вызывающего может быть глобальный сеанс, состояние или, для вложенных модулей, состояние сеанса другого модуля. При объединении в вложенные модули все псевдонимы, экспортируемые модулем вложенных в конечном счете экспортируется в глобальном состоянии сеанса Если модуля в цепочке ограничит псевдоним с помощью ключа AliasesToExport.|
|ModuleList<br /><br /> Тип: [строка []]|@()|Указывает все модули, которые упакованы с данным модулем. Эти модули могут быть введены по имени (строка с разделителями запятыми) или хэш-таблицы с ключи ModuleName и GUID. Хэш-таблицы, также может иметь необязательный ключ ModuleVersion. Ключ ModuleList предназначен для работы в качестве списка ресурсов модуля. Эти модули не обрабатываются автоматически.|
|Список файлов<br /><br /> Тип: [строка []]|@()|Список всех файлов, упакованные в состав этого модуля. Как с ModuleList, FileList помогут вам как список, а в противном случае не обрабатывается.|
|PrivateData<br /><br /> Тип: [object]|' '|Указывает любым конфиденциальным данным, который должен быть передан для основного модуля, определенный ключем RootModule/ModuleToProcess.|
|HelpInfoURI<br /><br /> Тип: строка|' '|HelpInfo URI этого модуля.|
|DefaultCommandPrefix<br /><br /> Тип: строка|' '|Префикс по умолчанию для команд, экспортированный из этого модуля. Переопределите префикс по умолчанию, используя `Import-Module` -префикс.|

## <a name="sample-module-manifest"></a>Пример манифеста модуля

Приведенный ниже манифест модуля пример показывает ключи и значения по умолчанию в манифесте модуля. В этом примере был создан с помощью `New-ModuleManifest` командлет в Windows PowerShell 3.0. При создании нескольких модулей, с помощью этого командлета можно создать шаблон манифеста, который затем можно изменить для различных модулей.

```powershell
#
# Module manifest for module 'myManifest'
#
# Generated by: User01
#
# Generated on: 1/24/2012
#

@{

# Script module or binary module file associated with this manifest
#RootModule = ''

# Version number of this module.
ModuleVersion = '1.0'

# ID used to uniquely identify this module
GUID = 'd0a9150d-b6a4-4b17-a325-e3a24fed0aa9'

# Author of this module
Author = 'User01'

# Company or vendor of this module
CompanyName = 'Unknown'

# Copyright statement for this module
Copyright = '(c) 2012 User01. All rights reserved.'

# Description of the functionality provided by this module
# Description = ''

# Minimum version of the Windows PowerShell engine required by this module
# PowerShellVersion = ''

# Name of the Windows PowerShell host required by this module
# PowerShellHostName = ''

# Minimum version of the Windows PowerShell host required by this module
# PowerShellHostVersion = ''

# Minimum version of the .NET Framework required by this module
# DotNetFrameworkVersion = ''

# Minimum version of the common language runtime (CLR) required by this module
# CLRVersion = ''

# Processor architecture (None, X86, Amd64) required by this module
# ProcessorArchitecture = ''

# Modules that must be imported into the global environment prior to importing this module
# RequiredModules = @()

# Assemblies that must be loaded prior to importing this module
# RequiredAssemblies = @()

# Script files (.ps1) that are run in the caller's environment prior to importing this module
# ScriptsToProcess = @()

# Type files (.ps1xml) to be loaded when importing this module
# TypesToProcess = @()

# Format files (.ps1xml) to be loaded when importing this module
# FormatsToProcess = @()

# Modules to import as nested modules of the module specified in RootModule/ModuleToProcess
# NestedModules = @()

# Functions to export from this module
FunctionsToExport = '*'

# Cmdlets to export from this module
CmdletsToExport = '*'

# Variables to export from this module
VariablesToExport = '*'

# Aliases to export from this module
AliasesToExport = '*'

# List of all modules packaged with this module
# ModuleList = @()

# List of all files packaged with this module
# FileList = @()

# Private data to pass to the module specified in RootModule/ModuleToProcess
# PrivateData = ''

# HelpInfo URI of this module
# HelpInfoURI = ''

# Default prefix for commands exported from this module. Override the default prefix using Import-Module -Prefix.
# DefaultCommandPrefix = ''

}

```

## <a name="see-also"></a>См. также

[Написание модуля Windows PowerShell](./writing-a-windows-powershell-module.md)
