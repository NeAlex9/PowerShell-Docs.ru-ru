---
ms.date: 06/12/2017
keywords: wmf,powershell,установка
ms.openlocfilehash: 4c2a3fb15b108f1a8e9fd271a620bcb1cb8c77ed
ms.sourcegitcommit: 54534635eedacf531d8d6344019dc16a50b8b441
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2018
ms.locfileid: "34222342"
---
# <a name="mof-documents-are-encrypted-by-default"></a><span data-ttu-id="e3b07-102">Документы MOF шифруются по умолчанию</span><span class="sxs-lookup"><span data-stu-id="e3b07-102">MOF Documents Are Encrypted By Default</span></span>

<span data-ttu-id="e3b07-103">Документы конфигурации содержат конфиденциальную информацию.</span><span class="sxs-lookup"><span data-stu-id="e3b07-103">Configuration documents contain sensitive information.</span></span> <span data-ttu-id="e3b07-104">В предыдущих версиях DSC для обеспечения безопасности учетных данных в конфигурации требовалось распространять сертификаты и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="e3b07-104">In previous versions of DSC you were required to distribute and manage certificates in order to secure credentials within a configuration.</span></span> <span data-ttu-id="e3b07-105">У многих эта процедура занимала слишком много времени, и даже после ее реализации оставались незащищенные сведения конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e3b07-105">For many, this was a significant management burden and even with all of the work it took to do this you were still left with some configuration information that was not and could not be secured.</span></span>

<span data-ttu-id="e3b07-106">Теперь все изменилось, так как **все MOF-файлы конфигурации защищены по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="e3b07-106">That is no longer the case because **all configuration MOFs are secured by default**.</span></span> <span data-ttu-id="e3b07-107">Не нужно никаких сертификатов или параметров метаконфигураций.</span><span class="sxs-lookup"><span data-stu-id="e3b07-107">No certificates or meta-configuration settings are needed.</span></span> <span data-ttu-id="e3b07-108">Каждый раз, когда локальный диспетчер конфигураций на целевом узле сохраняет MOF конфигурации на диске, этот документ шифруется.</span><span class="sxs-lookup"><span data-stu-id="e3b07-108">Any time a configuration MOF is saved to disk by the Local Configuration Manager (LCM) on a target node, it is encrypted.</span></span> <span data-ttu-id="e3b07-109">Для шифрования MOF-файлов используется [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).</span><span class="sxs-lookup"><span data-stu-id="e3b07-109">The MOFs are encrypted using [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).</span></span> <span data-ttu-id="e3b07-110">**Примечание.** MOF-файлы, созданные с помощью сценария конфигурации, не шифруются.</span><span class="sxs-lookup"><span data-stu-id="e3b07-110">**Note:** MOFs generated by a configuration script are not encrypted.</span></span>

<span data-ttu-id="e3b07-111">**Пример**. Шифрование в режиме принудительной отправки ![Шифрование MOF-файлов](../images/MOF_Encryption.jpg)</span><span class="sxs-lookup"><span data-stu-id="e3b07-111">**Example:** Encryption in push mode ![MOF Encryption](../images/MOF_Encryption.jpg)</span></span>

<span data-ttu-id="e3b07-112">Если вы уже используете метод сертификатов для шифрования паролей или хотите обеспечить дополнительную защиту паролей, [существующий метод шифрования на основе сертификатов](https://msdn.microsoft.com/powershell/dsc/securemof) продолжит работать.</span><span class="sxs-lookup"><span data-stu-id="e3b07-112">If you are already using the certificate method for encrypting passwords or if you need additional security for your passwords, the [existing method of certificate based encryption](https://msdn.microsoft.com/powershell/dsc/securemof) will continue to work.</span></span> <span data-ttu-id="e3b07-113">В результате получается документ MOF, который полностью зашифрован с помощью DPAPI, а также содержит зашифрованные пароли.</span><span class="sxs-lookup"><span data-stu-id="e3b07-113">The result will be a MOF document that is fully encrypted using the DPAPIs and additionally have passwords encrypted within it.</span></span>

<span data-ttu-id="e3b07-114">Такое шифрование применяется только к документам MOF конфигурации (pending.mof, current.mof, previous.mof, а также неполные MOF-файлы).</span><span class="sxs-lookup"><span data-stu-id="e3b07-114">This encryption only applies to configuration MOF documents (pending.mof, current.mof, previous.mof and partial MOFs).</span></span> <span data-ttu-id="e3b07-115">MOF-файлы метаконфигурации по-прежнему сохраняются в виде обычного текста, поскольку они с меньшей вероятностью содержат секретные данные.</span><span class="sxs-lookup"><span data-stu-id="e3b07-115">Meta-configuration MOFs are still saved in plain text since they less likely contain secrets.</span></span>
